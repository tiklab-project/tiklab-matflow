(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{533:function(e,n,t){"use strict";t(41);var r=t(42),a=t(0),i=t.n(a),l="D:\\idea\\tiklab\\tiklab-matflow-ui\\src\\common\\btn\\Btn.js";n.a=function(e){var n=e.icon,t=e.type,a=e.title,u=e.onClick,c=e.isMar,m=e.children;return i.a.createElement("div",{className:"mf-btn ".concat(t?"mf-btn-".concat(t):""," ").concat(c?"mf-btn-mar":""),onClick:u,__source:{fileName:l,lineNumber:19,columnNumber:9}},i.a.createElement(r.default,{__source:{fileName:l,lineNumber:20,columnNumber:13}},n&&i.a.createElement("span",{className:"mf-btn-icon",__source:{fileName:l,lineNumber:22,columnNumber:30}},n),m||a))}},606:function(e,n,t){"use strict";var r=t(0),a=t.n(r);n.a=function(e){var n=e.text,t=e.colors;return a.a.createElement("span",{className:"mf-listname-icon ".concat(t?"mf-icon-".concat(t):"mf-icon-1"),__source:{fileName:"D:\\idea\\tiklab\\tiklab-matflow-ui\\src\\common\\list\\ListIcon.js",lineNumber:13,columnNumber:13}},n&&n.substring(0,1).toUpperCase())}},607:function(e,n,t){"use strict";var r=t(0),a=t.n(r),i="D:\\idea\\tiklab\\tiklab-matflow-ui\\src\\common\\tabs\\Tabs.js";n.a=function(e){var n=e.tabLis,t=e.type,r=e.onClick;return a.a.createElement("div",{className:"mf-tabs",__source:{fileName:i,lineNumber:15,columnNumber:9}},n.map((function(e){return a.a.createElement("div",{key:e.id,className:"mf-tab ".concat(t===e.id?"mf-active-tab":""),onClick:function(){return r(e)},__source:{fileName:i,lineNumber:18,columnNumber:21}},e.title)})))}},941:function(e,n,t){"use strict";t.r(n);t(84);var r=t(72),a=t(0),i=t.n(a),l=t(90),u=t(193),c=t(28),m=t(27),o=(t(55),t(54)),s=(t(548),t(546)),b=(t(41),t(42)),f=(t(103),t(102)),N=(t(44),t(18)),p=t(503),_=t(504),d=t(505),g=t(479),y=t(506),h=t(481),E=t(536),v=t(551),w=t(606),j=t(557),O=t.p+"images/pip_success.svg",k=t.p+"images/pip_error.svg",P=t.p+"images/pip_fog.svg",S=t.p+"images/pip_halt.svg",x=t(545),C="D:\\idea\\tiklab\\tiklab-matflow-ui\\src\\pipeline\\pipeline\\components\\PipelineTable.js",T=Object(m.inject)("historyStore")(Object(m.observer)((function(e){var n=e.historyStore,t=e.pipelineStore,r=e.changPage,a=e.changFresh,l=e.listType,u=e.isLoading,c=n.execStart,m=n.execStop,T=t.pipelineListPage,I=t.updateFollow,D=t.pipPage,A=function(e,n){0===e.code?N.default.info("".concat(n,"成功"),.5):N.default.info(e.msg,.5)},L=function(e){switch(e){case"success":return"成功";case"error":return"失败";case"run":return"正在运行";case"wait":return"等待";case"halt":return"终止";default:return"无构建"}},F=function(e){switch(e){case"success":return O;case"error":return k;case"run":case"wait":return P;case"halt":return S;default:return O}},B=[{title:"流水线名称",dataIndex:"name",key:"name",width:"30%",ellipsis:!0,render:function(n,t){return i.a.createElement("span",{className:"pipelineTable-name",onClick:function(){return function(n,t){return e.history.push("/index/pipeline/".concat(t.id,"/survey"))}(0,t)},__source:{fileName:C,lineNumber:134,columnNumber:25}},i.a.createElement(w.a,{text:n,colors:t.color,__source:{fileName:C,lineNumber:135,columnNumber:29}}),i.a.createElement("span",{__source:{fileName:C,lineNumber:136,columnNumber:29}},n))}},{title:"最近构建信息",dataIndex:"lastBuildTime",key:"lastBuildTime",width:"25%",ellipsis:!0,render:function(n,t){var r=t.buildStatus,a=t.number;return i.a.createElement(b.default,{__source:{fileName:C,lineNumber:149,columnNumber:21}},i.a.createElement(f.default,{title:L(r),__source:{fileName:C,lineNumber:150,columnNumber:25}},i.a.createElement("img",{src:F(r),alt:"log",className:"imgs",__source:{fileName:C,lineNumber:151,columnNumber:29}})),n||"无构建",a&&i.a.createElement("span",{className:"pipeline-number",onClick:function(){return function(n){return e.history.push("/index/pipeline/".concat(n.id,"/structure/").concat(n.instanceId,"/post"))}(t)},__source:{fileName:C,lineNumber:154,columnNumber:37}},"# ",a))}},{title:"负责人",dataIndex:["user","nickname"],key:"user",width:"20%",ellipsis:!0,render:function(e,n){return i.a.createElement(b.default,{__source:{fileName:C,lineNumber:166,columnNumber:25}},i.a.createElement(v.a,{userInfo:n.user,__source:{fileName:C,lineNumber:167,columnNumber:29}}),e)}},{title:"可见范围",dataIndex:"power",key:"power",width:"15%",ellipsis:!0,render:function(e){switch(e){case 1:return i.a.createElement(b.default,{__source:{fileName:C,lineNumber:181,columnNumber:33}},i.a.createElement(p.a,{__source:{fileName:C,lineNumber:182,columnNumber:37}}),"全局");case 2:return i.a.createElement(b.default,{__source:{fileName:C,lineNumber:186,columnNumber:33}},i.a.createElement(_.a,{__source:{fileName:C,lineNumber:187,columnNumber:37}}),"私有")}}},{title:"操作",dataIndex:"action",key:"action",width:"10%",ellipsis:!0,render:function(n,t){var r=t.state,l=t.collect;return i.a.createElement(b.default,{__source:{fileName:C,lineNumber:202,columnNumber:21}},i.a.createElement(f.default,{title:3===r?"等待":"运行",__source:{fileName:C,lineNumber:203,columnNumber:25}},i.a.createElement("span",{className:"pipelineTable-state",onClick:function(){return function(e){1===e.state?c(e.id).then((function(){a()})):m(e.id).then((function(){a()}))}(t)},__source:{fileName:C,lineNumber:204,columnNumber:29}},1===r&&i.a.createElement(d.a,{className:"actions-se",__source:{fileName:C,lineNumber:205,columnNumber:50}}),2===r&&i.a.createElement(s.a,{indicator:i.a.createElement(g.a,{className:"actions-se",spin:!0,__source:{fileName:C,lineNumber:206,columnNumber:67}}),__source:{fileName:C,lineNumber:206,columnNumber:50}}),3===r&&i.a.createElement(y.a,{className:"actions-se",__source:{fileName:C,lineNumber:207,columnNumber:50}}))),i.a.createElement(f.default,{title:"历史",__source:{fileName:C,lineNumber:210,columnNumber:25}},i.a.createElement("span",{className:"pipelineTable-history",onClick:function(){return function(n){return e.history.push("/index/pipeline/".concat(n.id,"/structure"))}(t)},__source:{fileName:C,lineNumber:211,columnNumber:29}},i.a.createElement(h.a,{className:"actions-se",__source:{fileName:C,lineNumber:212,columnNumber:33}}))),i.a.createElement(f.default,{title:"收藏",__source:{fileName:C,lineNumber:215,columnNumber:25}},i.a.createElement("span",{className:"pipelineTable-collect",onClick:function(){return function(e){I({id:e.id}).then((function(n){0===e.collect?A(n,"收藏"):A(n,"取消"),a()}))}(t)},__source:{fileName:C,lineNumber:216,columnNumber:29}},0===l?i.a.createElement("svg",{className:"icon","aria-hidden":"true",__source:{fileName:C,lineNumber:219,columnNumber:37}},i.a.createElement("use",{xlinkHref:"#icon-xingxing-kong",__source:{fileName:C,lineNumber:220,columnNumber:41}})):i.a.createElement("svg",{className:"icon","aria-hidden":"true",__source:{fileName:C,lineNumber:223,columnNumber:37}},i.a.createElement("use",{xlinkHref:"#icon-xingxing1",__source:{fileName:C,lineNumber:224,columnNumber:41}})))))}}];return i.a.createElement("div",{className:"pipelineTable",__source:{fileName:C,lineNumber:235,columnNumber:13}},i.a.createElement(o.default,{bordered:!1,columns:B,dataSource:T,rowKey:function(e){return e.id},pagination:!1,locale:{emptyText:u?i.a.createElement(x.c,{type:"table",__source:{fileName:C,lineNumber:243,columnNumber:29}}):i.a.createElement(E.a,{title:1===l?"暂无流水线":"暂无收藏",__source:{fileName:C,lineNumber:243,columnNumber:58}})},__source:{fileName:C,lineNumber:236,columnNumber:17}}),(null==D?void 0:D.total)>1&&i.a.createElement(j.a,{pageCurrent:D.current,changPage:r,page:D,__source:{fileName:C,lineNumber:247,columnNumber:21}}))}))),I=t(537),D=t(533),A=t(607),L="D:\\idea\\tiklab\\tiklab-matflow-ui\\src\\pipeline\\pipeline\\components\\Pipeline.js";function F(){return(F=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function B(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function U(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?B(Object(t),!0).forEach((function(n){z(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):B(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function z(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function H(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==t)return;var r,a,i=[],l=!0,u=!1;try{for(t=t.call(e);!(l=(r=t.next()).done)&&(i.push(r.value),!n||i.length!==n);l=!0);}catch(e){u=!0,a=e}finally{try{l||null==t.return||t.return()}finally{if(u)throw a}}return i}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return J(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}n.default=Object(c.o)(Object(m.inject)("pipelineStore")(Object(m.observer)((function(e){var n=e.pipelineStore,t=n.findUserPipelinePage,c=H(Object(a.useState)(1),2),m=c[0],o=c[1],s=H(Object(a.useState)(!1),2),b=s[0],f=s[1],N=H(Object(a.useState)(!0),2),p=N[0],_=N[1],d=H(Object(a.useState)({pageSize:13,currentPage:1}),1)[0],g=H(Object(a.useState)({pageParam:d}),2),y=g[0],h=g[1];Object(a.useEffect)((function(){1===m?t(y).then((function(e){return _(!1)})):t(U(U({},y),{},{pipelineFollow:1})).then((function(e){return _(!1)}))}),[b,y]);return i.a.createElement("div",{className:"pipeline",__source:{fileName:L,lineNumber:98,columnNumber:9}},i.a.createElement("div",{className:"pipeline-content mf-home-limited mf",__source:{fileName:L,lineNumber:99,columnNumber:13}},i.a.createElement("div",{className:"pipeline-top pipeline-flex",__source:{fileName:L,lineNumber:100,columnNumber:17}},i.a.createElement(I.a,{firstItem:"流水线",__source:{fileName:L,lineNumber:101,columnNumber:21}}),i.a.createElement(D.a,{onClick:function(){return e.history.push("/index/pipeline/new")},type:"primary",title:"新建流水线",icon:i.a.createElement(l.default,{__source:{fileName:L,lineNumber:102,columnNumber:83}}),__source:{fileName:L,lineNumber:102,columnNumber:21}})),i.a.createElement("div",{className:"pipeline-type",__source:{fileName:L,lineNumber:104,columnNumber:17}},i.a.createElement(A.a,{type:m,tabLis:[{id:1,title:"所有流水线"},{id:2,title:"我收藏的"}],onClick:function(e){h({pageParam:d}),o(e.id)},__source:{fileName:L,lineNumber:105,columnNumber:21}}),i.a.createElement("div",{className:"pipeline-type-input",__source:{fileName:L,lineNumber:109,columnNumber:21}},i.a.createElement(r.default,{allowClear:!0,placeholder:"流水线名称",onChange:function(e){h(U(U({},y),{},{pipelineName:e.target.value,pageParam:d}))},prefix:i.a.createElement(u.default,{__source:{fileName:L,lineNumber:114,columnNumber:37}}),style:{width:200},__source:{fileName:L,lineNumber:110,columnNumber:25}}))),i.a.createElement(T,F({},e,{listType:m,isLoading:p,changPage:function(e){h(U(U({},y),{},{pageParam:{pageSize:13,currentPage:e}}))},changFresh:function(){return f(!b)},pipelineStore:n,__source:{fileName:L,lineNumber:119,columnNumber:17}}))))}))))}}]);