(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{170:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMAIN_USER_STORE",{enumerable:!0,get:function(){return u.DOMAIN_USER_STORE}}),Object.defineProperty(t,"ORG_STORE",{enumerable:!0,get:function(){return i.ORG_STORE}}),Object.defineProperty(t,"PRIVILEGE_DOMAIN_ROLE_STORE",{enumerable:!0,get:function(){return o.PRIVILEGE_DOMAIN_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_FEATURE_STORE",{enumerable:!0,get:function(){return c.PRIVILEGE_PROJECT_FEATURE_STORE}}),Object.defineProperty(t,"PRIVILEGE_PROJECT_ROLE_STORE",{enumerable:!0,get:function(){return d.PRIVILEGE_PROJECT_ROLE_STORE}}),Object.defineProperty(t,"PRIVILEGE_SYSTEM_STORE",{enumerable:!0,get:function(){return s.PRIVILEGE_SYSTEM_STORE}}),Object.defineProperty(t,"SYSTEM_ROLE_STORE",{enumerable:!0,get:function(){return f.SYSTEM_ROLE_STORE}}),Object.defineProperty(t,"USER_STORE",{enumerable:!0,get:function(){return l.USER_STORE}}),t.privilegeStores=t.orgStores=void 0;var a=n(r(52)),u=r(260),i=r(261),l=r(257),o=r(262),c=r(263),f=r(264),d=r(265),s=r(266);var p,m=(p={},(0,a.default)(p,i.ORG_STORE,new i.OrgStore),(0,a.default)(p,l.USER_STORE,new l.UserStore),(0,a.default)(p,u.DOMAIN_USER_STORE,new u.DomainUserStore),p);t.orgStores=m;var v,g=(v={},(0,a.default)(v,s.PRIVILEGE_SYSTEM_STORE,new s.SystemFeatureStore),(0,a.default)(v,f.SYSTEM_ROLE_STORE,new f.SystemRoleStore),(0,a.default)(v,d.PRIVILEGE_PROJECT_ROLE_STORE,new d.ProjectRoleStore),(0,a.default)(v,c.PRIVILEGE_PROJECT_FEATURE_STORE,new c.ProjectFeatureStore),(0,a.default)(v,o.PRIVILEGE_DOMAIN_ROLE_STORE,new o.DomainRoleStore),v);t.privilegeStores=g},173:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.sort=t.handlerFeaterNode=void 0,Object.defineProperty(t,"usePermission",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"user_cn",{enumerable:!0,get:function(){return u.default}});var a=n(r(52)),u=n(r(258)),i=n(r(259));function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.sort=c;t.handlerFeaterNode=function(e){return function e(t,r){for(var n=[],a=0;a<t.length;a++){var u=t[a];if(u.parentFunction===r||u.parentFunction&&u.parentFunction.id===r){var i=o(o({},u),{},{children:[]});i.children=e(t,u.id),0===i.children.length&&delete i.children,n.push(i)}}return c(n),n}(e,null)}},197:function(e){e.exports=JSON.parse('{"orga-common":{"delete":"删除","edit":"编辑","action":"操作","save":"保存","back":"取消","search":"搜索","add":"添加","orga":"组织","name":"名称","detail":"详情","close":"关闭"},"orga-table":{"name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有"},"adduser-module":{"addUser":"添加用户","editUser":"编辑用户","detailUser":"详情用户","userType":"用户类型","name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有","userTypeRequired":"用户类型必填!","emailRequired":"邮箱必填!","emailFormat":"邮箱格式不正确!","passwordRequired":"密码必填!","phoneRequired":"手机号必填!","nameRequired":"账号必填!","nicknameRequired":"请输入昵称!"},"orga-label":{"addUser":"添加用户","orgaName":"机构名称","parentOrg":"上级机构","parentOrgPlaceholder":"请选择上级机构","parentOrgRequired":"上级机构必填!","user":"用户","searchUser":"搜索用户名称","searchUserPhoneEmail":"搜索姓名、手机号、邮箱","searchUserAccount":"搜索用户名、帐号","userType":"用户目录"},"orga-tab":{"all":"全部","in":"内部","out":"外部"},"privilege-feature-name":"功能名称","privilege-feature-code":"功能编码","privilege-add-feature":"添加功能","privilege-orga-name":"组织名称","privilege-add-user":"添加成员","privilege-search":"搜索","privilege-desc":"描述","privilege-user-and-org":"用户名、部门","privilege-user":"用户名","privilege-select-user":"选择用户","privilege-common":{"edit":"编辑","delete":"删除","action":"操作","please-input":"请输入","please-select":"请输入","save":"保存","cancel":"取消"},"privilege-add-node":"新增子节点","privilege-edit-feature":"编辑功能","privilege-point-node":"挂载节点","privilege-point-node-placeholder":"请选择挂载节点","privilege-role":{"addRole":"添加角色","addSystemRole":"添加系统角色","editRole":"编辑角色","roleName":"角色名称","roleDesc":"角色描述","people":"成员","promise":"权限","name":"账号","phone":"手机号","nickname":"昵称","email":"邮箱","type":"类别","orga":"部门","thirdparty":"第三方","internal":"内部","system":"系统","custom":"自定义","org":"组织"}}')},257:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=t.USER_STORE=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,g,b,y,h,O,E,w,P,j,k=n(r(38)),S=n(r(117)),_=n(r(96)),D=n(r(83)),R=n(r(82)),x=(n(r(52)),n(r(97))),I=(n(r(98)),r(2)),A=r(6),U=(a=(0,D.default)((function e(){(0,R.default)(this,e),(0,_.default)(this,"userData",u,this),(0,_.default)(this,"qywxconfig",i,this),(0,_.default)(this,"agentConfig",l,this),(0,_.default)(this,"getUserList",o,this),(0,_.default)(this,"editUser",c,this),(0,_.default)(this,"addUser",f,this),(0,_.default)(this,"deleteUser",d,this),(0,_.default)(this,"findUserPageAction",s,this),(0,_.default)(this,"findUser",p,this),(0,_.default)(this,"createUserAction",m,this),(0,_.default)(this,"updateUserAction",v,this),(0,_.default)(this,"deleteUserAction",g,this),(0,_.default)(this,"findRolePageAction",b,this),(0,_.default)(this,"deleteRoleUserAction",y,this),(0,_.default)(this,"createRoleUserAction",h,this),(0,_.default)(this,"findRoleUserListAction",O,this),(0,_.default)(this,"findUserOrgaList",E,this),(0,_.default)(this,"findUserDirList",w,this),(0,_.default)(this,"findWeChatContactConfig",P,this),(0,_.default)(this,"findWeChatApplyContactConfig",j,this)})),u=(0,x.default)(a.prototype,"userData",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,x.default)(a.prototype,"qywxconfig",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=(0,x.default)(a.prototype,"agentConfig",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,x.default)(a.prototype,"getUserList",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=t}}}),c=(0,x.default)(a.prototype,"editUser",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.map((function(e){return e.id===t.id?t:e}))}}}),f=(0,x.default)(a.prototype,"addUser",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.concat(t)}}}),d=(0,x.default)(a.prototype,"deleteUser",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.filter((function(e){return e.id!==t}))}}}),s=(0,x.default)(a.prototype,"findUserPageAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/findUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),p=(0,x.default)(a.prototype,"findUser",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("id",t),e.next=4,A.Axios.post("/user/user/findUser",n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),m=(0,x.default)(a.prototype,"createUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/createUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),v=(0,x.default)(a.prototype,"updateUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/updateUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),g=(0,x.default)(a.prototype,"deleteUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/deleteUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),b=(0,x.default)(a.prototype,"findRolePageAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/role/findRolePage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),y=(0,x.default)(a.prototype,"deleteRoleUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("id",t),e.next=4,A.Axios.post("/roleUser/deleteRoleUser",n,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),h=(0,x.default)(a.prototype,"createRoleUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUser/createRoleUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),O=(0,x.default)(a.prototype,"findRoleUserListAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUser/findRoleUserList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),E=(0,x.default)(a.prototype,"findUserOrgaList",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/userOrga/findUserOrgaList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),w=(0,x.default)(a.prototype,"findUserDirList",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/userdir/findAllList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),P=(0,x.default)(a.prototype,"findWeChatContactConfig",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,S.default)(k.default.mark((function t(r,n){var a,u;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("url",r),a.append("tenantId",n),t.next=5,A.Axios.post("/wechatApplyToken/findWeChatContactConfig",a,{tenant:n});case 5:return 0===(u=t.sent).code&&(e.qywxconfig=u.data),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),j=(0,x.default)(a.prototype,"findWeChatApplyContactConfig",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,S.default)(k.default.mark((function t(r,n){var a,u;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("url",r),a.append("tenantId",n),t.next=5,A.Axios.post("/wechatApplyToken/findWeChatApplyContactConfig",a,{tenant:n});case 5:return 0===(u=t.sent).code&&(e.agentConfig=u.data),t.abrupt("return",u);case 8:case"end":return t.stop()}}),t)})));return function(e,r){return t.apply(this,arguments)}}()}}),a);t.UserStore=U;t.USER_STORE="userStore"},258:function(e,t,r){"use strict";r.r(t);var n=r(197);t.default=n},259:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(129)),u=r(0),i=r(6),l=function(e){var t=e.code,r=e.systemRoleStore,n=e.domainId,l=r.setSystemPermissionsCodes,o=r.setDomainPermissionsCodes,c=r.systemPermissions,f=r.domainPermissions,d=(0,u.useState)(null),s=(0,a.default)(d,2),p=s[0],m=s[1];return(0,u.useEffect)((function(){var e=new FormData,r=n?"permission/findDomainPermissions":"permission/findPermissions",a=(0,i.getUser)();if(a.userId){if(e.append("userId",a.userId),n){if(f.hasOwnProperty(n))return void m(f[n].includes(t));e.append("domainId",n)}else if(c.length>0)return void m(c.includes(t));i.Axios.post(r,e).then((function(e){e.code||(n?o(n,e.data):l(e.data),m(e.data.includes(t)))}))}}),[]),p};t.default=l},260:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.DomainUserStore=t.DOMAIN_USER_STORE=void 0;var a,u,i,l,o=n(r(38)),c=n(r(117)),f=n(r(96)),d=n(r(83)),s=n(r(82)),p=n(r(52)),m=n(r(97)),v=(n(r(98)),r(2)),g=r(6),b=(a=(0,d.default)((function e(){(0,s.default)(this,e),(0,f.default)(this,"privilegeDomainUsers",u,this),(0,f.default)(this,"getDomainUser",i,this),(0,f.default)(this,"deleteDomainUser",l,this),(0,p.default)(this,"findDmUserPageAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmUser/findDmUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,g.Axios.post("/dmUser/deleteDmUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmUserListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmUser/findDmUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmUser/createDmUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleUserListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"createDmRoleUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"deleteDmRoleUserAction",function(){var e=(0,c.default)(o.default.mark((function e(t){var r;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,g.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,p.default)(this,"findDmRoleListAction",function(){var e=(0,c.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.Axios.post("/dmRole/findDmRoleList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())})),u=(0,m.default)(a.prototype,"privilegeDomainUsers",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,m.default)(a.prototype,"getDomainUser",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=t}}}),l=(0,m.default)(a.prototype,"deleteDomainUser",[v.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=e.privilegeDomainUsers.filter((function(e){return e.id!==t}))}}}),a);t.DomainUserStore=b;t.DOMAIN_USER_STORE="domainUserStore"},261:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.OrgStore=t.ORG_STORE=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,g,b=n(r(38)),y=n(r(117)),h=n(r(96)),O=n(r(83)),E=n(r(82)),w=n(r(52)),P=n(r(97)),j=(n(r(98)),r(2)),k=r(6);function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){(0,w.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var D=(a=(0,O.default)((function e(){(0,E.default)(this,e),(0,h.default)(this,"treeData",u,this),(0,h.default)(this,"selectData",i,this),(0,h.default)(this,"selectTreeOrgDetail",l,this),(0,h.default)(this,"addTree",o,this),(0,h.default)(this,"editTree",c,this),(0,h.default)(this,"findOpenUserDirListAction",f,this),(0,h.default)(this,"deleteOrgaAction",d,this),(0,h.default)(this,"findOrgaAction",s,this),(0,h.default)(this,"findOrgaTreeAction",p,this),(0,h.default)(this,"deleteUserOrgaAction",m,this),(0,h.default)(this,"findUserOrgaPageAction",v,this),(0,h.default)(this,"updateOrgaSortAction",g,this)})),u=(0,P.default)(a.prototype,"treeData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,P.default)(a.prototype,"selectData",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=(0,P.default)(a.prototype,"selectTreeOrgDetail",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectData=t}}}),o=(0,P.default)(a.prototype,"addTree",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.children?_(_({},e),{},{children:e.children.concat(t)}):_(_({},e),{},{children:[t]})}))}}}),c=(0,P.default)(a.prototype,"editTree",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.orgaId===t.orgaId?_(_({},e),t):(e.children=e.children.map((function(e){return e.orgaId===t.orgaId?_(_({},e),t):e})),e)}))}}}),f=(0,P.default)(a.prototype,"findOpenUserDirListAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,y.default)(b.default.mark((function e(){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.Axios.post("/user/userdir/findOpenList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),d=(0,P.default)(a.prototype,"deleteOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var n,a;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(n=new FormData).append("id",r),t.next=4,k.Axios.post("/user/orga/deleteOrga",n);case 4:return(a=t.sent).code||(e.treeData=e.treeData.filter((function(e){if(e.orgaId!==r)return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return e.orgaId!==r}))),e}))),t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),s=(0,P.default)(a.prototype,"findOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,k.Axios.post("/user/orga/findOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,P.default)(a.prototype,"findOrgaTreeAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,y.default)(b.default.mark((function t(r){var n;return b.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,k.Axios.post("/user/orga/findOrgaTree",r);case 2:return(n=t.sent).code||(e.treeData=n.data),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),m=(0,P.default)(a.prototype,"deleteUserOrgaAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,k.Axios.post("/user/userOrga/deleteUserOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,P.default)(a.prototype,"findUserOrgaPageAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){var r;return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.Axios.post("/user/userOrga/findUserOrgaPage",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,P.default)(a.prototype,"updateOrgaSortAction",[j.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,y.default)(b.default.mark((function e(t){return b.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.Axios.post("/user/orga/updateSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a);t.OrgStore=D;t.ORG_STORE="orgStore"},262:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.PRIVILEGE_DOMAIN_ROLE_STORE=t.DomainRoleStore=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,g,b,y,h=n(r(38)),O=n(r(117)),E=n(r(96)),w=n(r(83)),P=n(r(82)),j=(n(r(52)),n(r(97))),k=(n(r(98)),r(2)),S=r(6),_=(a=(0,w.default)((function e(){(0,P.default)(this,e),(0,E.default)(this,"privilegeDomainRole",u,this),(0,E.default)(this,"createDomainRoleAction",i,this),(0,E.default)(this,"deleteDomainRoleAction",l,this),(0,E.default)(this,"findDomainRoleListAction",o,this),(0,E.default)(this,"setDomainRoleAction",c,this),(0,E.default)(this,"findDmUserPageAction",f,this),(0,E.default)(this,"createDmRoleUserAction",d,this),(0,E.default)(this,"createBatchDmRoleUserAction",s,this),(0,E.default)(this,"updateDmRoleUserAction",p,this),(0,E.default)(this,"deleteDmRoleUserAction",m,this),(0,E.default)(this,"findDmRoleUserAction",v,this),(0,E.default)(this,"findDmRoleUserListAction",g,this),(0,E.default)(this,"getAllUserDirAction",b,this),(0,E.default)(this,"findAllUserGroupAction",y,this)})),u=(0,j.default)(a.prototype,"privilegeDomainRole",[k.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,j.default)(a.prototype,"createDomainRoleAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRole/createDmRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),l=(0,j.default)(a.prototype,"deleteDomainRoleAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){var r;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,S.Axios.post("/dmRole/deleteDmRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),o=(0,j.default)(a.prototype,"findDomainRoleListAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,O.default)(h.default.mark((function t(r){var n;return h.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.Axios.post("/dmRole/findDmRoleList",r);case 2:return(n=t.sent).code||(e.privilegeDomainRole=n.data),t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),c=(0,j.default)(a.prototype,"setDomainRoleAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRole/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),f=(0,j.default)(a.prototype,"findDmUserPageAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmUser/findDmUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),d=(0,j.default)(a.prototype,"createDmRoleUserAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,j.default)(a.prototype,"createBatchDmRoleUserAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRoleUser/createBatchDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,j.default)(a.prototype,"updateDmRoleUserAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRoleUser/updateDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),m=(0,j.default)(a.prototype,"deleteDmRoleUserAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){var r;return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,S.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),v=(0,j.default)(a.prototype,"findDmRoleUserAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRoleUser/findDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,j.default)(a.prototype,"findDmRoleUserListAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,O.default)(h.default.mark((function e(t){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,j.default)(a.prototype,"getAllUserDirAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,O.default)(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/user/userdir/findAllList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),y=(0,j.default)(a.prototype,"findAllUserGroupAction",[k.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,O.default)(h.default.mark((function e(){return h.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),a);t.DomainRoleStore=_;t.PRIVILEGE_DOMAIN_ROLE_STORE="privilegeDomainRoleStore"},263:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectFeatureStore=t.PRIVILEGE_PROJECT_FEATURE_STORE=void 0;var a,u,i,l,o,c,f,d=n(r(186)),s=n(r(96)),p=n(r(83)),m=n(r(82)),v=n(r(52)),g=n(r(97)),b=(n(r(98)),r(2));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=(a=(0,p.default)((function e(){(0,m.default)(this,e),(0,s.default)(this,"privilegeProjectTreeData",u,this),(0,s.default)(this,"getDmPrivilegeTree",i,this),(0,s.default)(this,"addDmFeature",l,this),(0,s.default)(this,"addDmChildrenFeature",o,this),(0,s.default)(this,"deleteDmFeature",c,this),(0,s.default)(this,"editDmFeature",f,this)})),u=(0,g.default)(a.prototype,"privilegeProjectTreeData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,g.default)(a.prototype,"getDmPrivilegeTree",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData=t}}}),l=(0,g.default)(a.prototype,"addDmFeature",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData.push(t)}}}),o=(0,g.default)(a.prototype,"addDmChildrenFeature",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeProjectTreeData=e.privilegeProjectTreeData.map((function(e){return e.id===r?h(h({},e),{},{children:[t].concat((0,d.default)(e.children))}):e}))}}}),c=(0,g.default)(a.prototype,"deleteDmFeature",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(h(h({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),f=(0,g.default)(a.prototype,"editDmFeature",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(h(h(h({},r),t),{},{children:[]})):n.push(h(h({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),a);t.ProjectFeatureStore=O;t.PRIVILEGE_PROJECT_FEATURE_STORE="privilegeProjectFeatureStore"},264:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemRoleStore=t.SYSTEM_ROLE_STORE=void 0;var a,u,i,l,o,c,f,d,s,p,m,v,g,b,y,h,O,E,w,P,j,k=n(r(38)),S=n(r(117)),_=n(r(96)),D=n(r(83)),R=n(r(82)),x=(n(r(52)),n(r(97))),I=(n(r(98)),r(2)),A=r(6),U=(a=(0,D.default)((function e(){(0,R.default)(this,e),(0,_.default)(this,"privilegeSystemRole",u,this),(0,_.default)(this,"systemPermissions",i,this),(0,_.default)(this,"domainPermissions",l,this),(0,_.default)(this,"clearAllPermissions",o,this),(0,_.default)(this,"getInitProjectPermissions",c,this),(0,_.default)(this,"getSystemPermissions",f,this),(0,_.default)(this,"getAllUserAction",d,this),(0,_.default)(this,"getUserPageAction",s,this),(0,_.default)(this,"getAllUserDirAction",p,this),(0,_.default)(this,"findRoleListAction",m,this),(0,_.default)(this,"setDefaultRoleAction",v,this),(0,_.default)(this,"deleteRoleAction",g,this),(0,_.default)(this,"deleteRoleUserAction",b,this),(0,_.default)(this,"findAllUserGroupAction",y,this),(0,_.default)(this,"findRoleUserListAction",h,this),(0,_.default)(this,"createRoleUserAction",O,this),(0,_.default)(this,"createBatchRoleUserAction",E,this),(0,_.default)(this,"createBatchRoleUserGroupAction",w,this),(0,_.default)(this,"findRoleUserGroupListAction",P,this),(0,_.default)(this,"deleteRoleUserGroupAction",j,this)})),u=(0,x.default)(a.prototype,"privilegeSystemRole",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,x.default)(a.prototype,"systemPermissions",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=(0,x.default)(a.prototype,"domainPermissions",[I.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),o=(0,x.default)(a.prototype,"clearAllPermissions",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.systemPermissions=[],e.domainPermissions={}}}}),c=(0,x.default)(a.prototype,"getInitProjectPermissions",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t&&r){var a={userId:t,domainId:r,globalPublic:n},u={};return(0,A.getUser)()&&(0,A.getUser)().tenant&&(u={tenant:(0,A.getUser)().tenant}),A.Axios.post("/permission/findDomainPermissions",a,u).then((function(n){return n.code||(e.domainPermissions["".concat(t,"_").concat(r)]=n.data),n}))}}}}),f=(0,x.default)(a.prototype,"getSystemPermissions",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=new FormData;r.append("userId",t);var n={};return(0,A.getUser)()&&(0,A.getUser)().tenant&&(n={tenant:(0,A.getUser)().tenant}),A.Axios.post("/permission/findPermissions",r,n).then((function(t){return t.code||(e.systemPermissions=t.data),t}))}}}),d=(0,x.default)(a.prototype,"getAllUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,S.default)(k.default.mark((function e(){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/findAllUser");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),s=(0,x.default)(a.prototype,"getUserPageAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/user/findUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),p=(0,x.default)(a.prototype,"getAllUserDirAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,S.default)(k.default.mark((function e(){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/user/userdir/findAllList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),m=(0,x.default)(a.prototype,"findRoleListAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,S.default)(k.default.mark((function t(r){var n;return k.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A.Axios.post("/role/findRoleList",r);case 2:(n=t.sent).code||(e.privilegeSystemRole=n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),v=(0,x.default)(a.prototype,"setDefaultRoleAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/role/setdefaultRole",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),g=(0,x.default)(a.prototype,"deleteRoleAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){var r;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,A.Axios.post("/role/deleteRole",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),b=(0,x.default)(a.prototype,"deleteRoleUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){var r;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,A.Axios.post("/roleUser/deleteRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),y=(0,x.default)(a.prototype,"findAllUserGroupAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,S.default)(k.default.mark((function e(){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))}}),h=(0,x.default)(a.prototype,"findRoleUserListAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUser/findRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),O=(0,x.default)(a.prototype,"createRoleUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t,r){var n;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("roleId",t),n.append("userId",r),e.next=5,A.Axios.post("/roleUser/pathRoleWithUser",n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()}}),E=(0,x.default)(a.prototype,"createBatchRoleUserAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUser/createBatchRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),w=(0,x.default)(a.prototype,"createBatchRoleUserGroupAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUserGroup/createBatchRoleUserGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),P=(0,x.default)(a.prototype,"findRoleUserGroupListAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.Axios.post("/roleUserGroup/findRoleUserGroupList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),j=(0,x.default)(a.prototype,"deleteRoleUserGroupAction",[I.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,S.default)(k.default.mark((function e(t){var r;return k.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,A.Axios.post("/roleUserGroup/deleteRoleUserGroup",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a);t.SystemRoleStore=U;t.SYSTEM_ROLE_STORE="systemRoleStore"},265:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.ProjectRoleStore=t.PRIVILEGE_PROJECT_ROLE_STORE=void 0;var a,u,i,l=n(r(96)),o=n(r(83)),c=n(r(82)),f=(n(r(52)),n(r(97))),d=(n(r(98)),r(2)),s=(a=(0,o.default)((function e(){(0,c.default)(this,e),(0,l.default)(this,"privilegeProjectRole",u,this),(0,l.default)(this,"getProjectRoles",i,this)})),u=(0,f.default)(a.prototype,"privilegeProjectRole",[d.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,f.default)(a.prototype,"getProjectRoles",[d.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectRole=t}}}),a);t.ProjectRoleStore=s;t.PRIVILEGE_PROJECT_ROLE_STORE="privilegeProjectRoleStore"},266:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.SystemFeatureStore=t.PRIVILEGE_SYSTEM_STORE=void 0;var a,u,i,l,o,c,f,d,s,p=n(r(38)),m=n(r(117)),v=n(r(186)),g=n(r(96)),b=n(r(83)),y=n(r(82)),h=n(r(52)),O=n(r(97)),E=(n(r(98)),r(2)),w=r(6),P=r(173);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=(a=(0,b.default)((function e(){(0,y.default)(this,e),(0,g.default)(this,"privilegeSystemTreeData",u,this),(0,g.default)(this,"addFeature",i,this),(0,g.default)(this,"addChildrenFeature",l,this),(0,g.default)(this,"deleteFeature",o,this),(0,g.default)(this,"editFeature",c,this),(0,g.default)(this,"getFunctionListListAction",f,this),(0,g.default)(this,"updateFunctionSortAction",d,this),(0,g.default)(this,"deleteFunctionAction",s,this)})),u=(0,O.default)(a.prototype,"privilegeSystemTreeData",[E.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,O.default)(a.prototype,"addFeature",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemTreeData.push(t)}}}),l=(0,O.default)(a.prototype,"addChildrenFeature",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeSystemTreeData=e.privilegeSystemTreeData.map((function(e){return e.id===r?k(k({},e),{},{children:[t].concat((0,v.default)(e.children))}):e}))}}}),o=(0,O.default)(a.prototype,"deleteFeature",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(k(k({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),c=(0,O.default)(a.prototype,"editFeature",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(k(k(k({},r),t),{},{children:[]})):n.push(k(k({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),f=(0,O.default)(a.prototype,"getFunctionListListAction",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=(0,m.default)(p.default.mark((function t(r){var n,a;return p.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.Axios.post("/function/findFunctionList",r);case 2:return(n=t.sent).code||(a=(0,P.handlerFeaterNode)(n.data),e.privilegeSystemTreeData=a),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}),d=(0,O.default)(a.prototype,"updateFunctionSortAction",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.Axios.post("/function/updateFunctionSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),s=(0,O.default)(a.prototype,"deleteFunctionAction",[E.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return function(){var e=(0,m.default)(p.default.mark((function e(t){var r;return p.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,w.Axios.post("/function/deleteFunction",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}),a);t.SystemFeatureStore=S;t.PRIVILEGE_SYSTEM_STORE="privilegeSystemStore"},444:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"OrgaName",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TitleAction",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"UserName",{enumerable:!0,get:function(){return o.default}});var a=n(r(742)),u=n(r(744)),i=n(r(746)),l=n(r(748)),o=n(r(750)),c=n(r(751))},458:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Directory",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DomainRole",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"DomainUser",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"MenuAction",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"MenuList",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"NotFound",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"Orga",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"PrivilegeButton",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"PrivilegeProjectButton",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"ProjectFeature",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"ProjectNav",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"ProjectRole",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"SystemFeature",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"SystemNav",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"SystemRole",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"User",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"UserGroup",{enumerable:!0,get:function(){return o.default}});var a=n(r(740)),u=n(r(757)),i=n(r(761)),l=n(r(771)),o=n(r(775)),c=n(r(781)),f=n(r(491)),d=n(r(597)),s=n(r(788)),p=n(r(794)),m=n(r(799)),v=n(r(804)),g=n(r(807)),b=n(r(811)),y=n(r(813)),h=n(r(816)),O=n(r(819))},491:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(764)).default;t.default=a},545:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(81);var a=n(r(31)),u=n(r(0)),i=r(6);r(752);var l=function(e){var t=e.link,r=e.module,n=(0,i.getUser)(),l=n.ticket?"".concat(t,"?").concat((0,i.parseUserSearchParams)(n)):t;return u.default.createElement("div",{className:"tiklab_mask"},u.default.createElement("p",null,"当前为统一登录模式"),u.default.createElement(a.default,{type:"link",target:"_blank",href:l},"请前往EAS进行",r,"相关操作。"))};t.default=l},591:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38)),i=n(r(117)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),o=r(34),c=r(170);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,o.inject)(c.USER_STORE)((0,o.observer)((function(e){var t=e.userStore,r=e.type,n=e.openid,a=t.qywxconfig,o=t.agentConfig,c=(0,l.useRef)(null);(0,l.useLayoutEffect)((function(){})),(0,l.useEffect)((0,i.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=4;break}return wx.checkJsApi({jsApiList:["chooseImage"],success:function(e){}}),e.next=4,f(a);case 4:if(!o){e.next=7;break}return e.next=7,d(o);case 7:case"end":return e.stop()}}),e)}))),[a,o]);var f=function(e){wx.config({beta:!0,debug:!1,appId:e.corpId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["selectEnterpriseContact","openUserProfile"],success:function(e){},fail:function(e){e.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")}})},d=function(e){wx.agentConfig({corpid:e.corpId,agentid:parseInt(e.agentid),timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["selectExternalContact","selectEnterpriseContact"],success:function(e){WWOpenData.bind(document.querySelector("ww-open-data"))},fail:function(e){e.errMsg.indexOf("function not exist")>-1&&alert("版本过低请升级")}})};return l.default.createElement("ww-open-data",{ref:c,type:r,openid:n})})));t.default=d},594:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(451));r(51);var i=n(r(19));r(80);var l=n(r(35));r(49);var o=n(r(21));r(314);var c=n(r(252));r(81);var f=n(r(31)),d=n(r(318));r(168);var s=n(r(33)),p=n(r(312));r(316);var m=n(r(142)),v=n(r(313));r(46);var g=n(r(23));r(253);var b=n(r(133)),y=n(r(129)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),O=r(34),E=r(47),w=n(r(595)),P=r(444),j=r(170);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}var S=(0,O.inject)(j.PRIVILEGE_DOMAIN_ROLE_STORE)((0,O.observer)((function(e){var t=e.dmRoleDetail,r=e.domainId,n=e.bgroup,a=e.privilegeDomainRoleStore,O=a.deleteDmRoleUserAction,j=a.findDmRoleUserListAction,k=a.getAllUserDirAction,S=(a.findAllUserGroupAction,(0,E.useTranslation)().t,(0,h.useState)([])),_=(0,y.default)(S,2),D=_[0],R=_[1],x=(0,h.useState)(!1),I=(0,y.default)(x,2),A=I[0],U=I[1],M=(0,h.useState)([]),T=(0,y.default)(M,2),C=T[0],z=T[1],F=(0,h.useState)(!1),L=(0,y.default)(F,2),N=(L[0],L[1]),W=(0,h.useState)([]),G=(0,y.default)(W,2),B=(G[0],G[1],(0,h.useState)([])),K=(0,y.default)(B,2),V=K[0],J=K[1],q=[{title:"名称",dataIndex:"name",render:function(e,t){var r=t.user;return h.default.createElement(g.default,null,r.nickname,1===r.type&&h.default.createElement(b.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var r=t.user;return Q(r.type,t)}}];(0,h.useEffect)((function(){Y()}),[]);var Y=function(){k().then((function(e){e.code||J(e.data)}))};(0,h.useEffect)((function(){t&&H({dmRoleId:t.id})}),[t]);var H=function(e){j(e).then((function(e){if(!e.code){R(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));z(t)}}))},$=function(e){O(e).then((function(e){e.code||H({dmRoleId:t.id})}))},Z=h.default.createElement(m.default,{onClick:function(e){"1"===e.key?U(!0):N(!0)}},h.default.createElement(m.default.Item,{key:"1"},h.default.createElement(v.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),"新增用户")),Q=function(e,r){var n=t.businessType,a=[];return 0===n&&a.push(h.default.createElement(s.default,{title:"删除"},h.default.createElement(p.default,{onClick:function(){return $(r.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),n>0&&e<1&&a.push(h.default.createElement(s.default,{title:"删除"},h.default.createElement(p.default,{onClick:function(){return $(r.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a};return h.default.createElement("div",{className:"tiklab_promisse"},h.default.createElement(o.default,{justify:"space-between"},h.default.createElement(P.TitleAction,{title:"用户(".concat(D.length,")")}),h.default.createElement(c.default,{overlay:Z},h.default.createElement(f.default,{type:"primary"},h.default.createElement(g.default,null,"新增",h.default.createElement(d.default,null))))),h.default.createElement(o.default,null,h.default.createElement(i.default,{span:24,className:"tiklab_dm_promisse_person"},h.default.createElement(l.default,{columns:q,dataSource:D,rowKey:function(e){return e.id},pagination:!1}))),h.default.createElement(w.default,(0,u.default)({},e,{visible:A,onCancel:function(){return U(!1),void H({dmRoleId:t.id})},dmRoleId:t.id,addSelectedRowKeys:C,domainId:r,userDir:V,bgroup:n})))})));t.default=S},595:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35));r(49);var i=n(r(21));r(51);var l=n(r(19));r(79);var o=n(r(26));r(46);var c=n(r(23)),f=n(r(52)),d=n(r(129)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=v(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),p=r(47),m=r(444);function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(v=function(e){return e?r:t})(e)}function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var y=function(e){var t=(0,p.useTranslation)().t,r=e.visible,n=e.onCancel,a=e.dmRoleId,f=void 0===a?"":a,v=e.addSelectedRowKeys,g=e.domainId,y=(e.bgroup,e.privilegeDomainRoleStore),h=y.createBatchDmRoleUserAction,O=y.findDmUserPageAction,E=(0,s.useState)([]),w=(0,d.default)(E,2),P=w[0],j=w[1],k=(0,s.useState)([]),S=(0,d.default)(k,2),_=S[0],D=S[1],R=(0,s.useState)(10),x=(0,d.default)(R,1)[0],I=(0,s.useState)(1),A=(0,d.default)(I,2),U=A[0],M=A[1],T=(0,s.useState)(0),C=(0,d.default)(T,2),z=C[0],F=C[1],L={domainId:g,pageParam:{pageSize:x,currentPage:U}},N=(0,s.useState)(L),W=(0,d.default)(N,2),G=W[0],B=W[1];(0,s.useEffect)((function(){K(G)}),[G]),(0,s.useEffect)((function(){j(v)}),[v]);var K=function(e){O(e).then((function(e){e.code||(F(e.data.totalRecord),D(e.data.dataList.map((function(e){return e.user}))))}))},V=function(){B(b(b({},L),{},{pageParam:{pageSize:x,currentPage:1}})),j([]),M(1),F(0),n()},J=[{title:t("privilege-role.name"),dataIndex:"nickname",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(m.Profile,{userInfo:t}),e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){switch(e){case 2:return t("privilege-role.thirdparty");case 1:return t("privilege-role.internal");default:return"--"}}}],q={selectedRowKeys:P,onChange:function(e){j(e)}};return s.default.createElement(m.BaseModal,{title:t("privilege-select-user"),visible:r,onOk:function(){h({dmRole:{id:f},domainId:g,userIds:P}).then((function(e){V()}))},onCancel:V,width:1200,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement(i.default,{style:{paddingBottom:16}},s.default.createElement(l.default,{span:24},s.default.createElement(o.default,{placeholder:t("privilege-user"),onPressEnter:function(e){var t=e.target.value,r=b(b({},G),{},{name:t,pageParam:{pageSize:x,currentPage:1}});B(r)},style:{width:240}}))),s.default.createElement(i.default,null,s.default.createElement(l.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(u.default,{columns:J,dataSource:_,rowSelection:q,rowKey:function(e){return e.id},pagination:{current:U,pageSize:x,total:z,onChange:function(e){M(e);var t=b(b({},G),{},{pageParam:{pageSize:x,currentPage:e}});B(t)}}})))))};t.default=y},596:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35)),i=n(r(52)),l=n(r(186)),o=n(r(129));r(255);var c=n(r(68)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(6);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,r=e.bgroup,n=(0,f.useState)([]),a=(0,o.default)(n,2),i=a[0],s=a[1],p=(0,f.useState)({}),g=(0,o.default)(p,2),b=g[0],y=g[1],h=(0,f.useState)({}),O=(0,o.default)(h,2),E=O[0],w=O[1],P=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return I(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:b[e.value],value:e.checkedList,onChange:function(t){return D(e.value,t)}})}}];(0,f.useEffect)((function(){t&&j()}),[t]);var j=function(){d.Axios.post("/function/findFunctionList",{bgroup:r,type:"2"}).then((function(e){if(!e.code){var r=k(e.data);s(r.result),y(r.resultChild),_(t.role.id,!0,r.result,r.resultChild)}}))},k=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,u=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=u})),{result:n,resultChild:a}},S=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat((0,l.default)(r),[e])})),n},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u={roleId:e,bgroup:r};d.Axios.post("roleFunction/findRoleFunctionList",u).then((function(e){if(!e.code){var r=S(e.data),u=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),l=t?a:b,o=(t?n:i).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===l[e.value].length,a=t.length===l[e.value].length+1&&0!==t.length,u=a?!a:!!t.length&&t.length<l[e.value].length+1;return n&&1===t.length&&(a=!0,u=!1),m(m({},e),{},{checkedList:t,indeterminate:u,checkAll:a})}));w(u),s(o)}}))},D=function(e,t){R(e,t)},R=function(e,t){var r=t,n=i.filter((function(t){return t.value===e}))[0].checkedList,a=r.length<n.length,u=a?x(n,r):x(r,n);if(a)if(n.length>2){var o=u.filter((function(t){return t!==e}));o.map((function(e,t){U(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat((0,l.default)(u)):u));c.map((function(e,t){U(e,t+1===c.length)}))}else{var f=0===n.length?[e].concat((0,l.default)(u)):u;f.map((function(e,t){A(e,t+1===f.length)}))}},x=function(e,t){for(var r=[],n=function(){var n=e[a];t.some((function(e){return e===n}))&&0!==t.length||r.push(n)},a=0;a<e.length;a++)n();return r},I=function(e,t){var r=Object.keys(E),n=r.includes(e),a=r.filter((function(t){return b[e].some((function(e){return e.value===t}))})),u=b[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),i=(!n||0!==b[e].length)&&b[e].length===u.length;if(n||(i=!0,u=b[e]),i)r.includes(e)||(u=[].concat((0,l.default)(u),[{value:e}])),u.length>0?u.map((function(e,t){A(e.value,t+1===u.length)})):A(e,!0);else{if(r.includes(e)){var o=a.map((function(e){return{value:e}}));u=[].concat((0,l.default)(o),[{value:e}])}u.length>0?u.map((function(e,t){U(e.value,t+1===u.length)})):U(e,!0)}},A=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.role.id},function:{id:e},bgroup:r};d.Axios.post("roleFunction/createRoleFunction",a).then((function(e){n&&_(t.role.id)}))},U=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=E[e],a=new FormData;a.append("id",n),d.Axios.post("/roleFunction/deleteRoleFunction",a).then((function(e){r&&_(t.role.id)}))};return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"tiklab_dm_promisse"},f.default.createElement(u.default,{pagination:!1,columns:P,dataSource:i,rowKey:function(e){return e.value},bordered:!0})))};t.default=g},597:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(787)).default;t.default=a},599:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(647);var u=n(r(593));r(79);var i=n(r(26));r(116);var l=n(r(20)),o=n(r(129)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(47),d=r(6),s=r(444);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}var m=function(e){var t=e.visible,r=e.cancelAdd,n=e.editData,a=void 0===n?{}:n,p=e.parentId,m=void 0===p?"":p,v=e.urlType,g=void 0===v?"system":v,b=e.data,y=void 0===b?[]:b,h=l.default.useForm(),O=(0,o.default)(h,1)[0],E=(0,f.useTranslation)().t,w=(0,c.useState)([]),P=(0,o.default)(w,2),j=(P[0],P[1]);(0,c.useEffect)((function(){t&&k()}),[t]),(0,c.useEffect)((function(){"{}"!==JSON.stringify(a)&&(O.setFieldsValue({code:a.code}),O.setFieldsValue({name:a.name}),O.setFieldsValue({parent:a.parentFunction?a.parentFunction.id:a.parentFunction})),m&&O.setFieldsValue({parent:m})}),[a,m]);var k=function(){var e=new FormData;e.append("type","system"===g?"1":"2"),d.Axios.post("/function/findFunctionListByParentId",e).then((function(e){e.code||j(e.data)}))},S=function(){O.resetFields(),r()};return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(a)?E("privilege-edit-feature"):E("privilege-add-feature"),visible:t,onOk:function(){O.submit()},onCancel:S,forceRender:!0,destroyOnClose:!0,cancelText:E("privilege-common.cancel"),okText:E("privilege-common.save")},c.default.createElement(l.default,{form:O,onFinish:function(e){if("{}"===JSON.stringify(a)){var t={name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===g?"1":"2"};d.Axios.post("/function/createFunction",t).then((function(e){e.code||S()}))}else{var r={id:a.id,name:e.name,code:e.code,parentFunction:{id:e.parent},type:"system"===g?"1":"2"};d.Axios.post("/function/updateFunction",r).then((function(e){e.code||S()}))}},preserve:!1,layout:"vertical"},c.default.createElement(l.default.Item,{label:E("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(i.default,{placeholder:E("privilege-feature-name")})),c.default.createElement(l.default.Item,{label:E("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(i.default,{placeholder:E("privilege-feature-code")})),c.default.createElement(l.default.Item,{label:E("privilege-point-node"),name:"parent"},c.default.createElement(u.default,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:function(){var e=[];return function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={title:t.name,value:t.id,disabled:n};if(t.id===a.id&&(u.disabled=!0),r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}))}(y,e),e}(),placeholder:E("privilege-point-node-placeholder"),disabled:m||a.children&&a.children.length>0}))))};t.default=m},600:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(451)),i=n(r(129)),l=n(r(52)),o=n(r(187)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(553),d=["record","data","index","moveRow","className","style"];function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,l.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v="DraggableFeatureBodyRow",g=function(e){var t=e.record,r=(e.data,e.index),n=e.moveRow,a=e.className,l=e.style,s=(0,o.default)(e,d);if(!t)return null;var p=m(m({},t),{},{index:r}),g=(0,c.useRef)(null),b=(0,f.useDrop)({accept:v,collect:function(e){var t=e.getItem()||{},n=t.index;t.sort;return n===r?{}:{isOver:e.isOver(),dropClassName:n<r?" drop-over-downward":" drop-over-upward"}},drop:function(e){var r={dragId:e.id,drag:e,dropId:t.id,drop:m({},t)};n(r)}}),y=(0,i.default)(b,2),h=y[0],O=h.isOver,E=h.dropClassName,w=y[1],P=(0,f.useDrag)({type:v,item:p,collect:function(e){return{isDragging:e.isDragging()}}});return w((0,(0,i.default)(P,2)[1])(g)),c.default.createElement("tr",(0,u.default)({ref:g,className:"".concat(a).concat(O?E:""),style:m({cursor:"move"},l)},s))};t.default=g},601:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.sortNum=t.sort=t.handelPeerFunction=void 0;var a=n(r(52));function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.handelPeerFunction=function(e,t,r,n,a){var u=e.map((function(e){return e.id===t?i(i({},e),{},{sort:a}):e.id===r?i(i({},e),{},{sort:n}):e}));return l(u)};var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e.sort-t.sort}))};t.sort=l;t.sortNum=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.sort((function(e,t){return e-t}))}},602:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(79);var u=n(r(26)),i=n(r(52));r(116);var l=n(r(20)),o=n(r(129)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(47),d=r(6),s=r(444);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var g=function(e){var t=(0,f.useTranslation)().t,r=e.visible,n=e.cancel,a=e.editData,i=void 0===a?{}:a,p=e.group,m=void 0===p?"system":p,g=e.urlType,b=void 0===g?"system":g;if(!["system","project"].includes(b))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var y=l.default.useForm(),h=(0,o.default)(y,1)[0];(0,c.useEffect)((function(){h.setFieldsValue({desc:i.desc}),h.setFieldsValue({name:i.name})}),[i]);var O=function(){h.resetFields(),n()};return c.default.createElement(s.BaseModal,{title:"{}"!==JSON.stringify(i)?t("privilege-role.editRole"):t("privilege-role.addRole"),visible:r,onOk:function(){h.submit()},onCancel:O,forceRender:!0,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},c.default.createElement(l.default,{form:h,preserve:!1,onFinish:function(e){var t="/role/createRole",r=v(v({},e),{},{group:m,type:"system"===b?"1":"2"});"{}"!==JSON.stringify(i)&&(t="/role/updateRole",r=v(v({},e),{},{group:m,id:i.id,type:"system"===b?"1":"2"})),d.Axios.post(t,r).then((function(e){e.code||O()}))},layout:"vertical"},c.default.createElement(l.default.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.default.createElement(u.default,{placeholder:t("privilege-role.roleName")})),c.default.createElement(l.default.Item,{label:t("privilege-desc"),name:"desc"},c.default.createElement(u.default,{placeholder:t("privilege-desc")}))))};t.default=g},603:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(451));r(51);var i=n(r(19));r(80);var l=n(r(35)),o=n(r(186));r(49);var c=n(r(21));r(314);var f=n(r(252));r(81);var d=n(r(31)),s=n(r(318));r(168);var p=n(r(33)),m=n(r(312));r(316);var v=n(r(142)),g=n(r(313));r(46);var b=n(r(23));r(253);var y=n(r(133)),h=n(r(129)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),E=r(34),w=r(47),P=n(r(604)),j=n(r(605)),k=r(444),S=r(170);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}var D=(0,E.inject)(S.SYSTEM_ROLE_STORE)((0,E.observer)((function(e){var t=e.roleDetail,r=e.systemRoleStore,n=r.deleteRoleUserGroupAction,a=r.deleteRoleUserAction,E=r.findAllUserGroupAction,S=r.findRoleUserGroupListAction,_=r.findRoleUserListAction,D=r.getAllUserDirAction,R=((0,w.useTranslation)().t,(0,O.useState)([])),x=(0,h.default)(R,2),I=x[0],A=x[1],U=(0,O.useState)(!1),M=(0,h.default)(U,2),T=M[0],C=M[1],z=(0,O.useState)([]),F=(0,h.default)(z,2),L=F[0],N=F[1],W=(0,O.useState)(!1),G=(0,h.default)(W,2),B=G[0],K=G[1],V=(0,O.useState)([]),J=(0,h.default)(V,2),q=J[0],Y=J[1],H=(0,O.useState)([]),$=(0,h.default)(H,2),Z=$[0],Q=$[1],X=(0,O.useState)([]),ee=(0,h.default)(X,2),te=ee[0],re=ee[1],ne=[{title:"名称",dataIndex:"name",render:function(e,t){var r=t.user,n=t.userGroup;return n?O.default.createElement(b.default,null,n.name,n.type>0&&O.default.createElement(y.default,null,"管理员组")):O.default.createElement(b.default,null,r.nickname,1===r.type&&O.default.createElement(y.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return t.userGroup?"用户组":"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var r=t.user,n=t.userGroup;return se(n?n.type:r.type,t)}}];(0,O.useEffect)((function(){ae(),fe()}),[]),(0,O.useEffect)((function(){t&&(ue({roleId:t.id}),ie({roleId:t.id}))}),[t]);var ae=function(){D().then((function(e){e.code||Q(e.data)}))},ue=function(e){_(e).then((function(e){if(!e.code){A(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));N(t)}}))},ie=function(e){S(e).then((function(e){e.code||re(e.data)}))},le=function(e){e.user&&oe(e.id),e.userGroup&&ce(e.id)},oe=function(e){a(e).then((function(e){e.code||ue({roleId:t.id})}))},ce=function(e){n(e).then((function(e){e.code||ie({roleId:t.id})}))},fe=function(){E().then((function(e){0===e.code&&Y(e.data)}))},de=O.default.createElement(v.default,{onClick:function(e){"1"===e.key?C(!0):K(!0)}},O.default.createElement(v.default.Item,{key:"1"},O.default.createElement(g.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),"新增用户"),O.default.createElement(v.default.Item,{key:"2"},O.default.createElement(g.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),"新增用户组")),se=function(e,r){var n=t.businessType,a=[];return 0===n&&a.push(O.default.createElement(p.default,{title:"删除"},O.default.createElement(m.default,{onClick:function(){return le(r)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),n>0&&e<1&&a.push(O.default.createElement(p.default,{title:"删除"},O.default.createElement(m.default,{onClick:function(){return le(r)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a};return O.default.createElement("div",{className:"tiklab_projectpromisse"},O.default.createElement(c.default,{justify:"space-between"},O.default.createElement(k.TitleAction,{title:"用户(".concat(I.length,")/用户组(").concat(te.length,")")}),O.default.createElement(f.default,{overlay:de},O.default.createElement(d.default,{type:"primary"},O.default.createElement(b.default,null,"新增",O.default.createElement(s.default,null))))),O.default.createElement(c.default,null,O.default.createElement(i.default,{span:24,className:"tiklab_projectpromisse_person"},O.default.createElement(l.default,{columns:ne,dataSource:[].concat((0,o.default)(te),(0,o.default)(I)),rowKey:function(e){return e.id},pagination:!1}))),O.default.createElement(P.default,(0,u.default)({},e,{visible:T,onCancel:function(){return C(!1),ue({roleId:t.id}),void ie({roleId:t.id})},roleId:t.id,addSelectedRowKeys:L,userDir:Z})),O.default.createElement(j.default,{roleId:t.id,onClose:function(){K(!1),ue({roleId:t.id}),ie({roleId:t.id})},groupUserList:q,open:B}))})));t.default=D},604:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(51);var u=n(r(19));r(80);var i=n(r(35));r(49);var l=n(r(21));r(79);var o=n(r(26));r(46);var c=n(r(23)),f=n(r(52)),d=n(r(129)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),p=r(34),m=r(47),v=r(444),g=r(170);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=(0,p.inject)(g.SYSTEM_ROLE_STORE)((0,p.observer)((function(e){var t=(0,m.useTranslation)().t,r=e.visible,n=e.onCancel,a=e.roleId,f=void 0===a?"":a,p=e.addSelectedRowKeys,g=e.systemRoleStore,b=g.createBatchRoleUserAction,y=g.getUserPageAction,O=(0,s.useState)([]),E=(0,d.default)(O,2),w=E[0],P=E[1],j=(0,s.useState)([]),k=(0,d.default)(j,2),S=k[0],_=k[1],D=(0,s.useState)(10),R=(0,d.default)(D,1)[0],x=(0,s.useState)(1),I=(0,d.default)(x,2),A=I[0],U=I[1],M=(0,s.useState)(0),T=(0,d.default)(M,2),C=T[0],z=T[1],F={pageParam:{pageSize:R,currentPage:A}},L=(0,s.useState)(F),N=(0,d.default)(L,2),W=N[0],G=N[1];(0,s.useEffect)((function(){B(W)}),[W]),(0,s.useEffect)((function(){P(p)}),[p]);var B=function(e){y(e).then((function(e){e.code||(z(e.data.totalRecord),_(e.data.dataList))}))},K=function(){G({pageParam:{pageSize:R,currentPage:1}}),P([]),U(1),z(0),n()},V=[{title:t("privilege-role.name"),dataIndex:"nickname",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(v.Profile,{userInfo:t})," ",e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("privilege-role.orga"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){switch(e){case 2:return t("privilege-role.thirdparty");case 1:return t("privilege-role.internal");default:return"--"}}}],J={selectedRowKeys:w,onChange:function(e){P(e)}};return s.default.createElement(v.BaseModal,{title:t("privilege-select-userList"),visible:r,onOk:function(){b({role:{id:f},userIds:w}).then((function(e){K()}))},onCancel:K,width:1200,destroyOnClose:!0,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement(l.default,null,s.default.createElement(o.default,{placeholder:t("privilege-userList"),onPressEnter:function(e){var t=e.target.value,r=h(h({},W),{},{name:t,pageParam:{pageSize:R,currentPage:1}});G(r)},style:{width:240}})),s.default.createElement(l.default,null,s.default.createElement(u.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(i.default,{columns:V,dataSource:S,rowSelection:J,rowKey:function(e){return e.id},pagination:{current:A,pageSize:R,total:C,onChange:function(e){U(e);var t=h(h({},W),{},{pageParam:{pageSize:R,currentPage:e}});G(t)}}})))))})));t.default=O},605:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(127);var u=n(r(36)),i=n(r(52));r(116);var l=n(r(20)),o=n(r(129)),c=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=m(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),f=r(47),d=r(34),s=r(444),p=r(170);function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(m=function(e){return e?r:t})(e)}function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var g=(0,d.inject)(p.SYSTEM_ROLE_STORE)((0,d.observer)((function(e){var t=e.open,r=e.onClose,n=e.roleId,a=e.groupUserList,d=void 0===a?[]:a,p=e.systemRoleStore,m=p.createBatchRoleUserGroupAction,g=p.findRoleUserGroupListAction,b=l.default.useForm(),y=(0,o.default)(b,1)[0],h=(0,f.useTranslation)().t;(0,c.useEffect)((function(){n&&g({roleId:n}).then((function(e){if(0===e.code){var t=e.data.map((function(e){return e.userGroup.id}));y.setFieldsValue({tagValues:t})}}))}),[n]);var O=function(){y.resetFields(),r()};return c.default.createElement(s.BaseModal,{title:"用户组关联角色",visible:t,onOk:function(){y.submit()},onCancel:O,forceRender:!0,destroyOnClose:!0,cancelText:h("privilege-common.cancel"),okText:h("privilege-common.save")},c.default.createElement(l.default,{form:y,preserve:!1,onFinish:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({role:{id:n}},e);m(t).then((function(e){0===e.code&&O()}))},layout:"vertical"},c.default.createElement(l.default.Item,{label:"用户组",name:"userGroupIds",rules:[{required:!0,message:"选择用户组"}]},c.default.createElement(u.default,{placeholder:"选择用户组",mode:"multiple"},d.map((function(e){return c.default.createElement(u.default.Option,{value:e.id,key:e.id},e.name)}))))))})));t.default=g},606:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35)),i=n(r(52)),l=n(r(186)),o=n(r(129));r(255);var c=n(r(68)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(6);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,r=(0,f.useState)([]),n=(0,o.default)(r,2),a=n[0],i=n[1],s=(0,f.useState)({}),p=(0,o.default)(s,2),g=p[0],b=p[1],y=(0,f.useState)({}),h=(0,o.default)(y,2),O=h[0],E=h[1],w=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return x(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:g[e.value],value:e.checkedList,onChange:function(t){return _(e.value,t)}})}}];(0,f.useEffect)((function(){t&&P()}),[t]);var P=function(){d.Axios.post("/function/findFunctionList",{type:"2"}).then((function(e){if(!e.code){var r=j(e.data);i(r.result),b(r.resultChild),S(t.id,!0,r.result,r.resultChild)}}))},j=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,u=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=u})),{result:n,resultChild:a}},k=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat((0,l.default)(r),[e])})),n},S=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},u={roleId:e};d.Axios.post("roleFunction/findRoleFunctionList",u).then((function(e){if(!e.code){var u=k(e.data),l=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),o=t?n:g,c=(t?r:a).map((function(e){var t=u[e.value]?u[e.value]:[],r=0===o[e.value].length,n=t.length===o[e.value].length+1&&0!==t.length,a=n?!n:!!t.length&&t.length<o[e.value].length+1;return r&&1===t.length&&(n=!0,a=!1),m(m({},e),{},{checkedList:t,indeterminate:a,checkAll:n})}));E(l),i(c)}}))},_=function(e,t){D(e,t)},D=function(e,t){var r=t,n=a.filter((function(t){return t.value===e}))[0].checkedList,u=r.length<n.length,i=u?R(n,r):R(r,n);if(u)if(n.length>2){var o=i.filter((function(t){return t!==e}));o.map((function(e,t){A(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat((0,l.default)(i)):i));c.map((function(e,t){A(e,t+1===c.length)}))}else{var f=0===n.length?[e].concat((0,l.default)(i)):i;f.map((function(e,t){I(e,t+1===f.length)}))}},R=function(e,t){for(var r=[],n=function(){var n=e[a];t.some((function(e){return e===n}))&&0!==t.length||r.push(n)},a=0;a<e.length;a++)n();return r},x=function(e,t){var r=Object.keys(O),n=r.includes(e),a=r.filter((function(t){return g[e].some((function(e){return e.value===t}))})),u=g[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),i=(!n||0!==g[e].length)&&g[e].length===u.length;if(n||(i=!0,u=g[e]),i)r.includes(e)||(u=[].concat((0,l.default)(u),[{value:e}])),u.length>0?u.map((function(e,t){I(e.value,t+1===u.length)})):I(e,!0);else{if(r.includes(e)){var o=a.map((function(e){return{value:e}}));u=[].concat((0,l.default)(o),[{value:e}])}u.length>0?u.map((function(e,t){A(e.value,t+1===u.length)})):A(e,!0)}},I=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={role:{id:t.id},function:{id:e}};d.Axios.post("roleFunction/createRoleFunction",n).then((function(e){r&&S(t.id)}))},A=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=O[e],a=new FormData;a.append("id",n),d.Axios.post("roleFunction/deleteRoleFunction",a).then((function(e){r&&S(t.id)}))};return f.default.createElement("div",{className:"tiklab_projectpromisse"},f.default.createElement(u.default,{pagination:!1,columns:w,dataSource:a,rowKey:function(e){return e.value},bordered:!0}))};t.default=g},607:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(451));r(51);var i=n(r(19));r(80);var l=n(r(35)),o=n(r(186));r(49);var c=n(r(21));r(314);var f=n(r(252));r(81);var d=n(r(31)),s=n(r(318));r(168);var p=n(r(33)),m=n(r(312));r(316);var v=n(r(142)),g=n(r(313));r(46);var b=n(r(23));r(253);var y=n(r(133)),h=n(r(129)),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=_(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),E=r(34),w=r(47),P=n(r(608)),j=n(r(605)),k=r(444),S=r(170);function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(_=function(e){return e?r:t})(e)}var D=(0,E.inject)(S.SYSTEM_ROLE_STORE)((0,E.observer)((function(e){var t=e.roleDetail,r=e.systemRoleStore,n=r.deleteRoleUserGroupAction,a=r.deleteRoleUserAction,E=r.findAllUserGroupAction,S=r.findRoleUserGroupListAction,_=r.findRoleUserListAction,D=r.getAllUserDirAction,R=((0,w.useTranslation)().t,(0,O.useState)([])),x=(0,h.default)(R,2),I=x[0],A=x[1],U=(0,O.useState)(!1),M=(0,h.default)(U,2),T=M[0],C=M[1],z=(0,O.useState)([]),F=(0,h.default)(z,2),L=F[0],N=F[1],W=(0,O.useState)(!1),G=(0,h.default)(W,2),B=G[0],K=G[1],V=(0,O.useState)([]),J=(0,h.default)(V,2),q=J[0],Y=J[1],H=(0,O.useState)([]),$=(0,h.default)(H,2),Z=$[0],Q=$[1],X=(0,O.useState)([]),ee=(0,h.default)(X,2),te=ee[0],re=ee[1],ne=[{title:"名称",dataIndex:"name",render:function(e,t){var r=t.user,n=t.userGroup;return n?O.default.createElement(b.default,null,n.name,n.type>0&&O.default.createElement(y.default,null,"管理员组")):O.default.createElement(b.default,null,r.nickname,1===r.type&&O.default.createElement(y.default,null,"管理员用户"))}},{title:"类型",dataIndex:"type",render:function(e,t){t.user;return t.userGroup?"用户组":"用户"}},{title:"操作",dataIndex:"action",width:100,render:function(e,t){var r=t.user,n=t.userGroup;return se(n?n.type:r.type,t)}}];(0,O.useEffect)((function(){ae(),fe()}),[]),(0,O.useEffect)((function(){t&&(ie({roleId:t.id}),ue({roleId:t.id}))}),[t]);var ae=function(){D().then((function(e){e.code||Q(e.data)}))},ue=function(e){S(e).then((function(e){e.code||re(e.data)}))},ie=function(e){_(e).then((function(e){if(!e.code){A(e.data);var t=e.data.map((function(e){return e.user})).filter(Boolean).map((function(e){return e.id}));N(t)}}))},le=function(e){e.user&&oe(e.id),e.userGroup&&ce(e.id)},oe=function(e){a(e).then((function(e){e.code||ie({roleId:t.id})}))},ce=function(e){n(e).then((function(e){e.code||ue({roleId:t.id})}))},fe=function(){E().then((function(e){0===e.code&&Y(e.data)}))},de=O.default.createElement(v.default,{onClick:function(e){"1"===e.key?C(!0):K(!0)}},O.default.createElement(v.default.Item,{key:"1"},O.default.createElement(g.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),"新增用户"),O.default.createElement(v.default.Item,{key:"2"},O.default.createElement(g.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),"新增用户组")),se=function(e,r){var n=t.businessType,a=[];return 0===n&&a.push(O.default.createElement(p.default,{title:"删除"},O.default.createElement(m.default,{onClick:function(){return le(r)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),n>0&&e<1&&a.push(O.default.createElement(p.default,{title:"删除"},O.default.createElement(m.default,{onClick:function(){return le(r)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),a};return O.default.createElement("div",{className:"tiklab_promisse"},O.default.createElement(c.default,{justify:"space-between"},O.default.createElement(k.TitleAction,{title:"用户(".concat(I.length,")/用户组(").concat(te.length,")")}),O.default.createElement(f.default,{overlay:de},O.default.createElement(d.default,{type:"primary"},O.default.createElement(b.default,null,"新增",O.default.createElement(s.default,null))))),O.default.createElement(c.default,null,O.default.createElement(i.default,{span:24,className:"tiklab_promisse_person"},O.default.createElement(l.default,{columns:ne,dataSource:[].concat((0,o.default)(te),(0,o.default)(I)),rowKey:function(e){return e.id},pagination:!1}))),O.default.createElement(P.default,(0,u.default)({},e,{visible:T,onCancel:function(){return C(!1),ie({roleId:t.id}),void ue({roleId:t.id})},roleId:t.id,addSelectedRowKeys:L,userDir:Z})),O.default.createElement(j.default,{roleId:t.id,onClose:function(){K(!1),ie({roleId:t.id}),ue({roleId:t.id})},groupUserList:q,open:B}))})));t.default=D},608:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35));r(49);var i=n(r(21));r(51);var l=n(r(19));r(79);var o=n(r(26));r(46);var c=n(r(23)),f=n(r(52)),d=n(r(129)),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),p=r(47),m=r(34),v=r(444),g=r(170);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=(0,m.inject)(g.SYSTEM_ROLE_STORE)((0,m.observer)((function(e){var t=(0,p.useTranslation)().t,r=e.visible,n=e.onCancel,a=e.roleId,f=void 0===a?"":a,m=e.addSelectedRowKeys,g=e.userDir,b=e.systemRoleStore,y=b.createBatchRoleUserAction,O=b.getUserPageAction,E=(0,s.useState)([]),w=(0,d.default)(E,2),P=w[0],j=w[1],k=(0,s.useState)([]),S=(0,d.default)(k,2),_=S[0],D=S[1],R=(0,s.useState)(10),x=(0,d.default)(R,1)[0],I=(0,s.useState)(1),A=(0,d.default)(I,2),U=A[0],M=A[1],T=(0,s.useState)(0),C=(0,d.default)(T,2),z=C[0],F=C[1],L=(0,s.useState)({pageParam:{pageSize:x,currentPage:U}}),N=(0,d.default)(L,2),W=N[0],G=N[1];(0,s.useEffect)((function(){B(W)}),[W]),(0,s.useEffect)((function(){j(m)}),[m]);var B=function(e){O(e).then((function(e){e.code||(F(e.data.totalRecord),D(e.data.dataList))}))},K=function(){G({pageParam:{pageSize:x,currentPage:1}}),j([]),M(1),F(0),n()},V=[{title:t("privilege-role.name"),dataIndex:"nickname",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return s.default.createElement(c.default,null,s.default.createElement(v.Profile,{userInfo:t}),e)}},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){var t=g.findIndex((function(t){return t.id===e}));return t>-1?g[t].name:"--"}}],J={selectedRowKeys:P,onChange:function(e){j(e)}};return s.default.createElement(v.BaseModal,{title:t("privilege-select-user"),visible:r,onOk:function(){y({role:{id:f},userIds:P}).then((function(e){K()}))},onCancel:K,width:1200,cancelText:t("privilege-common.cancel"),okText:t("privilege-common.save")},s.default.createElement(i.default,{style:{paddingBottom:16}},s.default.createElement(l.default,{span:24},s.default.createElement(o.default,{placeholder:t("privilege-user"),width:240,onPressEnter:function(e){var t=e.target.value,r=h(h({},W),{},{name:t,pageParam:{pageSize:x,currentPage:1}});G(r)},style:{width:240}}))),s.default.createElement(i.default,null,s.default.createElement(l.default,{span:24},s.default.createElement("div",{style:{width:"100%"}},s.default.createElement(u.default,{columns:V,dataSource:_,rowSelection:J,rowKey:function(e){return e.id},pagination:{current:U,pageSize:x,total:z,onChange:function(e){M(e);var t=h(h({},W),{},{pageParam:{pageSize:x,currentPage:e}});G(t)}}})))))})));t.default=O},609:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35)),i=n(r(52)),l=n(r(186)),o=n(r(129));r(255);var c=n(r(68)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=s(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=r(6);function s(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(s=function(e){return e?r:t})(e)}function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=c.default.Group,g=function(e){var t=e.roleDetail,r=e.group,n=(0,f.useState)([]),a=(0,o.default)(n,2),i=a[0],s=a[1],p=(0,f.useState)({}),g=(0,o.default)(p,2),b=g[0],y=g[1],h=(0,f.useState)({}),O=(0,o.default)(h,2),E=O[0],w=O[1],P=[{title:"模块",key:"label",width:"30%",render:function(e){return f.default.createElement(c.default,{indeterminate:e.indeterminate,onChange:function(t){return I(e.value,t)},checked:e.checkAll},e.label)}},{title:"功能点",key:"name",render:function(e){return f.default.createElement(v,{options:b[e.value],value:e.checkedList,onChange:function(t){return D(e.value,t)}})}}];(0,f.useEffect)((function(){t&&j()}),[t]);var j=function(){d.Axios.post("/function/findFunctionList",{group:r}).then((function(e){if(!e.code){var r=k(e.data);s(r.result),y(r.resultChild),_(t.id,!0,r.result,r.resultChild)}}))},k=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,u=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=u})),{result:n,resultChild:a}},S=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat((0,l.default)(r),[e])})),n},_=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a={roleId:e};d.Axios.post("roleFunction/findRoleFunctionList",a).then((function(e){if(!e.code){var a=S(e.data),u=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),l=t?n:b,o=(t?r:i).map((function(e){var t=a[e.value]?a[e.value]:[],r=0===l[e.value].length,n=t.length===l[e.value].length+1&&0!==t.length,u=n?!n:!!t.length&&t.length<l[e.value].length+1;return r&&1===t.length&&(n=!0,u=!1),m(m({},e),{},{checkedList:t,indeterminate:u,checkAll:n})}));w(u),s(o)}}))},D=function(e,t){R(e,t)},R=function(e,t){var r=t,n=i.filter((function(t){return t.value===e}))[0].checkedList,a=r.length<n.length,u=a?x(n,r):x(r,n);if(a)if(n.length>2){var o=u.filter((function(t){return t!==e}));o.map((function(e,t){U(e,t+1===o.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat((0,l.default)(u)):u));c.map((function(e,t){U(e,t+1===c.length)}))}else{var f=0===n.length?[e].concat((0,l.default)(u)):u;f.map((function(e,t){A(e,t+1===f.length)}))}},x=function(e,t){for(var r=[],n=function(){var n=e[a];t.some((function(e){return e===n}))&&0!==t.length||r.push(n)},a=0;a<e.length;a++)n();return r},I=function(e,t){var r=Object.keys(E),n=r.includes(e),a=r.filter((function(t){return b[e].some((function(e){return e.value===t}))})),u=b[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),i=(!n||0!==b[e].length)&&b[e].length===u.length;if(n||(i=!0,u=b[e]),i)r.includes(e)||(u=[].concat((0,l.default)(u),[{value:e}])),u.length>0?u.map((function(e,t){A(e.value,t+1===u.length)})):A(e,!0);else{if(r.includes(e)){var o=a.map((function(e){return{value:e}}));u=[].concat((0,l.default)(o),[{value:e}])}u.length>0?u.map((function(e,t){U(e.value,t+1===u.length)})):U(e,!0)}},A=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={role:{id:t.id},function:{id:e}};d.Axios.post("roleFunction/createRoleFunction",n).then((function(e){r&&_(t.id)}))},U=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=E[e],a=new FormData;a.append("id",n),d.Axios.post("roleFunction/deleteRoleFunction",a).then((function(e){r&&_(t.id)}))};return f.default.createElement(f.default.Fragment,null,f.default.createElement("div",{className:"tiklab_promisse"},f.default.createElement(u.default,{pagination:!1,columns:P,dataSource:i,rowKey:function(e){return e.value},bordered:!0})))};t.default=g},610:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.links=t.SameValue=void 0;var a=n(r(52)),u=n(r(186));function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){(0,a.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.SameValue=function(e,t,r){var n=Array.from(new Set((0,u.default)(e).filter((function(e){return t.some((function(t){return t[r]===e}))}))));if(n)return t.find((function(e){return e[r]===n[0]}))};t.links=function(e){var t=[];return function e(r,n){r&&r.map((function(r){if(r.children){var a=r.children.map((function(e){return l(l({},e),{},{type:r.id})}));e(a,t)}else n.push(r)}))}(e,t),t}},740:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(741)).default;t.default=a},741:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(51);var u=n(r(19));r(168);var i=n(r(33)),l=n(r(337));r(49);var o=n(r(21));r(81);var c=n(r(31));r(46);var f=n(r(23));r(53);var d=n(r(50)),s=n(r(129)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),m=r(174),v=r(6),g=r(444),b=n(r(545));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}r(753);var h=[{id:2,name:"LDAP",desc:"同步LDAP用户以及组织架构",icon:r(754)},{id:3,name:"钉钉",desc:"同步企业微信用户以及组织架构",icon:r(755)},{id:4,name:"企业微信",desc:"同步企业微信用户以及组织架构",icon:r(756)}],O=function(e){var t=e.router,r=void 0===t?"/setting/dir":t,n=(0,p.useState)([]),a=(0,s.default)(n,2),y=a[0],O=a[1],E=(0,m.useHasPointPlugin)("directory"),w=(0,v.getVersionInfo)(),P=w&&1!==w.release&&!w.expired,j=localStorage.getItem(v.LOCALSTORAGE_KEY.AUTH_CONFIG);if(j){var k=JSON.parse(j);if(!k.authType&&-1===k.appName.indexOf("eas")){var S=k.authUrl+"/#"+r;return p.default.createElement(b.default,{module:"用户目录",link:S})}}(0,p.useEffect)((function(){return _(),function(){return O([])}}),[]);var _=function(){var e={ids:["1"]};try{"mult"===tenant_type&&(e={ids:["0","1"]})}catch(t){e={ids:["1"]}}v.Axios.post("/user/userdir/findDirByIds",e).then((function(e){if(!e.code){var t=e.data;O(t)}}))};return p.default.createElement("div",{className:"directory"},p.default.createElement(o.default,{className:"directory-wrap"},p.default.createElement(u.default,{span:24},p.default.createElement(g.TitleAction,{title:"用户目录"}),p.default.createElement("div",{className:"directory_content"},y.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(d.default,{size:64}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(f.default,{direction:"vertical"},p.default.createElement("div",null,e.name),p.default.createElement("p",{className:"directory_content_desc"},"这是一个描述内容")))),p.default.createElement(f.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})),P&&E?p.default.createElement(m.RemoteComponent,{point:"directory",isModalType:!0}):p.default.createElement(p.default.Fragment,null,h.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(d.default,{size:64,src:e.icon.default}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(f.default,{direction:"vertical"},p.default.createElement(f.default,null,p.default.createElement("div",null,e.name),p.default.createElement(i.default,{placement:"topRight",title:"增强功能需要去官网购买Licence"},p.default.createElement(l.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}))),p.default.createElement("p",{className:"directory_content_desc"},e.desc)))),p.default.createElement(f.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})))))))};t.default=O},742:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(112);var a=n(r(94)),u=n(r(451)),i=n(r(187)),l=n(r(0));r(743);var o=["children","title","width"],c=function(e){var t=e.children,r=e.title,n=e.width,c=(0,i.default)(e,o);return l.default.createElement(a.default,(0,u.default)({title:r,width:n,style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"tiklab_modal",closable:!1},c),t)};t.default=c},743:function(e,t,r){"use strict";r.r(t)},744:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(56);var a=n(r(54));r(46);var u=n(r(23)),i=n(r(228)),l=n(r(0)),o=r(37);r(745);var c=function(e){var t=e.routes,r=e.children;return l.default.createElement("div",{className:"privilege-breadcrumb"},l.default.createElement(a.default,{itemRender:function(e,t,r){var n=r.indexOf(e)===r.length-1,a=0===r.indexOf(e);return e.disabled?l.default.createElement("span",null,e.breadcrumbName):a?e.click?l.default.createElement(u.default,null,l.default.createElement(i.default,{onClick:function(){return e.click()},style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName):l.default.createElement(o.Link,{to:e.path},l.default.createElement(u.default,null,l.default.createElement(i.default,{style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName)):n?l.default.createElement("span",null,e.breadcrumbName):e.click?l.default.createElement("a",{onClick:function(){return e.click()},style:{cursor:"pointer"}},e.breadcrumbName):e.path?l.default.createElement(o.Link,{to:e.path},e.breadcrumbName):l.default.createElement(l.default.Fragment,null,e.breadcrumbName)},routes:t}),r)};t.default=c},745:function(e,t,r){"use strict";r.r(t)},746:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(366));r(53);var u=n(r(50)),i=n(r(0)),l=r(6);r(747);var o=function(e){var t=e.userInfo,r=void 0===t?void 0:t,n=r||(0,l.getUser)();return i.default.createElement("div",{className:"tiklab-profile"},n.avatar&&"null"!==n.avatar?i.default.createElement(u.default,{src:n.avatar}):n.nickname&&"null"!==n.nickname?i.default.createElement(u.default,null,n.nickname.substring(0,1)):n.name&&"null"!==n.name?i.default.createElement(u.default,null,n.name.substring(0,1)):i.default.createElement(u.default,{size:32,icon:i.default.createElement(a.default,null)}))};t.default=o},747:function(e,t,r){"use strict";r.r(t)},748:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var a=n(r(21));r(51);var u=n(r(19));r(46);var i=n(r(23)),l=n(r(0));r(749);var o=function(e){var t=e.title,r=e.icon,n=e.children,o=e.style,c=void 0===o?{}:o;return l.default.createElement(a.default,null,l.default.createElement(u.default,{span:24},l.default.createElement("div",{className:"tiklab_title",style:c},l.default.createElement(i.default,null,r,l.default.createElement("span",null,t)),n)))};t.default=o},749:function(e,t,r){"use strict";r.r(t)},750:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(129)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),l=r(34),o=r(170),c=n(r(591));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,l.inject)(o.USER_STORE)((0,l.observer)((function(e){var t=e.userStore,r=e.name,n=e.id,a=t.findUser,l=(0,i.useState)(null),o=(0,u.default)(l,2),f=o[0],d=o[1];return(0,i.useEffect)((function(){r||a(n).then((function(e){0===e.code&&e.data&&d(e.data.name)}))}),[]),r||i.default.createElement(c.default,{userStore:t,type:"userAliasOrName",openid:f})})));t.default=d},751:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(129)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),l=r(34),o=r(170),c=n(r(591));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}var d=(0,l.inject)(o.ORG_STORE,o.USER_STORE)((0,l.observer)((function(e){var t=e.userStore,r=e.orgStore,n=e.name,a=e.id,l=r.findOrgaAction,o=(0,i.useState)(null),f=(0,u.default)(o,2),d=f[0],s=f[1];return(0,i.useEffect)((function(){n||l(a).then((function(e){if(0===e.code&&e.data){var t=a.split("_")[1];s(t)}}))}),[]),n||i.default.createElement(c.default,{type:"departmentName",openid:d,userStore:t})})));t.default=d},752:function(e,t,r){"use strict";r.r(t)},753:function(e,t,r){"use strict";r.r(t)},754:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/ldap.jpeg"},755:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/dingding.jpeg"},756:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/qywechat.jpeg"},757:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(758)).default;t.default=a},758:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38)),i=n(r(451));r(51);var l=n(r(19));r(80);var o=n(r(35));r(49);var c=n(r(21));r(79);var f=n(r(26)),d=n(r(315));r(127);var s=n(r(36));r(81);var p=n(r(31)),m=n(r(313)),v=n(r(52)),g=n(r(117)),b=n(r(312));r(168);var y=n(r(33)),h=n(r(367));r(46);var O=n(r(23));r(116);var E=n(r(20)),w=n(r(129)),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=x(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),j=r(34),k=r(47),S=r(444),_=r(170),D=n(r(759));r(760);var R=r(2);function x(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(x=function(e){return e?r:t})(e)}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=(0,j.inject)(_.DOMAIN_USER_STORE,_.USER_STORE)((0,j.observer)((function(e){var t=e.domainId,r=e.domainUserStore,n=e.userStore,a=e.bgroup,v=void 0===a?"eas":a,j=r.getDomainUser,_=r.deleteDomainUser,x=r.privilegeDomainUsers,I=r.createDmRoleUserAction,U=r.deleteDmRoleUserAction,M=r.deleteDmUserAction,T=r.findDmRoleListAction,C=r.findDmRoleUserListAction,z=r.findDmUserPageAction,F=n.createRoleUserAction,L=n.findUserDirList,N=(0,k.useTranslation)().t,W=E.default.useForm(),G=(0,w.default)(W,1)[0],B=(0,P.useState)([]),K=(0,w.default)(B,2),V=K[0],J=K[1],q=(0,P.useState)({}),Y=(0,w.default)(q,2),H=Y[0],$=Y[1],Z=(0,P.useState)(!1),Q=(0,w.default)(Z,2),X=Q[0],ee=Q[1],te=(0,P.useState)([]),re=(0,w.default)(te,2),ne=re[0],ae=re[1],ue=(0,P.useState)(!1),ie=(0,w.default)(ue,2),le=ie[0],oe=ie[1],ce=(0,P.useState)(""),fe=(0,w.default)(ce,2),de=fe[0],se=fe[1],pe=(0,P.useState)(10),me=(0,w.default)(pe,1)[0],ve=(0,P.useState)(1),ge=(0,w.default)(ve,2),be=ge[0],ye=ge[1],he=(0,P.useState)(0),Oe=(0,w.default)(he,2),Ee=Oe[0],we=Oe[1],Pe=(0,P.useState)({domainId:t,pageParam:{pageSize:me,currentPage:be}}),je=(0,w.default)(Pe,2),ke=je[0],Se=je[1],_e=[{title:N("orga-table.nickname"),dataIndex:["user","nickname"],key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return P.default.createElement(O.default,null,P.default.createElement(S.Profile,{userInfo:t}),e)}},{title:N("orga-table.name"),dataIndex:["user","name"],key:"name",width:"15%",ellipsis:!0},{title:N("orga-table.org"),dataIndex:["user","org"],key:"org",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:"角色",dataIndex:"role",key:"role",width:"20%",ellipsis:!0,render:function(e,t){var r=t.roleList;return r.length>0?P.default.createElement(O.default,null,r.map((function(e){return P.default.createElement("span",{key:e.id},e.dmRole.role.name)}))):"--"}},{title:N("orga-table.type"),dataIndex:["user","dirId"],key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=ne.findIndex((function(t){return t.id===e}));return t>-1?ne[t].name:"--"}},{title:N("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){return P.default.createElement(O.default,{size:"middle"},P.default.createElement(y.default,{title:"角色修改"},P.default.createElement(h.default,{onClick:function(){return Ue(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),P.default.createElement(y.default,{title:"删除"},P.default.createElement(b.default,{onClick:function(){return Me(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],De=(0,P.useRef)(null);(0,P.useEffect)((function(){Re(),Ae()}),[]),(0,P.useEffect)((function(){return De.current=!0,xe(ke),function(){De.current=!1}}),[ke]);var Re=function(){L().then((function(e){e.code||ae(e.data)}))},xe=function(e){z(e).then(function(){var e=(0,g.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code||!De.current){e.next=6;break}return we(t.data.totalRecord),e.next=4,Promise.all(Ie(t.data.dataList));case 4:r=e.sent,j(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ie=function(e){return e.map(function(){var e=(0,g.default)(u.default.mark((function e(r){var n,a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a={domainId:t,userId:r.user.id},e.next=4,C(a);case 4:return(i=e.sent).code||(n=i.data.map((function(e){var t=e.dmRole,r=e.role;return{dmRole:A(A({},t),{},{role:r}),roleUserId:e.id}}))),e.abrupt("return",A(A({},r),{},{roleList:n}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ae=function(){T({domainId:t}).then((function(e){e.code||J(e.data)}))},Ue=function(e){var t=e.roleList;G.setFieldsValue({role:t.map((function(e){return e.dmRole.id}))}),$(e),ee(!0)},Me=function(e){M(e).then((function(t){t.code||(_(e),Ee-1<me*(be-1)+1&&(ye(1===be?1:be-1),Se({pageParam:{pageSize:me,currentPage:1===be?1:be-1}})),we(Ee-1))}))},Te=function(){oe(!1),xe(ke)},Ce=function(){G.resetFields(),ee(!1),xe(ke)},ze=function(e){var t=e.map((function(e){return U(e)}));return Promise.all(t)},Fe=function(e,r){var n={bgroup:v,userId:r,domainId:t};if(Array.isArray(e)){var a=e.map((function(e){var t=A(A({},n),{},{dmRole:{id:e}});return I(t)}));Promise.all(a).then((function(e){Ce()}))}else n=A(A({},n),{},{dmRole:{id:e}}),F(n).then((function(e){0===e.code&&Ce()}))};return P.default.createElement("div",{className:"privilege-domain-user"},P.default.createElement("div",{className:"privilege-domain-user-content"},P.default.createElement(S.TitleAction,{title:"项目用户",style:{paddingLeft:8}},P.default.createElement(p.default,{onClick:function(){return oe(!0)},icon:P.default.createElement(m.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),type:"primary"},N("orga-label.addUser"))),P.default.createElement(c.default,{style:{paddingBottom:"var(--tiklab-padding-item)",paddingLeft:8},justify:"space-between"},P.default.createElement(O.default,null,P.default.createElement(s.default,{placeholder:"用户目录",defaultValue:"-1",onSelect:function(e){ye(1);var t=A(A({},ke),{},{pageParam:{pageSize:me,currentPage:1}});"-1"!==e?t.dirId=e:delete t.dirId,Se(t)},style:{width:"240px"}},P.default.createElement(s.default.Option,{key:"-1",value:"-1"},"用户目录"),ne.map((function(e){return P.default.createElement(s.default.Option,{key:e.id,value:e.id},e.name)}))),P.default.createElement(f.default,{placeholder:N("orga-label.searchUserPhoneEmail"),value:de,onChange:function(e){return se(e.target.value)},onPressEnter:function(e){return function(e){ye(1);var t=A(A({},ke),{},{pageParam:{pageSize:me,currentPage:1}});e.target.value?t.nickname=e.target.value:delete t.nickname,Se(t)}(e)},prefix:P.default.createElement(d.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),style:{width:"240px"}}))),P.default.createElement(c.default,null,P.default.createElement(l.default,{span:24},P.default.createElement(o.default,{columns:_e,dataSource:x,rowKey:function(e){return e.id},tableLayout:"fixed",pagination:{current:be,pageSize:me,total:Ee,showSizeChanger:!1,position:["bottomCenter"]},onChange:function(e,t,r){return function(e,t,r){var n=[];ye(e.current),Array.isArray(r)?n=r.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):r.field&&n.push({name:r.field,sortType:void 0!==r.order?"ascend"===r.order?"asc":"desc":void 0});var a=A(A({},ke),{},{orderParams:n,pageParam:{pageSize:me,currentPage:e.current}});Se(a)}(e,0,r)}})))),(0,P.useMemo)((function(){return P.default.createElement(D.default,(0,i.default)({},e,{domainId:t,visible:le,userDir:ne,onCancel:Te}))}),[le]),P.default.createElement(S.BaseModal,{title:"修改角色",visible:X,onOk:function(){G.submit()},onCancel:Ce,destroyOnClose:!0,cancelText:N("orga-common.back"),okText:N("orga-common.save")},P.default.createElement(E.default,{form:G,onFinish:function(e){var t=(0,R.toJS)(H),r=t.user.id,n=(t.roleList||[]).map((function(e){return e.dmRole.id})),a=e.role,u=n.filter((function(e){return!a.includes(e)})),i=(t.roleList||[]).map((function(e){if(u.includes(e.dmRole.id))return e.roleUserId})).filter(Boolean);0===i.length?Fe(a,r):ze(i).then((function(){Fe(a,r)}))},preserve:!1,layout:"vertical"},P.default.createElement(E.default.Item,{label:"角色",name:"role",rules:[{required:!0,message:N("adduser-module.userTypeRequired")}]},P.default.createElement(s.default,{mode:"multiple"},V.map((function(e){return P.default.createElement(s.default.Option,{key:e.id,value:e.id},e.role.name)})))))))})));t.default=U},759:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(80);var i=n(r(35));r(49);var l=n(r(21));r(51);var o=n(r(19));r(79);var c=n(r(26)),f=n(r(315)),d=n(r(186));r(67);var s=n(r(18)),p=n(r(52)),m=n(r(117));r(46);var v=n(r(23)),g=n(r(129)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),y=r(444),h=r(47);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw u}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,p.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(e){var t=(0,h.useTranslation)().t,r=e.visible,n=e.onCancel,a=e.domainId,p=e.userDir,O=e.domainUserStore,w=e.userStore,P=O.createDmUserAction,k=O.findDmUserListAction,S=w.findUserPageAction,_=w.findUserOrgaList,D=(0,b.useState)([]),R=(0,g.default)(D,2),x=R[0],I=R[1],A=(0,b.useState)([]),U=(0,g.default)(A,2),M=U[0],T=U[1],C=(0,b.useState)(10),z=(0,g.default)(C,1)[0],F=(0,b.useState)(1),L=(0,g.default)(F,2),N=L[0],W=L[1],G=(0,b.useState)(0),B=(0,g.default)(G,2),K=B[0],V=B[1],J=(0,b.useState)({pageParam:{pageSize:z,currentPage:N}}),q=(0,g.default)(J,2),Y=q[0],H=q[1],$=(0,b.useState)(""),Z=(0,g.default)($,2),Q=Z[0],X=Z[1],ee=[{title:t("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return b.default.createElement(v.default,null,b.default.createElement(y.Profile,{userInfo:t})," ",e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:t("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?b.default.createElement(v.default,null,r.map((function(e){return b.default.createElement("span",{key:e.orgaId},e.orgaName)}))):"--"}},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"10%",ellipsis:!0,render:function(e){var t=p.findIndex((function(t){return t.id==e}));return t>-1?p[t].name:"--"}}];(0,b.useEffect)((function(){te(Y)}),[Y]);var te=function(e){S(e).then(function(){var e=(0,m.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code){e.next=6;break}return V(t.data.totalRecord),e.next=4,Promise.all(re(t.data.dataList));case 4:r=e.sent,T(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},re=function(e){return e.map(function(){var e=(0,m.default)(u.default.mark((function e(t){var r,n,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n={userId:t.id,scope:1,type:1},e.next=4,_(n);case 4:return 0===(a=e.sent).code&&a.data&&(r=a.data.slice(-1).map((function(e){return j(j({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",j(j({},t),{},{orgaList:r}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},ne={selectedRowKeys:x,onChange:function(e){I(e)}};return b.default.createElement(y.BaseModal,{title:"添加用户",visible:r,onOk:function(){k({domainId:a}).then((function(e){if(!e.code){var t,r=!1,u=e.data.map((function(e){return e.user.id})),i=E(x);try{var l=function(){var e=t.value;if(r)return"break";r=u.some((function(t){return e===t}))};for(i.s();!(t=i.n()).done;){if("break"===l())break}}catch(e){i.e(e)}finally{i.f()}if(r)return s.default.error("存在关联的用户");var o=x.map((function(e){return P({domainId:a,user:{id:e}})}));Promise.all(o).then((function(e){H({pageParam:{pageSize:z,currentPage:1}}),I([]),W(1),V(0),X(""),n()}))}}))},onCancel:function(){H({pageParam:{pageSize:z,currentPage:1}}),I([]),W(1),V(0),X(""),n()},width:1200,destroyOnClose:!0,cancelText:t("orga-common.back"),okText:t("orga-common.save")},b.default.createElement(l.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(c.default,{placeholder:"昵称搜索",prefix:b.default.createElement(f.default,null),style:{width:240},value:Q,onChange:function(e){return X(e.target.value)},onPressEnter:function(e){return function(e){var t={nickname:e.target.value,pageParam:{pageSize:z,currentPage:1}};W(1),H(t)}(e)}}))),b.default.createElement(l.default,null,b.default.createElement(o.default,{span:24},b.default.createElement("div",{style:{width:"100%"}},b.default.createElement(i.default,{columns:ee,dataSource:M,rowSelection:ne,onRow:function(e){return{onClick:function(){return function(e){x.indexOf(e.id)>=0?x.splice(x.indexOf(e.id),1):x.push(e.id),I((0,d.default)(x))}(e)}}},rowKey:function(e){return e.id},pagination:{current:N,pageSize:z,total:K,onChange:function(e){W(e);var t=j(j({},Y),{},{pageParam:{pageSize:z,currentPage:e}});H(t)},position:["bottomCenter"]}})))))},S=function(e,t){return e.visible===t.visible},_=(0,b.memo)(k,S);t.default=_},760:function(e,t,r){"use strict";r.r(t)},761:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(762)).default;t.default=a},762:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(254);var u=n(r(84)),i=n(r(52)),l=n(r(129)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),c=r(34),f=r(6),d=n(r(763)),s=n(r(767)),p=n(r(545)),m=r(444),v=r(170);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}r(770);var y=(0,c.inject)(v.ORG_STORE,v.SYSTEM_ROLE_STORE)((0,c.observer)((function(e){var t=e.orgStore,r=e.systemRoleStore,n=e.router,a=void 0===n?"/setting/orga":n,c=t.selectData,v=t.selectTreeOrgDetail,g=t.findOrgaAction,y=t.findOrgaTreeAction,h=t.findUserOrgaPageAction,O=(0,o.useState)(""),E=(0,l.default)(O,2),w=E[0],P=E[1],j=(0,o.useState)(null),k=(0,l.default)(j,2),S=k[0],_=k[1],D=(0,o.useState)(10),R=(0,l.default)(D,1)[0],x=(0,o.useState)(1),I=(0,l.default)(x,2),A=I[0],U=I[1],M=(0,o.useState)(0),T=(0,l.default)(M,2),C=T[0],z=T[1],F=(0,o.useState)([]),L=(0,l.default)(F,2),N=L[0],W=L[1],G=(0,o.useState)({}),B=(0,l.default)(G,2),K=B[0],V=B[1],J=(0,o.useState)([]),q=(0,l.default)(J,2),Y=q[0],H=q[1],$=localStorage.getItem(f.LOCALSTORAGE_KEY.AUTH_CONFIG);if($){var Z=JSON.parse($);if(!Z.authType&&-1===Z.appName.indexOf("eas")){var Q=Z.authUrl+"/#"+a;return o.default.createElement(p.default,{module:"部门",link:Q})}}(0,o.useEffect)((function(){X()}),[K]);var X=function(){y(K).then((function(e){if(!e.code)if(H(e.data&&e.data),e.data.length){var t=e.data[0];te({orgaId:t.orgaId}),P(t.orgaId)}else v(null),P("")}))},ee=function(e,t,r){var n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({pageParam:{currentPage:t,pageSize:R}},e);h(n).then((function(e){e.code||(z(e.data.totalRecord),W(e.data.dataList))}))},te=function(e){e.parentOrga?_(e.parentOrga.orgaId):_(null),g(e.orgaId).then((function(t){t.code||(P(e.orgaId),U(1),v({orgName:t.data.orgaName,parentOrg:t.data.parentOrga?t.data.parentOrga.orgaName:null,userDirType:t.data.dirId}),ee({orgaId:e.orgaId},1))})).catch((function(e){}))},re=function(e){U(e),ee({orgaId:w},e)};return o.default.createElement("div",{className:"orga_container"},o.default.createElement("div",{className:"orga_container_body"},o.default.createElement(d.default,{treeData:Y,onSelect:te,treeParams:K,getAllTree:X,setTreeParams:V,orgStore:t,systemRoleStore:r}),o.default.createElement("div",{className:"orga_table"},o.default.createElement("div",{className:"orga_table_right"},o.default.createElement(m.TitleAction,{title:"部门",style:{paddingLeft:8}}),c?o.default.createElement(s.default,{data:c,tableData:N,pagination:{current:A,pageSize:R,total:C,onChange:re,showSizeChanger:!1,position:["bottomCenter"]},orgId:w,parentOrgaId:S,getOrgaUser:ee,restTableData:re}):o.default.createElement("div",{className:"org-table"},o.default.createElement(u.default,{description:o.default.createElement("span",null,"组织树结构为空，你需要创建一个")}))))))})));t.default=y},763:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(869);var u=n(r(849));r(79);var i=n(r(26)),l=n(r(315));r(127);var o=n(r(36)),c=n(r(327));r(46);var f=n(r(23));r(314);var d=n(r(252)),s=n(r(344));r(168);var p=n(r(33)),m=n(r(313)),v=n(r(52));r(67);var g=n(r(18)),b=n(r(129)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),h=r(2),O=r(47),E=n(r(491)),w=n(r(765));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(766);var S=function(e){var t=e.treeData,r=e.onSelect,n=e.orgStore,a=e.getAllTree,v=e.setTreeParams,P=e.treeParams,j=void 0===P?{}:P,S=(e.systemRoleStore,n.deleteOrgaAction),_=n.findOpenUserDirListAction,D=n.findOrgaAction,R=n.updateOrgaSortAction,x=(0,O.useTranslation)().t,I=(0,y.useState)(!1),A=(0,b.default)(I,2),U=A[0],M=A[1],T=(0,y.useState)({}),C=(0,b.default)(T,2),z=C[0],F=C[1],L=(0,y.useState)(!1),N=(0,b.default)(L,2),W=N[0],G=N[1],B=(0,y.useState)([]),K=(0,b.default)(B,2),V=K[0],J=K[1];(0,y.useEffect)((function(){return q(),function(){return J([])}}),[]);var q=function(){_().then((function(e){e.code||J(e.data)}))},Y=function(e){return y.default.createElement("div",{className:"orga-tree-actions-menu"},y.default.createElement(E.default,{code:"orga_update_orga"},y.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(t){return function(e,t){e.stopPropagation(),D(t.orgaId).then((function(e){e.code||(F(e.data),G(!0),M(!0))}))}(t,e)}},"编辑组织")),"111111"!==e.orgaId&&y.default.createElement(E.default,{code:"orga_delete_orga"},y.default.createElement("div",{className:"orga-tree-actions-item",onClick:function(t){return function(e,t){if(e.stopPropagation(),t.children.length>0)return g.default.error("组织中存在部门,不能删除");S(t.orgaId).then((function(e){e.code||a()}))}(t,e)}},"删除组织")))},H=function(e){return y.default.createElement("div",{className:"tiklab_tree_actions"},y.default.createElement(f.default,null,y.default.createElement(E.default,{code:"orga_add_orga"},y.default.createElement(p.default,{title:"添加部门"},y.default.createElement(m.default,{onClick:function(t){return function(e,t){e.stopPropagation(),F(t),M(!0)}(t,e)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),y.default.createElement(d.default,{overlay:Y(e),trigger:["click","hover"]},y.default.createElement(s.default,{style:{fontSize:"var(--tiklab-icon-size-16)",padding:4},onClick:function(e){return e.stopPropagation()}}))))},$=function(e){return y.default.createElement("span",{className:"orga-tree_item_action"},"111111"===e.orgaId?y.default.createElement(f.default,null,y.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),e.orgaName):e.orgaName,"1"===e.dirId&&H(e))};return y.default.createElement("div",{className:"orga-tree-wrap"},y.default.createElement(i.default.Group,{compact:!0},y.default.createElement(o.default,{placeholder:"目录类型",style:{width:"40%"},onSelect:function(e){-1===e?j.orgaName?v({orgaName:j.orgaName}):v({}):v(k(k({},j),{},{dirId:e}))}},y.default.createElement(o.default.Option,{key:"-1",value:-1},x("orga-table.all")),V.map((function(e){return y.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)}))),y.default.createElement(i.default,{placeholder:x("orga-common.search")+x("orga-common.orga")+x("orga-common.name"),style:{width:"60%"},onPressEnter:function(e){return function(e){var t=e.target.value;v(k(k({},j),{},{orgaName:t}))}(e)},prefix:y.default.createElement(l.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})),y.default.createElement("div",{className:"orga-tree-wrap-tree"},y.default.createElement("div",{className:"orga-tree-content"},y.default.createElement(u.default.DirectoryTree,{className:"draggable-tree",draggable:!0,blockNode:!0,showIcon:!1,onDrop:function(e){var t=e.node.props.eventKey,r=e.dragNode.props.eventKey,n=e.node.parentOrga.orgaId,u=e.dragNode.parentOrga.orgaId,i=e.node.sort,l=e.dragNode.sort;if(n!==u)return g.default.error("仅允许同层级部门排序");var o={list:[{parentOrga:e.node.parentOrga,orgaName:e.node.orgaName,orgaId:t,sort:l,dirId:e.node.dirId},{parentOrga:e.dragNode.parentOrga,orgaName:e.dragNode.orgaName,orgaId:r,sort:i,dirId:e.dragNode.dirId}]};R(o).then((function(e){a()}))},defaultSelectedKeys:["111111"],treeData:function(e){var t=[];return function e(t,r){t.forEach((function(t,n){var a={key:t.orgaId,orgaName:t.orgaName,title:$(t),sort:t.sort,dirId:t.dirId,parentOrga:t.parentOrga,children:[]};r.push(a),t.children&&t.children.length>0&&e(t.children,r[n].children)}))}(e,t),t}((0,h.toJS)(t)),onSelect:function(e,t){var n=t.node,a={orgaName:n.orgaName,parentOrga:n.parentOrga,sort:n.sort,orgaId:n.key,dirId:n.dirId,path:n.path};r(a)},defaultExpandAll:!0}))),y.default.createElement(w.default,{visible:U,cancelAddOrg:function(){M(!1),F({}),G(!1)},editData:z,isEdit:W,getAllTree:a,userDir:V}))};t.default=S},764:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(187)),u=(n(r(0)),r(34)),i=r(170),l=["code","disabled","systemRoleStore"],o=(0,u.inject)(i.SYSTEM_ROLE_STORE)((0,u.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=(e.disabled,e.systemRoleStore),u=(0,a.default)(e,l),i=n.systemPermissions;try{return i.includes(r)?u.children:null}catch(e){return i.includes(r)?u.children:null}})));t.default=o},765:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(127);var u=n(r(36));r(647);var i=n(r(593));r(79);var l=n(r(26)),o=n(r(52));r(116);var c=n(r(20)),f=n(r(129)),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),s=r(2),p=r(34),m=r(6),v=r(47),g=r(444),b=r(170);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var E=(0,p.inject)(b.ORG_STORE)((0,p.observer)((function(e){var t=e.visible,r=e.cancelAddOrg,n=e.editData,a=void 0===n?{}:n,o=e.isEdit,p=void 0!==o&&o,b=e.getAllTree,y=e.userDir,h=void 0===y?[]:y,E=e.orgStore.findOrgaTreeAction,w=c.default.useForm(),P=(0,f.default)(w,1)[0],j=(0,v.useTranslation)().t,k=(0,d.useState)(null),S=(0,f.default)(k,2),_=S[0],D=S[1],R=(0,d.useState)([]),x=(0,f.default)(R,2),I=x[0],A=x[1];(0,d.useEffect)((function(){a&&(p?(P.setFieldsValue({parentOrga:a.parentOrga?a.parentOrga.orgaId:null,orgaName:a.orgaName,dirId:a.dirId}),D(a.path)):(P.setFieldsValue({parentOrga:a.orgaId}),a.path?D("".concat(a.orgaId,",").concat(a.path)):D("".concat(a.orgaId))))}),[a,p]),(0,d.useEffect)((function(){t&&E({dirId:"1"}).then((function(e){e.code||A(e.data)}))}),[t]);return d.default.createElement(g.BaseModal,{title:p?j("orga-common.edit")+j("orga-common.orga"):j("orga-common.add")+j("orga-common.orga"),visible:t,onOk:function(){P.submit()},onCancel:function(){P.resetFields(),r()},destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:j("orga-common.back"),okText:j("orga-common.save")},d.default.createElement(c.default,{form:P,onFinish:function(e){var t="/user/orga/createOrga",n={orgaName:e.orgaName,parentOrga:{orgaId:e.parentOrga},dirId:e.dirId,path:_};p&&(t="/user/orga/updateOrga",n=O(O({},n),{},{orgaId:a.orgaId})),m.Axios.post(t,n).then((function(e){e.code||(b(),P.resetFields(),r())}))},layout:"vertical"},d.default.createElement(c.default.Item,{label:j("orga-label.orgaName"),name:"orgaName",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},d.default.createElement(l.default,null)),d.default.createElement(c.default.Item,{label:j("orga-label.parentOrg"),name:"parentOrga"},d.default.createElement(i.default,{disabled:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:function(){var e=[];return function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={};if(t.orgaId===a.orgaId){if(u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:!0},r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}else u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:n},r.push(u);if(t.children&&t.children.length>0)return e(t.children,u.children=[],n)}))}((0,s.toJS)(I.filter((function(e){return!e.parentOrga}))),e),e}(),placeholder:j("orga-label.parentOrgPlaceholder"),treeDefaultExpandedKeys:[I.length>0&&I[0].orgaId],onChange:function(e,t,r){var n=r.triggerNode.props.path;D(n?"".concat(n,",").concat(e):e)}})),d.default.createElement(c.default.Item,{label:j("orga-label.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:j("orga-table.userTypeRequired")}]},d.default.createElement(u.default,{disabled:!0},h.map((function(e){return d.default.createElement(u.default.Option,{key:e.id,value:e.id},e.name)}))))))})));t.default=E},766:function(e,t,r){"use strict";r.r(t)},767:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(451));r(80);var i=n(r(35));r(81);var l=n(r(31)),o=n(r(313));r(49);var c=n(r(21));r(51);var f=n(r(19));r(168);var d=n(r(33)),s=n(r(312));r(46);var p=n(r(23)),m=n(r(129)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),g=r(34),b=r(47),y=n(r(491)),h=r(444),O=n(r(768)),E=r(170);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}r(769);var P=(0,g.inject)(E.ORG_STORE)((0,g.observer)((function(e){var t=e.data,r=e.tableData,n=e.pagination,a=e.orgId,g=e.parentOrgaId,E=e.getOrgaUser,w=e.restTableData,P=e.orgStore,j=P.deleteUserOrgaAction,k=P.findOpenUserDirListAction,S=(0,v.useMemo)((function(){return n}),[n]),_=(0,v.useState)(!1),D=(0,m.default)(_,2),R=D[0],x=D[1],I=(0,v.useState)([]),A=(0,m.default)(I,2),U=A[0],M=A[1],T=(0,b.useTranslation)().t;(0,v.useEffect)((function(){return C(),function(){return M([])}}),[]);var C=function(){k().then((function(e){e.code||M(e.data)}))},z=[{title:T("orga-table.nickname"),dataIndex:["user","nickname"],width:"25%",ellipsis:!0,render:function(e,t){return v.default.createElement(p.default,null,v.default.createElement(h.Profile,{userInfo:t}),e)}},{title:T("orga-table.name"),dataIndex:["user","name"],width:"25%",ellipsis:!0},{title:T("orga-table.orgaName"),dataIndex:["orga","orgaName"],width:"20%",ellipsis:!0},{title:T("orga-table.type"),dataIndex:["user","dirId"],width:"20%",ellipsis:!0,render:function(e){var t=U.findIndex((function(t){return t.id==e}));return t>-1?U[t].name:"--"}},{title:T("orga-common.action"),key:"action",width:"10%",ellipsis:!0,render:function(e,t){return"1"===t.user.dirId&&v.default.createElement(p.default,{size:"middle"},v.default.createElement(y.default,{code:"orga_delete_orga"},v.default.createElement(d.default,{title:"删除"},v.default.createElement(s.default,{onClick:function(){return F(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}],F=function(e){j(e).then((function(e){e.code||w(1)}))};return v.default.createElement("div",{className:"org-detail"},v.default.createElement(c.default,{style:{margin:"10px 0",paddingLeft:8}},v.default.createElement(f.default,{span:24},v.default.createElement(p.default,null,v.default.createElement("div",{className:"org-detail-item"},v.default.createElement("label",null,T("orga-label.orgaName"),":"),t.orgName),v.default.createElement("div",{className:"org-detail-item"},v.default.createElement("label",null,T("orga-label.parentOrg"),":"),t.parentOrg||"无上级")))),v.default.createElement(c.default,{style:{paddingLeft:8}},v.default.createElement(f.default,{span:24},v.default.createElement("div",{className:"org-detail_title2_main"},v.default.createElement("span",{className:"org-detail_user_title2"},"用户(",S.total,")"),v.default.createElement(y.default,{code:"orga_add_user"},v.default.createElement(l.default,{type:"primary",onClick:function(){x(!0)},disabled:"1"!==t.userDirType,icon:v.default.createElement(o.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},T("orga-label.addUser")))))),v.default.createElement(c.default,null,v.default.createElement("div",{className:"org-detail-table"},v.default.createElement(i.default,{columns:z,dataSource:r,pagination:S,rowKey:function(e){return e.id},tableLayout:"fixed"}))),v.default.createElement(O.default,(0,u.default)({},e,{orgId:a,parentOrgaId:g,visible:R,onCancel:function(){return x(!1)},getOrgaUser:E,dirId:t.dirId})))})));t.default=P},768:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35));r(49);var i=n(r(21));r(51);var l=n(r(19));r(79);var o=n(r(26)),c=n(r(315));r(46);var f=n(r(23));r(67);var d=n(r(18)),s=n(r(52)),p=n(r(129)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),v=r(34),g=r(444),b=r(6),y=r(47),h=r(170);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function E(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw u}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=(0,v.inject)(h.USER_STORE)((0,v.observer)((function(e){var t=(0,y.useTranslation)().t,r=e.visible,n=e.onCancel,a=e.orgId,s=e.getOrgaUser,v=e.userStore.findUserPageAction,h=(0,m.useState)([]),O=(0,p.default)(h,2),w=O[0],P=O[1],k=(0,m.useState)([]),S=(0,p.default)(k,2),_=S[0],D=S[1],R=(0,m.useState)(10),x=(0,p.default)(R,1)[0],I=(0,m.useState)(1),A=(0,p.default)(I,2),U=A[0],M=A[1],T=(0,m.useState)(0),C=(0,p.default)(T,2),z=C[0],F=C[1],L=(0,m.useState)({pageParam:{pageSize:x,currentPage:U}}),N=(0,p.default)(L,2),W=N[0],G=N[1],B=(0,m.useState)([]),K=(0,p.default)(B,2),V=K[0],J=K[1];(0,m.useEffect)((function(){return q(),function(){return J([])}}),[]),(0,m.useEffect)((function(){Y(j({},W))}),[W]);var q=function(){b.Axios.post("/user/userdir/findAllList").then((function(e){e.code||J(e.data)}))},Y=function(e){v(e).then((function(e){e.code||(F(e.data.totalRecord),D(e.data.dataList))}))},H=[{title:t("orga-table.name"),dataIndex:"nickname",key:"nickname",width:"30%",ellipsis:!0,render:function(e,t){return m.default.createElement(f.default,null,m.default.createElement(g.Profile,{userInfo:t}),e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"25%",ellipsis:!0},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"25%",ellipsis:!0},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){var t=V.findIndex((function(t){return t.id===e}));return t>-1?V[t].name:"--"}}],$={selectedRowKeys:w,onChange:function(e){P(e)}};return m.default.createElement(g.BaseModal,{title:"选择用户",visible:r,onOk:function(){(function(){var e={orgaId:a,pageParam:{pageSize:9999999,currentPage:1}};return b.Axios.post("/user/userOrga/findUserOrgaList",e)})().then((function(e){if(!e.code){var t,r=!1,u=e.data.map((function(e){return e.user.id})),i=E(w);try{var l=function(){var e=t.value;if(r)return"break";r=u.some((function(t){return e===t}))};for(i.s();!(t=i.n()).done;){if("break"===l())break}}catch(e){i.e(e)}finally{i.f()}if(r)return d.default.error("存在关联的用户");var o=w.map((function(e){return t={user:{id:e},orga:{orgaId:a}},b.Axios.post("/user/userOrga/createUserOrga",t);var t}));Promise.all(o).then((function(e){G({pageParam:{pageSize:x,currentPage:1}}),P([]),M(1),F(0),n(),s({orgaId:a},1)}))}}))},onCancel:function(){G({pageParam:{pageSize:x,currentPage:1}}),P([]),M(1),F(0),n(),s({orgaId:a},1)},width:800,destroyOnClose:!0,okText:t("orga-common.save"),cancelText:t("orga-common.back")},m.default.createElement(i.default,{style:{paddingBottom:16}},m.default.createElement(l.default,{span:24},m.default.createElement(o.default,{placeholder:"搜索账号、手机号、邮箱",style:{width:240},onPressEnter:function(e){return function(e){var t=e.target.value,r=j(j({},W),{},{name:t,pageParam:{pageSize:x,currentPage:1}});G(r)}(e)},prefix:m.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})}))),m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement("div",{style:{width:"100%"}},m.default.createElement(u.default,{columns:H,dataSource:_,rowSelection:$,rowKey:function(e){return e.id},pagination:{current:U,pageSize:x,total:z,onChange:function(e){M(e);var t=j(j({},W),{},{pageParam:{pageSize:x,currentPage:e}});G(t)}}})))))})));t.default=k},769:function(e,t,r){"use strict";r.r(t)},770:function(e,t,r){"use strict";r.r(t)},771:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(772)).default;t.default=a},772:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38)),i=n(r(451));r(51);var l=n(r(19));r(80);var o=n(r(35));r(49);var c=n(r(21));r(79);var f=n(r(26)),d=n(r(315));r(127);var s=n(r(36));r(81);var p=n(r(31)),m=n(r(313)),v=n(r(312));r(168);var g=n(r(33)),b=n(r(317));r(46);var y=n(r(23)),h=n(r(52)),O=n(r(117)),E=n(r(129)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),P=r(34),j=r(2),k=r(6),S=r(47),_=n(r(491)),D=r(444),R=n(r(773)),x=r(257),I=n(r(545));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,h.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(774);var T=(0,P.inject)(x.USER_STORE)((0,P.observer)((function(e){var t=e.userStore,r=e.SASSComponentSearch,n=e.saasRefresh,a=void 0!==n&&n,h=e.setSaasRefreshStatus,P=e.bgroup,x=void 0===P?"eas":P,A=e.router,U=void 0===A?"/setting/userList":A,T=t.userData,C=t.getUserList,z=t.editUser,F=t.addUser,L=t.deleteUser,N=t.findRoleUserListAction,W=t.findUserPageAction,G=t.findUserOrgaList,B=t.findUserDirList,K=t.deleteUserAction,V=(0,S.useTranslation)().t,J=(0,w.useState)(!1),q=(0,E.default)(J,2),Y=q[0],H=q[1],$=(0,w.useState)(!1),Z=(0,E.default)($,2),Q=Z[0],X=Z[1],ee=(0,w.useState)({}),te=(0,E.default)(ee,2),re=te[0],ne=te[1],ae=(0,w.useState)(10),ue=(0,E.default)(ae,1)[0],ie=(0,w.useState)(1),le=(0,E.default)(ie,2),oe=le[0],ce=le[1],fe=(0,w.useState)(0),de=(0,E.default)(fe,2),se=de[0],pe=de[1],me=(0,w.useState)({pageParam:{pageSize:ue,currentPage:oe}}),ve=(0,E.default)(me,2),ge=ve[0],be=ve[1],ye=(0,w.useState)(""),he=(0,E.default)(ye,2),Oe=he[0],Ee=he[1],we=(0,w.useState)([]),Pe=(0,E.default)(we,2),je=Pe[0],ke=Pe[1],Se=localStorage.getItem(k.LOCALSTORAGE_KEY.AUTH_CONFIG);if(Se){var _e=JSON.parse(Se);if(!_e.authType&&-1===_e.appName.indexOf("eas")){var De=_e.authUrl+"/#"+U;return w.default.createElement(I.default,{module:"用户",link:De})}}var Re=(0,w.useRef)(null);(0,w.useEffect)((function(){return Re.current=!0,Ae(ge),function(){return Re.current=!1}}),[ge]),(0,w.useEffect)((0,O.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ie();case 2:return e.abrupt("return",(function(){return ke([])}));case 3:case"end":return e.stop()}}),e)}))),[]),(0,w.useEffect)((function(){a&&xe()}),[a]);var xe=function(){Ae(ge),h()},Ie=function(){B().then((function(e){e.code||ke(e.data)}))},Ae=function(e){W(e).then(function(){var e=(0,O.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code||!Re.current){e.next=6;break}return pe(t.data.totalRecord),e.next=4,Promise.all(Ue(t.data.dataList));case 4:r=e.sent,C(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ue=function(e){return e.map(function(){var e=(0,O.default)(u.default.mark((function e(t){var r,n,a,i,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],a={userId:t.id,scope:1,type:1},e.next=4,N(a);case 4:return i=e.sent,e.next=7,G(a);case 7:return l=e.sent,0===i.code&&i.data&&(r=i.data.map((function(e){return M(M({},e.role),{},{roleUserId:e.id})})).filter((function(e){return"1"===e.type&&1===e.scope}))),0===l.code&&l.data&&(n=l.data.slice(-1).map((function(e){return M(M({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",M(M({},t),{},{roleList:r,orgaList:n}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Me=[{title:V("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return w.default.createElement(y.default,null,w.default.createElement(D.Profile,{userInfo:t}),e)}},{title:V("orga-table.name"),dataIndex:"name",key:"name",width:"15%",ellipsis:!0},{title:V("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?w.default.createElement(y.default,null,r.map((function(e){return w.default.createElement("span",{key:e.orgaId},e.name)}))):"--"}},{title:"角色",dataIndex:"role",key:"role",width:"20%",ellipsis:!0,render:function(e,t){var r=t.roleList;return r.length>0?w.default.createElement(y.default,null,r.map((function(e){return w.default.createElement("span",{key:e.id},e.name)}))):"--"}},{title:V("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"15%",ellipsis:!0,render:function(e){if("0"===e)return"个人账号";var t=je.findIndex((function(t){return t.id===e}));return t>-1?je[t].name:"--"}},{title:V("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.dirId;if(t.type<1)return w.default.createElement(w.default.Fragment,null,"1"===r?w.default.createElement(y.default,{size:"middle"},w.default.createElement(_.default,{code:"user_update_user"},"admin"!==t.name&&w.default.createElement(g.default,{title:"编辑"},w.default.createElement(b.default,{onClick:function(){return Ce(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),w.default.createElement(_.default,{code:"user_delete_user"},"admin"!==t.name&&w.default.createElement(g.default,{title:"删除"},w.default.createElement(v.default,{onClick:function(){return Te(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))):w.default.createElement(y.default,{size:"middle"},w.default.createElement(_.default,{code:"user_update_user"},w.default.createElement(g.default,{title:"编辑"},w.default.createElement(b.default,{onClick:function(){return Ce(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))))}}],Te=function(e){var t=new FormData;t.append("id",e),K(t).then((function(t){t.code||L(e)}))},Ce=function(e){ne(e),H(!0),X(!0)};return w.default.createElement("div",{className:"user_content"},w.default.createElement("div",{className:"user-detail"},w.default.createElement(D.TitleAction,{title:"用户",style:{paddingLeft:8}},w.default.createElement(y.default,null,w.default.createElement(_.default,{code:"user_add_user"},w.default.createElement(p.default,{type:"primary",onClick:function(){return H(!0)},icon:w.default.createElement(m.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},V("orga-label.addUser"))),r)),w.default.createElement(c.default,{justify:"space-between",style:{marginBottom:16,paddingLeft:8}},w.default.createElement(y.default,null,w.default.createElement(s.default,{placeholder:"用户目录",onSelect:function(e){ce(1);var t=M(M({},ge),{},{pageParam:{pageSize:ue,currentPage:1}});"-1"!==e?t.dirId=e:delete t.dirId,be(t)},style:{width:"240px"},defaultValue:"-1"},w.default.createElement(s.default.Option,{key:"-1",value:"-1"},"用户目录"),je.map((function(e){return w.default.createElement(s.default.Option,{key:e.id,value:e.id},e.name)}))),w.default.createElement(f.default,{placeholder:V("orga-label.searchUserAccount"),value:Oe,onChange:function(e){return Ee(e.target.value)},onPressEnter:function(e){return function(e){ce(1);var t=M(M({},ge),{},{pageParam:{pageSize:ue,currentPage:1}});e.target.value?t.name=e.target.value:delete t.name,be(t)}(e)},style:{width:"240px"},prefix:w.default.createElement(d.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})}))),w.default.createElement(c.default,null,w.default.createElement(l.default,{span:24},w.default.createElement(o.default,{columns:Me,dataSource:T,rowKey:function(e){return e.id},pagination:{current:oe,pageSize:ue,total:se,showSizeChanger:!1,position:["bottomCenter"]},onChange:function(e,t,r){return function(e,t,r){var n=[];ce(e.current),Array.isArray(r)?n=r.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):r.field&&n.push({name:r.field,sortType:void 0!==r.order?"ascend"===r.order?"asc":"desc":void 0});var a=M(M({},ge),{},{orderParams:n,pageParam:{pageSize:ue,currentPage:e.current}});be(a)}(e,0,r)}}))),w.default.createElement(R.default,(0,i.default)({},e,{visible:Y,onCancel:function(){ne({}),X(!1),H(!1),Ae(ge)},addUser:F,isEdit:Q,data:(0,j.toJS)(re),editUser:z,getList:Ae,listParams:ge,userDir:je,bgroup:x}))))})));t.default=T},773:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(521);var i=n(r(511));r(81);var l=n(r(31));r(127);var o=n(r(36));r(79);var c=n(r(26));r(67);var f=n(r(18)),d=n(r(52)),s=n(r(187)),p=n(r(117));r(116);var m=n(r(20)),v=n(r(129)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),b=r(47),y=["role"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(e){var t=e.visible,r=e.onCancel,n=e.isEdit,a=void 0!==n&&n,d=e.data,h=void 0===d?{}:d,O=e.userDir,w=void 0===O?[]:O,P=e.bgroup,j=e.userStore,k=j.createRoleUserAction,S=j.createUserAction,_=j.deleteRoleUserAction,D=j.findRolePageAction,R=j.updateUserAction,x=m.default.useForm(),I=(0,v.default)(x,1)[0],A=(0,b.useTranslation)().t,U=(0,g.useState)(1),M=(0,v.default)(U,2),T=M[0],C=M[1],z=(0,g.useState)(10),F=(0,v.default)(z,1)[0],L=(0,g.useState)([]),N=(0,v.default)(L,2),W=N[0],G=N[1],B=(0,g.useState)(0),K=(0,v.default)(B,2),V=K[0],J=K[1];(0,g.useEffect)((function(){a&&(I.setFieldsValue({nickname:h.nickname}),I.setFieldsValue({name:h.name}),I.setFieldsValue({phone:h.phone}),I.setFieldsValue({email:h.email}),I.setFieldsValue({password:h.password}),I.setFieldsValue({dirId:String(h.dirId)}),I.setFieldsValue({role:(h.roleList||[]).map((function(e){return e.id}))}))}),[a,h]),(0,g.useEffect)((function(){q({pageParam:{pageSize:F,currentPage:T},bgroup:P})}),[]);var q=function(e){D(e).then((function(t){if(0===t.code){var r=W.concat(t.data.dataList);G(r),r.length>0&&I.setFieldsValue({role:[r[0].id]}),J(t.data.totalRecord),C(e.pageParam.currentPage)}}))},Y=function(){I.resetFields(),r()},H=function(){var e=(0,p.default)(u.default.mark((function e(t){var r,n,i,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.role,n=(0,s.default)(t,y),i=E(E({},n),{},{type:0,dirId:"1"}),!a){e.next=9;break}return i=E(E({},n),{},{id:h.id,type:h.type,dirId:h.dirId}),e.next=6,R(i);case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,S(i);case 11:l=e.sent;case 12:0===l.code?a?$(r):Q(r,l.data):f.default.error(l.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(e){var t=(h.roleList||[]).map((function(e){return e.id})),r=(h.roleList||[]).reduce((function(e,t,r){return e[t.id]=t.roleUserId,e}),{}),n=t.reduce((function(t,n,a){return e.includes(n)||t.push(r[n]),t}),[]),a=e.reduce((function(e,r,n){return t.includes(r)||e.push(r),e}),[]);0===n.length?Q(a,h.id):Z(n).then((function(){Q(a,h.id)}))},Z=function(e){var t=e.map((function(e){return _(e)}));return Promise.all(t)},Q=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){return k({userId:t,role:{id:e}})}));Promise.all(r).then((function(e){Y()}))}else{k({userId:t,role:{id:e}}).then((function(e){0===e.code&&Y()}))}},X=function(e,t){var r=I.getFieldValue,n=I.setFieldsValue,a=r("phone"),u=r("email"),i=r("name");if(t)switch(e.field){case"name":n({phone:a}),n({email:u});break;case"phone":n({name:i}),n({email:u});break;default:n({name:i}),n({phone:a})}else switch(e.field){case"name":if(!a&&!u)return Promise.reject("账号、邮箱、手机号不能同时为空");break;case"phone":if(!i&&!u)return Promise.reject("账号、邮箱、手机号不能同时为空");break;default:if(!i&&!a)return Promise.reject("账号、邮箱、手机号不能同时为空")}return Promise.resolve()};return g.default.createElement(i.default,{placement:"right",onClose:Y,visible:t,width:420,title:A(a?"adduser-module.editUser":"adduser-module.addUser"),bodyStyle:{padding:0},style:{top:48,height:"calc(100% - 48px)"},getContainer:!1},g.default.createElement("div",{className:"tiklab_user"},g.default.createElement("div",{className:"tiklab_user_form"},g.default.createElement(m.default,{form:I,onFinish:H,preserve:!1,layout:"vertical"},g.default.createElement(m.default.Item,{label:A("adduser-module.nickname"),name:"nickname",rules:[{required:!0,message:A("adduser-module.nicknameRequired")}]},g.default.createElement(c.default,{id:"user-add-nickname",disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:A("adduser-module.name"),name:"name",rules:"1"===h.dirId?[{pattern:/^[a-zA-Z0-9_-]{4,16}$/,message:"账号长度4-16位(字母，数字，下划线，减号)"},{validator:X}]:[{validator:X}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:A("adduser-module.phone"),name:"phone",rules:[{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码不正确"},{validator:X}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:A("adduser-module.email"),name:"email",rules:[{type:"email",message:A("adduser-module.emailFormat")},{validator:X}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),!a&&g.default.createElement(m.default.Item,{label:A("adduser-module.password"),name:"password",rules:[{required:!0,message:A("adduser-module.passwordRequired")}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:A("adduser-module.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:A("adduser-module.userTypeRequired")}]},g.default.createElement(o.default,{disabled:!0},w.map((function(e){return g.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)})))),g.default.createElement(m.default.Item,{label:"角色",name:"role",initialValue:W.length>0?[W[0].id]:[],rules:[{required:!0,message:A("adduser-module.userTypeRequired")}]},g.default.createElement(o.default,{mode:"multiple",onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&(T*F<V&&q({pageParam:{pageSize:F,currentPage:T+1}}))}},W.map((function(e){return g.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)})))))),g.default.createElement("div",{className:"tiklab_user_footer"},g.default.createElement(l.default,{type:"primary",onClick:function(){I.submit()}},A("orga-common.save")))))},P=(0,g.memo)(w);t.default=P},774:function(e,t,r){"use strict";r.r(t)},775:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(776)).default;t.default=a},776:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(80);var i=n(r(35));r(49);var l=n(r(21));r(51);var o=n(r(19));r(81);var c=n(r(31)),f=n(r(313)),d=n(r(312));r(168);var s=n(r(33)),p=n(r(317));r(46);var m=n(r(23));r(253);var v=n(r(133)),g=n(r(129)),b=n(r(117)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),h=r(47),O=n(r(777)),E=n(r(778)),w=n(r(491)),P=r(444);r(780);var j=r(6);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}var S=function(){var e=(0,b.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,j.Axios.post("/usergroup/deleteGroup",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,b.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=e.isBase,r=void 0!==t&&t,n=(0,h.useTranslation)().t,a=(0,y.useState)(!1),j=(0,g.default)(a,2),k=j[0],D=j[1],R=(0,y.useState)(null),x=(0,g.default)(R,2),I=x[0],A=x[1],U=(0,y.useState)([]),M=(0,g.default)(U,2),T=M[0],C=M[1],z=(0,y.useState)(!1),F=(0,g.default)(z,2),L=F[0],N=F[1],W=(0,y.useState)(null),G=(0,g.default)(W,2),B=G[0],K=G[1],V=[{title:"用户组",dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e,t){var r=t.type;return y.default.createElement(m.default,null,y.default.createElement("a",{onClick:function(){return $(t)}},e),1===r&&y.default.createElement(v.default,null,"管理员组"))}},{title:"类型",dataIndex:"group",key:"group",width:"20%",ellipsis:!0,render:function(e,t){return"system"===e?"内置":"自定义"}},{title:"成员数",dataIndex:"userNum",key:"userNum",width:"20%",ellipsis:!0},{title:n("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return y.default.createElement(m.default,{size:"middle"},1!==r&&y.default.createElement(w.default,{code:"user_update_group"},y.default.createElement(s.default,{title:"编辑"},y.default.createElement(p.default,{onClick:function(){return q(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),1!==r&&y.default.createElement(w.default,{code:"user_delete_group"},y.default.createElement(s.default,{title:"删除"},y.default.createElement(d.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}];(0,y.useEffect)((function(){J()}),[]);var J=function(){var e=(0,b.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:0===(t=e.sent).code&&C(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(e){A(e),D(!0)},Y=function(){var e=(0,b.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(t);case 2:return e.next=4,J();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=(0,b.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(null),D(!1),e.next=4,J();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(e){K(e),N(!0)},Z=function(){var e=(0,b.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(null),N(!1),e.next=4,J();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y.default.createElement("div",{className:"tiklab_userGroup"},L?y.default.createElement(E.default,{onCancel:Z,groupData:B}):y.default.createElement("main",{className:"tiklab_userGroup_main"},y.default.createElement(l.default,null,y.default.createElement(o.default,{span:24},y.default.createElement(P.TitleAction,{title:"用户组",style:{paddingLeft:8}},y.default.createElement(w.default,{code:"user_add_group"},y.default.createElement(c.default,{onClick:function(){D(!0)},type:"primary",icon:y.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},"新增组"))))),y.default.createElement(l.default,null,y.default.createElement(o.default,{span:24},y.default.createElement(i.default,{columns:V,dataSource:T,rowKey:function(e){return e.id},pagination:!1})))),y.default.createElement(O.default,{open:k,onCancel:H,data:I,isBase:r}))};t.default=D},777:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(562);var i=n(r(534));r(79);var l=n(r(26));r(67);var o=n(r(18)),c=n(r(52));r(116);var f=n(r(20)),d=n(r(129)),s=n(r(117)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),m=r(6),v=r(444),g=r(47);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var O=function(){var e=(0,s.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Axios.post("/usergroup/createGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.Axios.post("/usergroup/updateGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){var t=e.isBase,r=e.open,n=e.data,a=e.onCancel,c=f.default.useForm(),m=(0,d.default)(c,1)[0],b=(0,g.useTranslation)().t;(0,p.useEffect)((function(){n&&(m.setFieldsValue({name:n.name}),m.setFieldsValue({description:n.description}),m.setFieldsValue({type:n.type}))}),[n]);var y=function(){m.resetFields(),a()},w=function(){var e=(0,s.default)(u.default.mark((function e(r){var a,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=h(h({},r),{},{group:t?"system":"custom"}),!n){e.next=8;break}return i=h(h({},n),i),e.next=5,E(i);case 5:a=e.sent,e.next=11;break;case 8:return e.next=10,O(i);case 10:a=e.sent;case 11:0===a.code?(o.default.success("成功"),y()):o.default.error("失败");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.default.createElement(v.BaseModal,{title:"用户组",visible:r,onOk:function(){m.submit()},onCancel:y,destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:b("orga-common.back"),okText:b("orga-common.save")},p.default.createElement(f.default,{form:m,onFinish:w,layout:"vertical"},p.default.createElement(f.default.Item,{label:"用户组名称",name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},p.default.createElement(l.default,{placeholder:"用户组名称"})),t&&p.default.createElement(f.default.Item,{label:"设置管理员组",name:"type",initialValue:0},p.default.createElement(i.default.Group,null,p.default.createElement(i.default,{value:0},"普通组"),p.default.createElement(i.default,{value:1},"管理员组"))),p.default.createElement(f.default.Item,{label:"描述",name:"description"},p.default.createElement(l.default,{placeholder:"用户组名称"}))))};t.default=w},778:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(80);var i=n(r(35));r(49);var l=n(r(21));r(51);var o=n(r(19));r(81);var c=n(r(31)),f=n(r(228)),d=n(r(52)),s=n(r(129));r(168);var p=n(r(33)),m=n(r(312));r(46);var v=n(r(23)),g=n(r(117)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),y=r(6),h=r(47),O=n(r(779)),E=n(r(491)),w=r(444);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(){var e=(0,g.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,y.Axios.post("/usergroupUser/deleteUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,g.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.Axios.post("/usergroupUser/findUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(e){var t=e.onCancel,r=e.groupData,n=(0,h.useTranslation)().t,a=[{title:"昵称",dataIndex:"nickname",render:function(e,t){return b.default.createElement(v.default,null,b.default.createElement(w.Profile,{userInfo:t}),e)}},{title:"账号",dataIndex:"name"},{title:n("orga-table.email"),dataIndex:"email",render:function(e){return e||"--"}},{title:n("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return b.default.createElement(v.default,{size:"middle"},1!==r&&b.default.createElement(E.default,{code:"user_delete_group_user"},b.default.createElement(p.default,{title:"删除"},b.default.createElement(m.default,{onClick:function(){return T(t.groupUserLinkUserId)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}],u=(0,b.useState)([]),d=(0,s.default)(u,2),g=d[0],y=d[1],P=(0,b.useState)(!1),j=(0,s.default)(P,2),D=j[0],R=j[1],x=(0,b.useState)([]),I=(0,s.default)(x,2),A=I[0],U=I[1];(0,b.useEffect)((function(){r&&M()}),[r]);var M=function(){var e={groupId:r.id};_(e).then((function(e){if(0===e.code){var t=e.data.map((function(e){return k(k({},e.user),{},{groupUserLinkUserId:e.id})})),r=t.map((function(e){return e.id}));U(r),y(t)}}))},T=function(e){S(e).then((function(e){M()}))};return b.default.createElement("main",{className:"tiklab_userGroup_main"},b.default.createElement(l.default,null,b.default.createElement(o.default,{span:24},b.default.createElement(w.TitleAction,{title:r.name,icon:b.default.createElement(c.default,{type:"link",icon:b.default.createElement(f.default,null),onClick:t})}))),b.default.createElement(l.default,null,b.default.createElement(v.default,null,b.default.createElement("div",{className:"label_item"},b.default.createElement("label",null,"名称:"),b.default.createElement("span",null,r.name)),b.default.createElement("div",{className:"label_item"},b.default.createElement("label",null,"类型:"),b.default.createElement("span",null,"system"===r.group?"内置":"自定义")))),b.default.createElement(v.default,{direction:"vertical",size:"middle"},b.default.createElement(l.default,{justify:"space-between"},b.default.createElement(w.TitleAction,{title:"用户(".concat(g.length,")")}),b.default.createElement(E.default,{code:"user_add_group_user"},b.default.createElement(c.default,{type:"primary",onClick:function(){R(!0)}},"添加用户"))),b.default.createElement(i.default,{columns:a,dataSource:g,rowKey:function(e){return e.id},pagination:!1})),b.default.createElement(O.default,{open:D,onCancel:function(){R(!1),M()},defaultSelectedRowKeys:A,userGroupId:r.id,groupUserType:r.type}))};t.default=D},779:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(80);var i=n(r(35));r(49);var l=n(r(21));r(51);var o=n(r(19));r(79);var c=n(r(26)),f=n(r(315));r(67);var d=n(r(18)),s=n(r(52));r(46);var p=n(r(23)),m=n(r(129)),v=n(r(117)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=w(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),b=r(47),y=r(444),h=r(6),O=r(34),E=r(257);function w(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(w=function(e){return e?r:t})(e)}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var k=function(){var e=(0,v.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.Axios.post("/usergroupUser/createBatchUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=(0,O.inject)(E.USER_STORE)((0,O.observer)((function(e){var t=e.open,r=e.onCancel,n=e.defaultSelectedRowKeys,a=e.userGroupId,s=e.groupUserType,h=void 0===s?0:s,O=e.userStore,E=O.findUserPageAction,w=O.findUserOrgaList,P=(0,b.useTranslation)().t,S=(0,g.useState)(""),_=(0,m.default)(S,2),D=_[0],R=_[1],x=(0,g.useState)([]),I=(0,m.default)(x,2),A=I[0],U=I[1],M=(0,g.useState)([]),T=(0,m.default)(M,2),C=T[0],z=T[1],F=(0,g.useState)(0),L=(0,m.default)(F,2),N=L[0],W=L[1],G=(0,g.useState)(10),B=(0,m.default)(G,1)[0],K=(0,g.useState)(1),V=(0,m.default)(K,2),J=V[0],q=V[1],Y=(0,g.useState)({pageParam:{pageSize:B,currentPage:J}}),H=(0,m.default)(Y,2),$=H[0],Z=H[1],Q=[{title:P("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return g.default.createElement(p.default,null,g.default.createElement(y.Profile,{userInfo:t}),e)}},{title:P("orga-table.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:P("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:P("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0,render:function(e){return e||"--"}},{title:P("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0,render:function(e,t){var r=t.orgaList;return r.length>0?g.default.createElement(p.default,null,r.map((function(e){return g.default.createElement("span",{key:e.id},e.name)}))):"--"}}],X=(0,g.useRef)(null);(0,g.useEffect)((function(){return X.current=!0,ee($),function(){X.current=!1}}),[$]),(0,g.useEffect)((function(){n&&U(n)}),[n]);var ee=function(e){E(e).then(function(){var e=(0,v.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code||!X.current){e.next=6;break}return W(t.data.totalRecord),e.next=4,Promise.all(te(t.data.dataList));case 4:r=e.sent,z(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},te=function(e){return e.map(function(){var e=(0,v.default)(u.default.mark((function e(t){var r,n,a;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],n={userId:t.id,scope:1,type:1},e.next=4,w(n);case 4:return 0===(a=e.sent).code&&a.data&&(r=a.data.slice(-1).map((function(e){return j(j({},e.orga),{},{orgaUserId:e.id})}))),e.abrupt("return",j(j({},t),{},{orgaList:r}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},re=function(){r()},ne={preserveSelectedRowKeys:!0,selectedRowKeys:A,onChange:function(e){U(e)},getCheckboxProps:function(e){var t=e.type;e.id;return A.includes(e.id)&&t>0&&h>0?{disabled:!0}:{disabled:!1}}};return g.default.createElement(y.BaseModal,{title:"添加用户",visible:t,onOk:function(){k({userGroup:{id:a},userIds:A}).then((function(e){if(0!==e.code)return d.default.error(e.msg);re()}))},onCancel:re,width:1200,destroyOnClose:!0,cancelText:P("orga-common.back"),okText:P("orga-common.save")},g.default.createElement(l.default,null,g.default.createElement(o.default,{span:24},g.default.createElement(c.default,{placeholder:"账号搜索",prefix:g.default.createElement(f.default,null),style:{width:240},value:D,onChange:function(e){return R(e.target.value)},onPressEnter:function(e){return function(e){var t=e.target.value,r=j(j({},$),{},{nickname:t,pageParam:{pageSize:B,currentPage:1}});q(1),Z(r)}(e)}}))),g.default.createElement(l.default,null,g.default.createElement(o.default,{span:24},g.default.createElement("div",{style:{width:"100%"}},g.default.createElement(i.default,{columns:Q,dataSource:C,rowSelection:ne,rowKey:function(e){return e.id},pagination:{current:J,pageSize:B,total:N,onChange:function(e){q(e);var t=j(j({},$),{},{pageParam:{pageSize:B,currentPage:e}});Z(t)},position:["bottomCenter"]}})))))})));t.default=S},780:function(e,t,r){"use strict";r.r(t)},781:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(782)).default;t.default=a},782:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38)),i=n(r(451));r(49);var l=n(r(21));r(51);var o=n(r(19));r(80);var c=n(r(35)),f=n(r(313)),d=n(r(117)),s=n(r(312));r(168);var p=n(r(33)),m=n(r(319));r(46);var v=n(r(23));r(253);var g=n(r(133));r(81);var b=n(r(31)),y=n(r(129)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=k(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),O=r(34),E=r(47),w=r(170),P=r(783),j=r(444);function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(k=function(e){return e?r:t})(e)}r(786);var S=(0,O.inject)(w.PRIVILEGE_DOMAIN_ROLE_STORE)((0,O.observer)((function(e){var t=(0,E.useTranslation)().t,r=e.privilegeDomainRoleStore,n=e.domainId,a=r.privilegeDomainRole,O=r.deleteDomainRoleAction,w=r.findDomainRoleListAction,k=r.setDomainRoleAction,S=(0,h.useState)(!1),_=(0,y.default)(S,2),D=_[0],R=_[1],x={domainId:n,sopce:2},I=(0,h.useState)(x),A=(0,y.default)(I,1)[0],U=(0,h.useState)(null),M=(0,y.default)(U,2),T=M[0],C=M[1],z=[{title:"角色名称",dataIndex:"name",width:"60%",ellipsis:!0,render:function(e,t){var r=t.businessType,n=t.role;return 1===r&&1===n.defaultRole?h.default.createElement(v.default,null,h.default.createElement(b.default,{type:"link",onClick:function(){return N(t)}},n.name),h.default.createElement(g.default,{color:"#87d068"},"默认"),h.default.createElement(g.default,null,"管理员")):1===n.defaultRole?h.default.createElement(v.default,null,h.default.createElement(b.default,{type:"link",onClick:function(){return N(t)}},n.name),h.default.createElement(g.default,{color:"#87d068"},"默认")):1===r?h.default.createElement(v.default,null,h.default.createElement(b.default,{type:"link",onClick:function(){return N(t)}},n.name),h.default.createElement(g.default,null,"管理员")):h.default.createElement(b.default,{type:"link",onClick:function(){return N(t)}},n.name)}},{title:"角色类型",dataIndex:"group",width:"20%",ellipsis:!0,render:function(e){return W(e)}},{title:"操作",dataIndex:"action",render:function(e,t){var r=t.role,n=t.businessType,a=t.id;return h.default.createElement(v.default,null,0===(null==r?void 0:r.defaultRole)&&h.default.createElement(p.default,{title:"设置默认"},h.default.createElement(m.default,{onClick:function(){return F(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),(0===n||"system"!==r.group)&&h.default.createElement(p.default,{title:"删除"},h.default.createElement(s.default,{onClick:function(){return B(a)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,h.useEffect)((function(){(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(A);case 2:case"end":return e.stop()}}),e)})))(),L(A)}),[A]);var F=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(t);case 2:if(e.sent.code){e.next=6;break}return e.next=6,L(A);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){C(e)},W=function(e){switch(e){case"system":return"内置";case"custom":default:return t("privilege-role.custom")}},G=function(){var e=(0,d.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return R(!1),e.next=3,L(A);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:if(e.sent.code){e.next=6;break}return e.next=6,L(A);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return h.default.createElement("div",{className:"tiklab_domain_role"},T?h.default.createElement(P.DmRoleDetail,{roleDetailParams:T,domainId:n,close:function(){C(null)}}):h.default.createElement("div",{className:"tiklab_domain_role_table"},h.default.createElement(j.TitleAction,{title:"项目域角色列表",style:{paddingLeft:8}},h.default.createElement(b.default,{onClick:function(){R(!0)},type:"primary",icon:h.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},t("privilege-role.addRole"))),h.default.createElement(l.default,null,h.default.createElement(o.default,{span:24},h.default.createElement(c.default,{columns:z,dataSource:a,rowKey:function(e){return e.id},pagination:!1})))),h.default.createElement(P.DmRoleCreate,(0,i.default)({},e,{visible:D,domainId:n,handleCancel:G})))})));t.default=S},783:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DmRoleCreate",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"DmRoleDetail",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"DmRolePeople",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"DomainRolePromise",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"DomainRoleUserCreate",{enumerable:!0,get:function(){return o.default}});var a=n(r(784)),u=n(r(785)),i=n(r(596)),l=n(r(594)),o=n(r(595))},784:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(79);var a=n(r(26)),u=n(r(52));r(116);var i=n(r(20)),l=n(r(129)),o=n(r(0)),c=r(47),f=r(444);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){(0,u.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var p=function(e){var t=e.visible,r=e.handleCancel,n=e.domainId,u=e.privilegeDomainRoleStore.createDomainRoleAction,d=(0,c.useTranslation)().t,p=i.default.useForm(),m=(0,l.default)(p,1)[0];return o.default.createElement(f.BaseModal,{title:"新增项目域角色",visible:t,onOk:function(){m.submit()},onCancel:r,destroyOnClose:!0,cancelText:d("privilege-common.cancel"),okText:d("privilege-common.save")},o.default.createElement(i.default,{form:m,preserve:!1,onFinish:function(e){var t={domainId:n,businessType:0,role:s({},e)};u(t).then((function(e){0===e.code&&r()}))},layout:"vertical"},o.default.createElement(i.default.Item,{label:d("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},o.default.createElement(a.default,{placeholder:d("privilege-role.roleName")})),o.default.createElement(i.default.Item,{label:d("privilege-desc"),name:"desc"},o.default.createElement(a.default,{placeholder:d("privilege-desc")}))))};t.default=p},785:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(451));r(46);var u=n(r(23));r(49);var i=n(r(21));r(51);var l=n(r(19));r(256);var o=n(r(135)),c=n(r(0)),f=r(47),d=n(r(594)),s=n(r(596)),p=r(444),m=o.default.TabPane,v=function(e){var t=(0,f.useTranslation)().t,r=e.roleDetailParams,n=e.domainId,v=e.bgroup,g=[{click:e.close,breadcrumbName:"项目域角色"},{path:"first",breadcrumbName:r.role.name||"角色详情"}];return c.default.createElement("div",{className:"tiklab_domain_role_detail"},c.default.createElement(i.default,null,c.default.createElement(l.default,{span:24},c.default.createElement(p.BreadCrumb,{routes:g}))),c.default.createElement(i.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,r.role.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===r.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(m,{tab:t("privilege-role.people"),key:"people"},c.default.createElement(d.default,(0,a.default)({},e,{group:r.group,dmRoleDetail:r,domainId:n,bgroup:v}))),c.default.createElement(m,{tab:t("privilege-role.promise"),key:"promise"},c.default.createElement(s.default,(0,a.default)({},e,{group:r.group,roleDetail:r,bgroup:v})))))};t.default=v},786:function(e,t,r){"use strict";r.r(t)},787:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(187)),u=(n(r(0)),r(34)),i=r(6),l=r(170),o=["code","domainId","systemRoleStore"],c=(0,u.inject)(l.SYSTEM_ROLE_STORE)((0,u.observer)((function(e){var t=e.code,r=void 0===t?"":t,n=e.domainId,u=e.systemRoleStore,l=(0,a.default)(e,o),c=u.domainPermissions,f=(0,i.getUser)().userId;return c["".concat(f,"_").concat(n)]&&c["".concat(f,"_").concat(n)].includes(r)?l.children:null})));t.default=c},788:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(789)).default;t.default=a},789:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35));r(51);var i=n(r(19));r(49);var l=n(r(21));r(79);var o=n(r(26)),c=n(r(315));r(81);var f=n(r(31)),d=n(r(327)),s=n(r(187)),p=n(r(186)),m=n(r(52));r(46);var v=n(r(23)),g=n(r(312)),b=n(r(317));r(168);var y=n(r(33)),h=n(r(313)),O=n(r(129)),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),w=r(34),P=r(2),j=r(47),k=r(553),S=r(634),_=n(r(599)),D=r(170),R=n(r(600)),x=r(173),I=r(601),A=r(444);r(793);var U=["children","sort"],M=["children","sort"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=(0,w.inject)(D.PRIVILEGE_PROJECT_FEATURE_STORE,D.PRIVILEGE_SYSTEM_STORE)((0,w.observer)((function(e){var t=(0,j.useTranslation)().t,r=e.privilegeProjectFeatureStore,n=e.privilegeSystemStore,a=n.deleteFunctionAction,w=n.getFunctionListListAction,D=n.updateFunctionSortAction,T=r.privilegeProjectTreeData,C=r.getDmPrivilegeTree,F=(0,E.useState)(""),L=(0,O.default)(F,2),N=L[0],W=L[1],G=(0,E.useState)(!1),B=(0,O.default)(G,2),K=B[0],V=B[1],J=(0,E.useState)({}),q=(0,O.default)(J,2),Y=q[0],H=q[1],$=(0,E.useState)({}),Z=(0,O.default)($,2),Q=Z[0],X=Z[1],ee={type:"2",pageParam:{pageSize:99999,currentPage:1}},te=(0,E.useState)(ee),re=(0,O.default)(te,2),ne=re[0],ae=re[1],ue=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",width:"10%",render:function(e,t){return E.default.createElement(v.default,{size:"middle"},!t.parentFunction&&E.default.createElement(y.default,{title:"新增"},E.default.createElement(h.default,{onClick:function(){return ce(t.id)}})),E.default.createElement(y.default,{title:"编辑"},E.default.createElement(b.default,{onClick:function(){return de(t)}})),!t.children&&E.default.createElement(y.default,{title:"删除"},E.default.createElement(g.default,{onClick:function(){return se(t)}})))}}];(0,E.useEffect)((function(){ie()}),[ne]);var ie=function(){w(ne).then((function(e){if(!e.code){var t=oe(e.data);C(t)}}))},le=function(){w(ee).then((function(e){if(!e.code){var t=oe(e.data);C(t)}}))},oe=function(e){var t=(0,x.sort)(e.map((function(e){return!e.parentFunction&&e})).filter(Boolean)),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),n=[];return t.forEach((function(e){var t=e.id,a=(0,x.sort)(r.filter((function(e){return e.parentFunction.id===t})));a.length>0?n.push(z(z({},e),{},{children:a})):n.push(e)})),n},ce=(0,E.useCallback)((function(e){W(e),V(!0)}),[]),fe=(0,E.useCallback)((function(){W(""),H({}),V(!1),le()}),[]),de=(0,E.useCallback)((function(e){H(e),V(!0)}),[]),se=(0,E.useCallback)((function(e){a(e.id).then((function(e){e.code||ie()}))}),[]),pe=(0,E.useCallback)((function(e){var t,r=e.dragId,n=e.dropId,a=e.drag,u=e.drop,i=a.sort,l=-1,o=[],c=[],f={},d={};if(u.children){var m=[],v=Q[n],g=u.children[0];if(v){var b=ve(g.id);f=z(z({},a),{},{parentFunction:b.parentFunction}),i<b.sort?(m=[f].concat((0,p.default)(u.children)),me(m).then((function(e){le()}))):(l=u.children.findIndex((function(e){return e.id===b.id})),u.children.splice(l,0,a),u.children.forEach((function(e){c.push(e.sort)})),o=(0,I.sortNum)(c),u.children=u.children.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),me(u.children).then((function(e){le()})))}}if(u.parentFunction){var y=u.parentFunction.id,h=ve(y);l=(t=h.children.filter((function(e){return e.id!==r}))).findIndex((function(e){return e.id===u.id})),t.splice(l,0,z(z({},a),{},{parentFunction:h.children[0].parentFunction})),t.forEach((function(e){c.push(e.sort)})),o=(0,I.sortNum)(c),h.children=t.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),me(h.children).then((function(e){le()}))}else{a.children;var O=a.sort,E=(0,s.default)(a,U),w=(u.children,u.sort),P=(0,s.default)(u,M);if(a.parentFunction&&!u.parentFunction){a.parentFunction.id;d=z(z({},P),{},{parentFunction:u.parentFunction,sort:O}),f=z(z({},E),{},{parentFunction:u.parentFunction,sort:w}),me([d,f]).then((function(e){le()}))}else{var j=[z(z({},E),{},{sort:w}),z(z({},P),{},{sort:O})];me(j).then((function(e){le()}))}}}),[T,Q]),me=function(e){return D({list:e})},ve=(0,E.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var u=n[a];if(u.id===e){t=u;break}u.children&&u.children.length>0&&r(u.children)}return t}((0,P.toJS)(T)),t}),[T]);return E.default.createElement("div",{className:"privilege-dm"},E.default.createElement("div",{className:"privilege-dm_content"},E.default.createElement(A.TitleAction,{title:"项目功能管理",style:{paddingLeft:8}},E.default.createElement(f.default,{onClick:function(){return V(!0)},type:"primary",icon:E.default.createElement(d.default,null)},t("privilege-add-feature"))),E.default.createElement(l.default,null,E.default.createElement(i.default,{span:24},E.default.createElement(l.default,{justify:"space-between",style:{paddingBottom:16}},E.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;ae(z(z({},ne),{},{name:t}))}(e)},style:{width:240},prefix:E.default.createElement(c.default,null)})))),E.default.createElement(l.default,null,E.default.createElement(i.default,{span:24,id:"project-drag-sorting"},E.default.createElement(k.DndProvider,{backend:S.HTML5Backend},E.default.createElement(u.default,{dataSource:(0,P.toJS)(T),columns:ue,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:R.default}},onRow:function(e,t){return{record:e,data:(0,P.toJS)(T),index:t,moveRow:pe}},expandable:{onExpand:function(e,t){X(z(z({},Q),{},(0,m.default)({},t.id,e)))}}}))))),E.default.createElement(_.default,{data:T,editData:Y,visible:K,cancelAdd:fe,parentId:N,urlType:"project"}))})));t.default=F},793:function(e,t,r){"use strict";r.r(t)},794:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(795)).default;t.default=a},795:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var u=n(r(21));r(51);var i=n(r(19));r(80);var l=n(r(35)),o=n(r(313)),c=(n(r(187)),n(r(52)),n(r(312))),f=n(r(319));r(168);var d=n(r(33)),s=n(r(317));r(46);var p=n(r(23));r(253);var m=n(r(133));r(81);var v=n(r(31)),g=n(r(129)),b=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=j(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),y=r(34),h=r(47),O=n(r(602)),E=r(796),w=r(444),P=r(170);r(798);function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(j=function(e){return e?r:t})(e)}var k=(0,y.inject)(P.PRIVILEGE_PROJECT_ROLE_STORE,P.SYSTEM_ROLE_STORE)((0,y.observer)((function(e){var t=e.privilegeProjectRoleStore,r=e.systemRoleStore,n=e.isBase,a=void 0!==n&&n,y=(0,h.useTranslation)().t,P=t.getProjectRoles,j=t.privilegeProjectRole,k=r.deleteRoleAction,S=r.findRoleListAction,_=r.setDefaultRoleAction,D=(0,b.useState)(!1),R=(0,g.default)(D,2),x=R[0],I=R[1],A=(0,b.useState)({}),U=(0,g.default)(A,2),M=U[0],T=U[1],C=(0,b.useState)(null),z=(0,g.default)(C,2),F=z[0],L=z[1],N=(0,b.useState)(""),W=(0,g.default)(N,2),G=W[0],B=W[1],K=(0,b.useState)({type:"2"}),V=(0,g.default)(K,2),J=V[0],q=(V[1],[{title:"角色名称",dataIndex:"name",render:function(e,t){var r=t.businessType,n=t.defaultRole;return 1===r&&1===n?b.default.createElement(p.default,null,b.default.createElement(v.default,{type:"link",onClick:function(){return ee(t)}},e),b.default.createElement(m.default,{color:"#87d068"},"默认"),b.default.createElement(m.default,null,"管理员")):1===n?b.default.createElement(p.default,null,b.default.createElement(v.default,{type:"link",onClick:function(){return ee(t)}},e),b.default.createElement(m.default,{color:"#87d068"},"默认")):1===r?b.default.createElement(p.default,null,b.default.createElement(v.default,{type:"link",onClick:function(){return ee(t)}},e),b.default.createElement(m.default,null,"管理员")):b.default.createElement(v.default,{type:"link",onClick:function(){return ee(t)}},e)}},{title:"类型",dataIndex:"group",render:function(e){return te(e)}},{title:"成员数",dataIndex:"user"},{title:"操作",dataIndex:"action",render:function(e,t){return a?b.default.createElement(p.default,null,b.default.createElement(d.default,{title:"编辑"},b.default.createElement(s.default,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&b.default.createElement(d.default,{title:"设置默认"},b.default.createElement(f.default,{onClick:function(){return H(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),b.default.createElement(d.default,{title:"删除"},b.default.createElement(c.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))):b.default.createElement(p.default,null,b.default.createElement(d.default,{title:"编辑"},b.default.createElement(s.default,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&b.default.createElement(d.default,{title:"设置默认"},b.default.createElement(f.default,{onClick:function(){return H(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.businessType&&b.default.createElement(d.default,{title:"删除"},b.default.createElement(c.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}]);(0,b.useEffect)((function(){Z(J)}),[J]);var Y=function(e){k(e).then((function(e){e.code||Z(J)}))},H=function(e){_(e).then((function(e){e.code||Z(J)}))},$=function(e){T(e),I(!0)},Z=function(e){S(e).then((function(e){0===e.code&&P(e.data)}))},Q=(0,b.useCallback)((function(){T({}),I(!1),Z(J)}),[x]),X=function(e){B(e),I(!0)},ee=function(e){L(e)},te=function(e){switch(e){case"system":return"内置";case"custom":default:return y("privilege-role.custom")}};return b.default.createElement("div",{className:"tiklab_project_role"},F?b.default.createElement(E.ProjectRoleDetail,{roleDetailParams:F,close:function(){L(null)}}):b.default.createElement("div",{className:"tiklab_project_role_table"},b.default.createElement(w.TitleAction,{title:"项目角色",style:{paddingLeft:8}},b.default.createElement(p.default,null,a?b.default.createElement(v.default,{onClick:function(){return X("system")},icon:b.default.createElement(o.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},y("privilege-role.addSystemRole")):b.default.createElement(v.default,{onClick:function(){return X("custom")},icon:b.default.createElement(o.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),type:"primary"},y("privilege-role.addRole")))),b.default.createElement(u.default,null,b.default.createElement(i.default,{span:24},b.default.createElement(l.default,{columns:q,dataSource:j,rowKey:function(e){return e.id},pagination:!1})))),b.default.createElement(O.default,{visible:x,cancel:Q,editData:M,group:G,urlType:"project"}))})));t.default=k},796:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"ProjectRoleDetail",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(t,"ProjectRoleDetailPeople",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"ProjectRoleDetailPromiss",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"ProjectRoleUserAdd",{enumerable:!0,get:function(){return l.default}});var a=n(r(797)),u=n(r(606)),i=n(r(603)),l=n(r(604))},797:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(451));r(46);var u=n(r(23));r(49);var i=n(r(21));r(51);var l=n(r(19));r(256);var o=n(r(135)),c=n(r(0)),f=r(47),d=n(r(603)),s=n(r(606)),p=r(444),m=o.default.TabPane,v=function(e){var t=e.roleDetailParams,r=e.close,n=(0,f.useTranslation)().t,v=[{click:r,breadcrumbName:t.name||"角色详情"}];return c.default.createElement("div",{className:"tiklab_project_role_detail"},c.default.createElement(i.default,null,c.default.createElement(l.default,{span:24},c.default.createElement(p.BreadCrumb,{routes:v}))),c.default.createElement(i.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,t.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===t.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(m,{tab:n("privilege-role.people"),key:"people"},c.default.createElement(d.default,(0,a.default)({},e,{group:t.group,roleDetail:t}))),c.default.createElement(m,{tab:n("privilege-role.promise"),key:"promise"},c.default.createElement(s.default,(0,a.default)({},e,{group:t.group,roleDetail:t})))))};t.default=v},798:function(e,t,r){"use strict";r.r(t)},799:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(800)).default;t.default=a},800:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(38));r(49);var i=n(r(21));r(51);var l=n(r(19));r(80);var o=n(r(35));r(81);var c=n(r(31)),f=n(r(313)),d=n(r(117)),s=n(r(312)),p=n(r(319));r(168);var m=n(r(33)),v=n(r(317));r(46);var g=n(r(23));r(253);var b=n(r(133)),y=n(r(129)),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=S(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),O=r(34),E=r(47),w=n(r(602)),P=r(170),j=r(801),k=r(444);function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(S=function(e){return e?r:t})(e)}r(803);var _=(0,O.inject)(P.SYSTEM_ROLE_STORE)((0,O.observer)((function(e){var t=e.systemRoleStore,r=e.isBase,n=void 0!==r&&r,a=(0,E.useTranslation)().t,O=t.findRoleListAction,P=t.deleteRoleAction,S=t.privilegeSystemRole,_=t.setDefaultRoleAction,D=(0,h.useState)(!1),R=(0,y.default)(D,2),x=R[0],I=R[1],A=(0,h.useState)({}),U=(0,y.default)(A,2),M=U[0],T=U[1],C=(0,h.useState)(""),z=(0,y.default)(C,2),F=z[0],L=z[1],N=(0,h.useState)(null),W=(0,y.default)(N,2),G=W[0],B=W[1],K=(0,h.useState)({}),V=(0,y.default)(K,2),J=V[0],q=(V[1],[{title:"角色名称",dataIndex:"name",render:function(e,t){var r=t.businessType,n=t.defaultRole;return 1===r&&1===n?h.default.createElement("div",null,h.default.createElement("a",{onClick:function(){return ee(t)}},e),h.default.createElement(g.default,null,h.default.createElement(b.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认"),h.default.createElement(b.default,{style:{marginLeft:8,marginRight:0}},"管理员"))):1===n?h.default.createElement("div",null,h.default.createElement("a",{onClick:function(){return ee(t)}},e),h.default.createElement(b.default,{color:"#87d068",style:{marginLeft:8,marginRight:0}},"默认")):1===r?h.default.createElement("div",null,h.default.createElement("a",{type:"link",onClick:function(){return ee(t)}},e),h.default.createElement(b.default,{style:{marginLeft:8,marginRight:0}},"管理员")):h.default.createElement("a",{type:"link",onClick:function(){return ee(t)}},e)}},{title:"类型",dataIndex:"group",render:function(e){return te(e)}},{title:"操作",dataIndex:"action",render:function(e,t){return n?h.default.createElement(g.default,null,h.default.createElement(m.default,{title:"编辑"},h.default.createElement(v.default,{onClick:function(){return H(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&h.default.createElement(m.default,{title:"设置默认"},h.default.createElement(p.default,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),h.default.createElement(m.default,{title:"删除"},h.default.createElement(s.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))):h.default.createElement(g.default,null,h.default.createElement(m.default,{title:"编辑"},h.default.createElement(v.default,{onClick:function(){return H(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.defaultRole&&h.default.createElement(m.default,{title:"设置默认"},h.default.createElement(p.default,{onClick:function(){return $(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),0===t.businessType&&h.default.createElement(m.default,{title:"删除"},h.default.createElement(s.default,{onClick:function(){return Y(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}]);(0,h.useEffect)((function(){Z(J)}),[J]);var Y=function(e){P(e).then((function(e){e.code||Z(J)}))},H=function(e){T(e),I(!0)},$=function(e){_(e).then((function(e){e.code||Z(J)}))},Z=function(){var e=(0,d.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=(0,h.useCallback)((function(){T({}),I(!1),Z(J)}),[x]),X=function(e){L(e),I(!0)},ee=function(e){B(e)},te=function(e){switch(e){case"system":return"内置";case"custom":default:return a("privilege-role.custom")}};return h.default.createElement("div",{className:"tiklab_system_role"},G?h.default.createElement(j.RoleDetail,{roleDetailParams:G,close:function(){B(null)}}):h.default.createElement("div",{className:"tiklab_system_role_main"},h.default.createElement(k.TitleAction,{title:"角色",style:{paddingLeft:8}},h.default.createElement(g.default,null,n?h.default.createElement(c.default,{onClick:function(){return X("system")},icon:h.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},a("privilege-role.addSystemRole")):h.default.createElement(c.default,{onClick:function(){return X("custom")},type:"primary",icon:h.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},a("privilege-role.addRole")))),h.default.createElement(i.default,null,h.default.createElement(l.default,{span:24},h.default.createElement(o.default,{columns:q,dataSource:S,rowKey:function(e){return e.id},pagination:!1})))),h.default.createElement(w.default,{visible:x,cancel:Q,editData:M,group:F,urlType:"system"}))})));t.default=_},801:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RoleDetail",{enumerable:!0,get:function(){return a.default}});var a=n(r(802));n(r(607)),n(r(608)),n(r(609))},802:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(451));r(46);var u=n(r(23));r(49);var i=n(r(21));r(51);var l=n(r(19));r(256);var o=n(r(135)),c=n(r(0)),f=n(r(607)),d=n(r(609)),s=r(47),p=r(444),m=o.default.TabPane,v=function(e){var t=e.roleDetailParams,r=e.close,n=(0,s.useTranslation)().t,v=[{click:r,breadcrumbName:t.name||"角色详情"}];return c.default.createElement("div",{className:"tiklab_system_role_detail"},c.default.createElement(i.default,null,c.default.createElement(l.default,{span:24},c.default.createElement(p.BreadCrumb,{routes:v}))),c.default.createElement(i.default,null,c.default.createElement(u.default,null,c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"名称:"),c.default.createElement("span",null,t.name)),c.default.createElement("div",{className:"label_item"},c.default.createElement("label",null,"类型:"),c.default.createElement("span",null,"system"===t.group?"内置":"自定义")))),c.default.createElement(o.default,{defaultActiveKey:"people"},c.default.createElement(m,{tab:n("privilege-role.people"),key:"people"},c.default.createElement(f.default,(0,a.default)({},e,{group:t.group,roleDetail:t}))),c.default.createElement(m,{tab:n("privilege-role.promise"),key:"promise"},c.default.createElement(d.default,(0,a.default)({},e,{group:t.group,roleDetail:t})))))};t.default=v},803:function(e,t,r){"use strict";r.r(t)},804:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(805)).default;t.default=a},805:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(80);var u=n(r(35));r(51);var i=n(r(19));r(49);var l=n(r(21));r(79);var o=n(r(26)),c=n(r(315));r(81);var f=n(r(31)),d=n(r(187)),s=n(r(38)),p=n(r(186)),m=n(r(52)),v=n(r(117));r(46);var g=n(r(23)),b=n(r(312)),y=n(r(317));r(168);var h=n(r(33)),O=n(r(313)),E=n(r(129)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=T(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),P=r(34),j=r(47),k=r(2),S=r(553),_=r(634),D=r(170),R=n(r(600)),x=n(r(599)),I=r(444),A=r(601);r(806);var U=["children","sort"],M=["children","sort"];function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(T=function(e){return e?r:t})(e)}function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var F=(0,P.inject)(D.PRIVILEGE_SYSTEM_STORE)((0,P.observer)((function(e){var t=(0,j.useTranslation)().t,r=e.privilegeSystemStore,n=r.privilegeSystemTreeData,a=r.getFunctionListListAction,P=r.deleteFunctionAction,D=r.updateFunctionSortAction,T=(0,w.useState)(""),C=(0,E.default)(T,2),F=C[0],L=C[1],N=(0,w.useState)(!1),W=(0,E.default)(N,2),G=W[0],B=W[1],K=(0,w.useState)({}),V=(0,E.default)(K,2),J=V[0],q=V[1],Y=(0,w.useState)({}),H=(0,E.default)(Y,2),$=H[0],Z=H[1],Q=(0,w.useState)({pageParam:{pageSize:9999,currentPage:1}}),X=(0,E.default)(Q,2),ee=X[0],te=X[1],re=[{title:t("privilege-feature-name"),dataIndex:"name",key:"name",className:"column_bg_w"},{title:t("privilege-feature-code"),dataIndex:"code",key:"code"},{title:"操作",dataIndex:"action",className:"column_bg_w",width:"10%",render:function(e,t){return w.default.createElement(g.default,{size:"middle"},!t.parentFunction&&w.default.createElement(h.default,{title:"新增"},w.default.createElement(O.default,{onClick:function(){return ae(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),w.default.createElement(h.default,{title:"编辑"},w.default.createElement(y.default,{onClick:function(){return ie(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),!t.children&&w.default.createElement(h.default,{title:"删除"},w.default.createElement(b.default,{onClick:function(){return le(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,w.useEffect)((function(){(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:case"end":return e.stop()}}),e)})))()}),[ee]);var ne=function(){var e=(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(ee);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=(0,w.useCallback)((function(e){L(e.id),B(!0)}),[]),ue=function(){var e=(0,v.default)(s.default.mark((function e(){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(""),q({}),B(!1),e.next=5,ne();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=function(e){q(e),B(!0)},le=function(){var e=(0,v.default)(s.default.mark((function e(t){return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t.id);case 2:if(e.sent.code){e.next=6;break}return e.next=6,ne();case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oe=(0,w.useCallback)(function(){var e=(0,v.default)(s.default.mark((function e(t){var r,n,a,u,i,l,o,c,f,m,v,g,b,y,h,O,E,w,P,j,k,S;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dragId,n=t.dropId,a=t.drag,u=t.drop,i=a.sort,l=-1,o=[],c=[],f={},m={},!u.children){e.next=31;break}if([],g=$[n],b=u.children[0],!g){e.next=31;break}if(y=fe(b.id),f=z(z({},a),{},{parentFunction:y.parentFunction}),!(i<y.sort)){e.next=22;break}return v=[f].concat((0,p.default)(u.children)),e.next=18,ce(v);case 18:return e.next=20,ne();case 20:e.next=31;break;case 22:return l=u.children.findIndex((function(e){return e.id===y.id})),u.children.splice(l,0,a),u.children.forEach((function(e){c.push(e.sort)})),o=(0,A.sortNum)(c),u.children=u.children.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),e.next=29,ce(u.children);case 29:return e.next=31,ne();case 31:u.parentFunction?(O=u.parentFunction.id,E=fe(O),h=E.children.filter((function(e){return e.id!==r})),l=h.findIndex((function(e){return e.id===u.id})),h.splice(l,0,z(z({},a),{},{parentFunction:E.children[0].parentFunction})),h.forEach((function(e){c.push(e.sort)})),o=(0,A.sortNum)(c),E.children=h.map((function(e,t){return z(z({},e),{},{sort:o[t]})})),ce(E.children).then((function(e){ne()}))):(a.children,w=a.sort,P=(0,d.default)(a,U),u.children,j=u.sort,k=(0,d.default)(u,M),a.parentFunction&&!u.parentFunction?(a.parentFunction.id,m=z(z({},k),{},{parentFunction:u.parentFunction,sort:w}),f=z(z({},P),{},{parentFunction:u.parentFunction,sort:j}),ce([m,f]).then((function(e){ne()}))):(S=[z(z({},P),{},{sort:j}),z(z({},k),{},{sort:w})],ce(S).then((function(e){ne()}))));case 32:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,$]),ce=function(){var e=(0,v.default)(s.default.mark((function e(t){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={list:t},e.next=3,D(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fe=(0,w.useCallback)((function(e){var t={};return function r(n){for(var a=0;a<n.length;a++){var u=n[a];if(u.id===e){t=u;break}u.children&&u.children.length>0&&r(u.children)}return t}((0,k.toJS)(n)),t}),[n]);return w.default.createElement("div",{className:"systemFeature"},w.default.createElement("div",{className:"systemFeature_content"},w.default.createElement(I.TitleAction,{title:"功能管理",style:{paddingLeft:8}},w.default.createElement(f.default,{onClick:function(){return B(!0)},type:"primary",icon:w.default.createElement(O.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},t("privilege-add-feature"))),w.default.createElement(l.default,null,w.default.createElement(i.default,{span:24},w.default.createElement(l.default,{justify:"space-between",style:{paddingBottom:16}},w.default.createElement(o.default,{placeholder:t("privilege-search")+t("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;te(z(z({},ee),{},{name:t}))}(e)},style:{width:300},prefix:w.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})))),w.default.createElement(l.default,null,w.default.createElement(i.default,{span:24,id:"drag-sorting"},w.default.createElement(S.DndProvider,{backend:_.HTML5Backend},w.default.createElement(u.default,{dataSource:(0,k.toJS)(n),columns:re,rowKey:"id",tableLayout:"fixed",pagination:!1,components:{body:{row:R.default}},onRow:function(e,t){return{record:e,data:(0,k.toJS)(n),index:t,moveRow:oe}},expandable:{onExpand:function(e,t){Z(z(z({},$),{},(0,m.default)({},t.id,e)))}}}))))),w.default.createElement(x.default,{data:n,editData:J,visible:G,cancelAdd:ue,parentId:F,urlType:"system"}))})));t.default=F},806:function(e,t,r){"use strict";r.r(t)},807:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(808)).default;t.default=a},808:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(129));r(316);var i=n(r(142)),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),o=r(34),c=r(809);function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}r(810);var d=i.default.SubMenu,s=(0,c.scopedClassMaker)("privilege-header"),p=(0,o.observer)((function(e){var t=e.className,r=e.onSelectMenu,n=e.allPromise,a=void 0===n?[]:n,o=(0,l.useState)(e.selectedKeys||[]),c=(0,u.default)(o,2),f=c[0],p=c[1],m=(0,l.useState)(e.openKeys||[]),v=(0,u.default)(m,2),g=v[0],b=v[1];(0,l.useEffect)((function(){e.selectedKeys.toString()!==f.toString()&&p(e.selectedKeys),e.openKeys.toString()!==g.toString()&&b(e.openKeys)}),[e.selectedKeys,e.openKeys]);return l.default.createElement("div",{className:s("menu",{extra:[t].join(" ")})},l.default.createElement(i.default,{theme:"light",mode:"inline",className:"menu-wrap",defaultSelectedKeys:e.defaultSelectedKeys,defaultOpenKeys:e.defaultOpenKeys,openKeys:g,selectedKeys:f,onClick:function(e){p([e.key]),r(e)},onOpenChange:function(e){var t=e.find((function(e){return-1===g.indexOf(e)}));-1===g.indexOf(t)?b([t]):b(t?[t]:[])},forceSubMenuRender:!0},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,r){if(t.children&&t.children.length){if(!t.purviewCode)return l.default.createElement(d,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children));if(a.includes(t.purviewCode))return l.default.createElement(d,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children))}if(!t.purviewCode||a.includes(t.purviewCode))return l.default.createElement(l.Fragment,{key:"".concat(t.id)},t.divider&&l.default.createElement(i.default.Divider,null),l.default.createElement(i.default.Item,{icon:t.icon,key:"".concat(t.id)},t.title))}))}(e.data)))}));t.default=p},809:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.scopedClassMaker=t.default=void 0;var a=n(r(52));var u=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(" ")};t.default=u;t.scopedClassMaker=function(e){return function(t,r){return Object.entries(t instanceof Object?t:(0,a.default)({},t,t)).filter((function(e){return!1!==e[1]})).map((function(e){return e[0]})).map((function(t){return[e,t].filter(Boolean).join("-")})).concat(r&&r.extra||[]).join(" ")}}},810:function(e,t,r){"use strict";r.r(t)},811:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(812)).default;t.default=a},812:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(187));r(316);var u=n(r(142)),i=n(r(0)),l=r(34),o=["allPromise","data"],c=u.default.SubMenu,f=(0,l.observer)((function(e){var t=e.allPromise,r=void 0===t?[]:t,n=e.data,l=void 0===n?[]:n,f=(0,a.default)(e,o);return i.default.createElement(u.default,f,function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t,n){if(t.children&&t.children.length&&r.includes(t.purviewCode))return i.default.createElement(c,{key:"".concat(t.id),title:t.title,icon:t.icon},e(t.children));return r.includes(t.purviewCode)&&i.default.createElement(u.default.Item,{icon:t.icon,key:"".concat(t.id)},t.title)}))}(l))}));t.default=f},813:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(814)).default;t.default=a},814:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(368)),i=n(r(318)),l=n(r(451)),o=n(r(186)),c=n(r(129)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=g(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),d=n(r(491)),s=r(34),p=r(170),m=r(192),v=r(610);function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(g=function(e){return e?r:t})(e)}r(815);var b=(0,s.inject)(p.SYSTEM_ROLE_STORE)((0,s.observer)((function(e){var t=e.route,r=e.applicationRouters,n=e.outerPath,a=e.notFoundPath,s=e.systemRoleStore.systemPermissions,p=e.location.pathname,g=(0,f.useState)(p),b=(0,c.default)(g,2),y=b[0],h=b[1],O=(0,f.useState)([""]),E=(0,c.default)(O,2),w=E[0],P=E[1];(0,f.useEffect)((function(){if(s&&s.length>0){var t=(0,v.links)(r),u=(0,v.SameValue)(s,t,"purviewCode");u&&p===n&&(p=u.id,e.history.push(p));var i=t.find((function(e){return e.id===p}));if(i)if(P([i.type].concat((0,o.default)(w))),!s.includes(i.purviewCode))return e.history.push(a||"/index/404")}h(p)}),[p,s]);var j=function(e){return w.some((function(t){return t===e}))},k=function(t,r){return f.default.createElement(d.default,(0,l.default)({key:t.id,code:t.purviewCode},e),f.default.createElement("li",{style:{cursor:"pointer",paddingLeft:"".concat(20*r+20)},className:"system-aside-li system-aside-second ".concat(t.id===y?"system-aside-select":""),onClick:function(){return function(t){return e.history.push(t.id)}(t)},key:t.id},f.default.createElement("span",{className:"sys-content-icon"},t.icon),f.default.createElement("span",null,t.title)))},S=function(e,t,r){return f.default.createElement("li",{key:e.id,className:"system-aside-li"},f.default.createElement("div",{className:"system-aside-item system-aside-first",style:{paddingLeft:"".concat(20*t+20)},onClick:function(){return t=e.id,void(j(t)?P(w.filter((function(e){return e!==t}))):P(w.concat(t)));var t}},f.default.createElement("span",null,f.default.createElement("span",{className:"sys-content-icon"},e.icon),f.default.createElement("span",{className:"system-aside-title"},e.title)),f.default.createElement("div",{className:"system-aside-item-icon"},e.children?j(e.id)?f.default.createElement(i.default,{style:{fontSize:"10px"}}):f.default.createElement(u.default,{style:{fontSize:"10px"}}):"")),f.default.createElement("ul",{className:"system-aside-ul ".concat(j(e.id)?null:"system-aside-hidden")},e.children&&e.children.map((function(e){var r=t+1;return e.children&&e.children.length?_(e,r):k(e,r)}))))},_=function(e,t){return e.children.some((function(e){return s.includes(e.purviewCode)}))&&S(e,t)};return f.default.createElement("div",{className:"system"},f.default.createElement("div",{className:"system-aside"},f.default.createElement("ul",{className:"system-aside-top",style:{padding:0}},r.map((function(e){return e.children&&e.children.length>0?_(e,0):k(e,0)})))),f.default.createElement("div",{className:"system-content"},(0,m.renderRoutes)(t.routes)))})));t.default=b},815:function(e,t,r){"use strict";r.r(t)},816:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r(817)).default;t.default=a},817:function(e,t,r){"use strict";var n=r(74),a=r(251);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=n(r(129)),i=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!=typeof e)return{default:e};var r=p(t);if(r&&r.has(e))return r.get(e);var n={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(n,i,l):n[i]=e[i]}n.default=e,r&&r.set(e,n);return n}(r(0)),l=r(192),o=r(34),c=r(6),f=r(170),d=n(r(597)),s=r(610);function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(p=function(e){return e?r:t})(e)}r(818);var m=(0,o.inject)(f.SYSTEM_ROLE_STORE)((0,o.observer)((function(e){var t=e.route,r=e.projectRouters,n=e.outerPath,a=e.notFoundPath,o=e.domainId,f=e.systemRoleStore.domainPermissions,p=e.location.pathname,m=(0,c.getUser)().userId,v=(0,i.useState)(""),g=(0,u.default)(v,2),b=g[0],y=g[1];(0,i.useEffect)((function(){if(f){var t=f["".concat(m,"_").concat(o)];if(t&&t.length>0){var u=(0,s.SameValue)(t,r,"purviewCode");u&&p===n&&e.history.push(u.id);var i=r.find((function(e){return e.id===p}));if(i)if(!t.includes(i.purviewCode))return e.history.push(a||"/index/404")}}y(p)}),[p,f]);var h=function(t){return i.default.createElement(d.default,{key:t.id,code:t.purviewCode,domainId:o},function(t){return i.default.createElement("div",{key:t.id,className:"project-nav-aside-item ".concat(b===t.id?"project-nav-aside-select":""," "),onClick:function(){return e.history.push(t.id)}},i.default.createElement("span",{className:"project-nav-aside-item-title"},t.title))}(t))};return i.default.createElement("div",{className:"project-nav"},i.default.createElement("div",{className:"project-nav-aside"},i.default.createElement("div",{className:"project-nav-aside-head"},"设置"),r.map((function(e){return h(e)}))),i.default.createElement("div",{className:"project-nav-content"},(0,l.renderRoutes)(t.routes)))})));t.default=m},818:function(e,t,r){"use strict";r.r(t)},819:function(e,t,r){"use strict";var n=r(74);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(644);var a=n(r(637)),u=n(r(0)),i=function(e){var t=e.homePath,r=u.default.createElement(u.default.Fragment,null,"资源不存在或者没有访问权限，",u.default.createElement("span",{style:{color:"var(--tiklab-blue)",cursor:"pointer"},onClick:function(){return e.history.push(t||"/")}},"点击这里"),"返回首页");return u.default.createElement(a.default,{status:"404",title:"404",subTitle:r})};t.default=i}}]);