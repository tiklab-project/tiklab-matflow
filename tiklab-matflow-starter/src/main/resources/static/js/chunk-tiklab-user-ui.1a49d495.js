(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{222:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DOMAIN_USER_STORE",{enumerable:!0,get:function(){return u.DOMAIN_USER_STORE}}),Object.defineProperty(t,"ORG_STORE",{enumerable:!0,get:function(){return i.ORG_STORE}}),Object.defineProperty(t,"USER_STORE",{enumerable:!0,get:function(){return l.USER_STORE}}),t.orgStores=void 0;var n=a(r(95)),u=r(282),i=r(283),l=r(284);var o,c=(o={},(0,n.default)(o,i.ORG_STORE,new i.OrgStore),(0,n.default)(o,l.USER_STORE,new l.UserStore),(0,n.default)(o,u.DOMAIN_USER_STORE,new u.DomainUserStore),o);t.orgStores=c},232:function(e){e.exports=JSON.parse('{"orga-common":{"delete":"删除","edit":"编辑","action":"操作","save":"保存","back":"取消","search":"搜索","add":"添加","orga":"组织","name":"名称","detail":"详情","close":"关闭"},"orga-table":{"name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有"},"adduser-module":{"addUser":"添加用户","editUser":"编辑用户","detailUser":"详情用户","userType":"用户类型","name":"账号","nickname":"昵称","phone":"手机号","email":"邮箱","org":"部门","account":"帐号","orgaName":"所属机构","password":"初始密码","type":"用户目录","typeChild":"目录二级","thirdparty":"LDAP/AP","internal":"内部目录","dingding":"钉钉","acc":"ACC","wechat":"企业微信","all":"所有","userTypeRequired":"用户类型必填!","emailRequired":"邮箱必填!","emailFormat":"邮箱格式不正确!","passwordRequired":"密码必填!","phoneRequired":"手机号必填!","nameRequired":"账号必填!","nicknameRequired":"请输入中昵称!"},"orga-label":{"addUser":"添加用户","orgaName":"机构名称","parentOrg":"上级机构","parentOrgPlaceholder":"请选择上级机构","parentOrgRequired":"上级机构必填!","user":"用户","searchUser":"搜索用户名称","searchUserPhoneEmail":"搜索姓名、手机号、邮箱","searchUserAccount":"搜索用户名、帐号","userType":"用户目录"},"orga-tab":{"all":"全部","in":"内部","out":"外部"}}')},256:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"orga_cn",{enumerable:!0,get:function(){return n.default}});var n=a(r(281))},281:function(e,t,r){"use strict";r.r(t);var a=r(232);t.default=a},282:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.DomainUserStore=t.DOMAIN_USER_STORE=void 0;var n,u,i,l,o=a(r(198)),c=a(r(152)),d=a(r(151)),f=(a(r(95)),a(r(199))),s=(a(r(200)),r(4)),p=(n=(0,c.default)((function e(){(0,d.default)(this,e),(0,o.default)(this,"privilegeDomainUsers",u,this),(0,o.default)(this,"getDomainUser",i,this),(0,o.default)(this,"deleteDomainUser",l,this)})),u=(0,f.default)(n.prototype,"privilegeDomainUsers",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,f.default)(n.prototype,"getDomainUser",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=t}}}),l=(0,f.default)(n.prototype,"deleteDomainUser",[s.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainUsers=e.privilegeDomainUsers.filter((function(e){return e.id!==t}))}}}),n);t.DomainUserStore=p;t.DOMAIN_USER_STORE="domainUserStore"},283:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.OrgStore=t.ORG_STORE=void 0;var n,u,i,l,o,c,d,f,s=a(r(198)),p=a(r(152)),m=a(r(151)),v=a(r(95)),g=a(r(199)),b=(a(r(200)),r(4));function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=(n=(0,p.default)((function e(){(0,m.default)(this,e),(0,s.default)(this,"treeData",u,this),(0,s.default)(this,"selectData",i,this),(0,s.default)(this,"getTree",l,this),(0,s.default)(this,"selectTreeOrgDetail",o,this),(0,s.default)(this,"addTree",c,this),(0,s.default)(this,"deleteTree",d,this),(0,s.default)(this,"editTree",f,this)})),u=(0,g.default)(n.prototype,"treeData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,g.default)(n.prototype,"selectData",[b.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=(0,g.default)(n.prototype,"getTree",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=t}}}),o=(0,g.default)(n.prototype,"selectTreeOrgDetail",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.selectData=t}}}),c=(0,g.default)(n.prototype,"addTree",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.children?O(O({},e),{},{children:e.children.concat(t)}):O(O({},e),{},{children:[t]})}))}}}),d=(0,g.default)(n.prototype,"deleteTree",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.filter((function(e){if(e.orgaId!==t)return e.children&&e.children.length>0&&(e.children=e.children.filter((function(e){return e.orgaId!==t}))),e}))}}}),f=(0,g.default)(n.prototype,"editTree",[b.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.treeData=e.treeData.map((function(e){return e.orgaId===t.orgaId?O(O({},e),t):(e.children=e.children.map((function(e){return e.orgaId===t.orgaId?O(O({},e),t):e})),e)}))}}}),n);t.OrgStore=h;t.ORG_STORE="orgStore"},284:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.UserStore=t.USER_STORE=void 0;var n,u,i,l,o,c,d=a(r(198)),f=a(r(152)),s=a(r(151)),p=(a(r(95)),a(r(199))),m=(a(r(200)),r(4)),v=(n=(0,f.default)((function e(){(0,s.default)(this,e),(0,d.default)(this,"userData",u,this),(0,d.default)(this,"getUserList",i,this),(0,d.default)(this,"editUser",l,this),(0,d.default)(this,"addUser",o,this),(0,d.default)(this,"deleteUser",c,this)})),u=(0,p.default)(n.prototype,"userData",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=(0,p.default)(n.prototype,"getUserList",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=t}}}),l=(0,p.default)(n.prototype,"editUser",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.map((function(e){return e.id===t.id?t:e}))}}}),o=(0,p.default)(n.prototype,"addUser",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.concat(t)}}}),c=(0,p.default)(n.prototype,"deleteUser",[m.action],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.userData=e.userData.filter((function(e){return e.id!==t}))}}}),n);t.UserStore=v;t.USER_STORE="userStore"},406:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BaseModal",{enumerable:!0,get:function(){return n.default}}),Object.defineProperty(t,"BreadCrumb",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Profile",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"TitleAction",{enumerable:!0,get:function(){return l.default}});var n=a(r(695)),u=a(r(697)),i=a(r(699)),l=a(r(701))},444:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.updateUserService=t.findUserPageService=t.findRoleUserListService=t.findRolePageService=t.deleteRoleUserService=t.createUserService=t.createRoleUserService=void 0;var n=a(r(65)),u=a(r(405)),i=r(2),l=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/user/findUserPage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.findUserPageService=l;var o=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/user/createUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.createUserService=o;var c=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/user/updateUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.updateUserService=c;var d=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/role/findRolePage",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.findRolePageService=d;var f=function(){var e=(0,u.default)(n.default.mark((function e(t,r){var a;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("id",t),e.next=4,i.Axios.post("/roleUser/deleteRoleUser",a,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.deleteRoleUserService=f;var s=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/roleUser/createRoleUser",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.createRoleUserService=s;var p=function(){var e=(0,u.default)(n.default.mark((function e(t,r){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/roleUser/findRoleUserList",t,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();t.findRoleUserListService=p},473:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.updateOrgaSortService=t.findUserOrgaPageService=t.findOrgaTreeService=t.findOrgaService=t.findOpenUserDirListService=t.deleteUserOrgaService=t.deleteOrgaService=void 0;var n=a(r(65)),u=a(r(405)),i=r(2),l=function(){var e=(0,u.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/userdir/findOpenList");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.findOpenUserDirListService=l;var o=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/user/orga/deleteOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteOrgaService=o;var c=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/user/orga/findOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findOrgaService=c;var d=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/orga/findOrgaTree",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findOrgaTreeService=d;var f=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/user/userOrga/deleteUserOrga",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteUserOrgaService=f;var s=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/userOrga/findUserOrgaPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findUserOrgaPageService=s;var p=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/user/orga/updateSort",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.updateOrgaSortService=p},474:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.updateUserWithGroupUserService=t.updateUserGroupService=t.findUserWithGroupUserService=t.findUserWithGroupUserListService=t.findOneUserGroupService=t.findAllUserGroupService=t.deleteUserWithGroupUserService=t.deleteUserGroupService=t.createUserGroupService=t.createBatchUserWithGroupUserService=void 0;var n=a(r(65)),u=a(r(405)),i=r(2),l=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroup/createGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createUserGroupService=l;var o=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroup/updateGroup",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.updateUserGroupService=o;var c=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/usergroup/deleteGroup",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteUserGroupService=c;var d=function(){var e=(0,u.default)(n.default.mark((function e(){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroup/findAllGroup");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.findAllUserGroupService=d;var f=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/usergroup/findGroup",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findOneUserGroupService=f;var s=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroupUser/createBatchUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createBatchUserWithGroupUserService=s;var p=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroupUser/updateUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.updateUserWithGroupUserService=p;var m=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/usergroupUser/deleteUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteUserWithGroupUserService=m;var v=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/usergroupUser/findUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findUserWithGroupUserService=v;var g=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/usergroupUser/findUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findUserWithGroupUserListService=g},491:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(62);var n=a(r(25)),u=a(r(0)),i=r(2);r(704);var l=function(e){var t=e.link,r=e.module,a=(0,i.getUser)(),l=a.ticket?"".concat(t,"?").concat((0,i.parseUserSearchParams)(a)):t;return u.default.createElement("div",{className:"tiklab_mask"},u.default.createElement("p",null,"当前为统一登录模式"),u.default.createElement(n.default,{type:"link",target:"_blank",href:l},"请前往EAS进行",r,"相关操作。"))};t.default=l},555:function(e,t,r){"use strict";r.r(t)},556:function(e,t,r){"use strict";r.r(t)},557:function(e,t,r){"use strict";r.r(t)},558:function(e,t,r){"use strict";r(559)},559:function(e,t,r){"use strict";r.r(t)},560:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(65));r(49);var i=a(r(26));r(36);var l=a(r(10));r(37);var o=a(r(12));r(62);var c=a(r(25)),d=a(r(220)),f=a(r(405)),s=a(r(279));r(86);var p=a(r(23)),m=a(r(287));r(29);var v=a(r(9));r(128);var g=a(r(45)),b=a(r(162)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),O=r(33),h=a(r(718)),E=r(474),w=a(r(719)),S=r(406);function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}r(559);var k=function(e){var t=e.isBase,r=void 0!==t&&t,a=(0,O.useTranslation)().t,n=(0,y.useState)(!1),P=(0,b.default)(n,2),k=P[0],j=P[1],x=(0,y.useState)(null),U=(0,b.default)(x,2),I=U[0],D=U[1],_=(0,y.useState)([]),R=(0,b.default)(_,2),A=R[0],N=R[1],T=(0,y.useState)(!1),M=(0,b.default)(T,2),z=M[0],C=M[1],L=(0,y.useState)(null),W=(0,b.default)(L,2),G=W[0],F=W[1],B=[{title:"用户组",dataIndex:"name",key:"name",width:"20%",render:function(e,t){var r=t.type;return y.default.createElement(v.default,null,y.default.createElement("a",{onClick:function(){return H(t)}},e),1===r&&y.default.createElement(g.default,null,"管理员组"))}},{title:"类型",dataIndex:"group",key:"group",width:"20%",render:function(e,t){return"system"===e?"内置":"自定义"}},{title:"成员数",dataIndex:"userNum",key:"userNum",width:"20%"},{title:a("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return y.default.createElement(v.default,{size:"middle"},1!==r&&y.default.createElement(p.default,{title:"编辑"},y.default.createElement(m.default,{onClick:function(){return V(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),1!==r&&y.default.createElement(p.default,{title:"删除"},y.default.createElement(s.default,{onClick:function(){return K(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}];(0,y.useEffect)((function(){q()}),[]);var q=function(){var e=(0,f.default)(u.default.mark((function e(){var t;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.findAllUserGroupService)();case 2:0===(t=e.sent).code&&N(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),V=function(e){D(e),j(!0)},K=function(){var e=(0,f.default)(u.default.mark((function e(t){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,E.deleteUserGroupService)(t);case 2:return e.next=4,q();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=(0,f.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return D(null),j(!1),e.next=4,q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),H=function(e){F(e),C(!0)},Y=function(){var e=(0,f.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F(null),C(!1),e.next=4,q();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return y.default.createElement("div",{className:"tiklab_userGroup"},z?y.default.createElement(w.default,{onCancel:Y,groupData:G}):y.default.createElement("main",{className:"tiklab_userGroup_main"},y.default.createElement(l.default,null,y.default.createElement(o.default,{span:24},y.default.createElement(S.TitleAction,{title:"用户组",style:{paddingLeft:8}},y.default.createElement(c.default,{onClick:function(){j(!0)},type:"primary",icon:y.default.createElement(d.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},"新增组")))),y.default.createElement(l.default,null,y.default.createElement(o.default,{span:24},y.default.createElement(i.default,{columns:B,dataSource:A,rowKey:function(e){return e.id},pagination:!1})))),y.default.createElement(h.default,{open:k,onCancel:J,data:I,isBase:r}))};t.default=k},561:function(e,t,r){"use strict";r.r(t)},562:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.findDmUserPageService=t.findDmUserListService=t.findDmRoleUserListService=t.findDmRoleListService=t.deleteDmUserService=t.deleteDmRoleUserService=t.createDmUserService=t.createDmRoleUserService=void 0;var n=a(r(65)),u=a(r(405)),i=r(2),l=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmUser/findDmUserPage",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findDmUserPageService=l;var o=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/dmUser/deleteDmUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteDmUserService=o;var c=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmUser/findDmUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findDmUserListService=c;var d=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmUser/createDmUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createDmUserService=d;var f=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmRoleUser/findDmRoleUserList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findDmRoleUserListService=f;var s=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmRoleUser/createDmRoleUser",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.createDmRoleUserService=s;var p=function(){var e=(0,u.default)(n.default.mark((function e(t){var r;return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("id",t),e.next=4,i.Axios.post("/dmRoleUser/deleteDmRoleUser",r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.deleteDmRoleUserService=p;var m=function(){var e=(0,u.default)(n.default.mark((function e(t){return n.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.Axios.post("/dmRole/findDmRoleList",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();t.findDmRoleListService=m},693:function(e,t,r){"use strict";r(555)},694:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(65)),i=a(r(419));r(37);var l=a(r(12));r(49);var o=a(r(26));r(36);var c=a(r(10));r(52);var d=a(r(22)),f=a(r(278));r(109);var s=a(r(47));r(62);var p=a(r(25)),m=a(r(220)),v=a(r(279));r(86);var g=a(r(23)),b=a(r(287));r(29);var y=a(r(9)),O=a(r(95)),h=a(r(405)),E=a(r(162)),w=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),S=r(34),P=r(4),k=r(334),j=r(406),x=r(2),U=r(33),I=a(r(703)),D=r(222),_=a(r(491)),R=r(444);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,O.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(555);var M=(0,S.inject)(D.USER_STORE)((0,S.observer)((function(e){var t=e.userStore,r=e.SASSComponentSearch,a=e.saasRefresh,n=void 0!==a&&a,O=e.setSaasRefreshStatus,S=e.bgroup,D=void 0===S?"eas":S,A=e.router,N=void 0===A?"/setting/user":A,M=t.userData,z=t.getUserList,C=t.editUser,L=t.addUser,W=t.deleteUser,G=(0,U.useTranslation)().t,F=(0,w.useState)(!1),B=(0,E.default)(F,2),q=B[0],V=B[1],K=(0,w.useState)(!1),J=(0,E.default)(K,2),H=J[0],Y=J[1],$=(0,w.useState)({}),Z=(0,E.default)($,2),Q=Z[0],X=Z[1],ee=(0,w.useState)(10),te=(0,E.default)(ee,1)[0],re=(0,w.useState)(1),ae=(0,E.default)(re,2),ne=ae[0],ue=ae[1],ie=(0,w.useState)(0),le=(0,E.default)(ie,2),oe=le[0],ce=le[1],de=(0,w.useState)({pageParam:{pageSize:te,currentPage:ne}}),fe=(0,E.default)(de,2),se=fe[0],pe=fe[1],me=(0,w.useState)(""),ve=(0,E.default)(me,2),ge=ve[0],be=ve[1],ye=(0,w.useState)([]),Oe=(0,E.default)(ye,2),he=Oe[0],Ee=Oe[1],we=localStorage.getItem(x.LOCALSTORAGE_KEY.AUTH_CONFIG);if(we){var Se=JSON.parse(we);if(!Se.authType&&-1===Se.appName.indexOf("eas")){var Pe=Se.authUrl+"/#"+N;return w.default.createElement(_.default,{module:"用户",link:Pe})}}var ke=(0,w.useRef)(null);(0,w.useEffect)((function(){return ke.current=!0,Ue(se),function(){return ke.current=!1}}),[se]),(0,w.useEffect)((0,h.default)(u.default.mark((function e(){return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,xe();case 2:return e.abrupt("return",(function(){return Ee([])}));case 3:case"end":return e.stop()}}),e)}))),[]),(0,w.useEffect)((function(){n&&je()}),[n]);var je=function(){Ue(se),O()},xe=function(){x.Axios.post("/user/userdir/findAllList").then((function(e){e.code||Ee(e.data)}))},Ue=function(e){(0,R.findUserPageService)(e).then(function(){var e=(0,h.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code||!ke.current){e.next=6;break}return ce(t.data.totalRecord),e.next=4,Promise.all(Ie(t.data.dataList));case 4:r=e.sent,z(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},Ie=function(e){return e.map(function(){var e=(0,h.default)(u.default.mark((function e(t){var r,a,n;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[],a={userId:t.id,scope:1,type:1},e.next=4,(0,R.findRoleUserListService)(a);case 4:return 0===(n=e.sent).code&&(r=n.data.map((function(e){return T(T({},e.role),{},{roleUserId:e.id})})).filter((function(e){return"1"===e.type&&1===e.scope}))),e.abrupt("return",T(T({},t),{},{roleList:r}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},De=[{title:G("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",render:function(e,t){return w.default.createElement(y.default,null,w.default.createElement(j.Profile,{userInfo:t})," ",w.default.createElement("a",{onClick:function(){return Re(t)}},e))}},{title:G("orga-table.name"),dataIndex:"name",key:"name",width:"10%"},{title:G("orga-table.org"),dataIndex:"org",key:"org",width:"20%"},{title:"角色",dataIndex:"role",key:"role",width:"20%",render:function(e,t){var r=t.roleList;return w.default.createElement(y.default,null,r.map((function(e){return w.default.createElement("span",{key:e.id},e.name)})))}},{title:G("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"20%",render:function(e){if("0"===e)return"个人账号";var t=he.findIndex((function(t){return t.id===e}));return t>-1?he[t].name:"--"}},{title:G("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.dirId;if(t.type<1)return w.default.createElement(w.default.Fragment,null,"1"===r?w.default.createElement(y.default,{size:"middle"},w.default.createElement(k.PrivilegeButton,{code:"user_update_user"},"admin"!==t.name&&w.default.createElement(g.default,{title:"编辑"},w.default.createElement(b.default,{onClick:function(){return Re(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),w.default.createElement(k.PrivilegeButton,{code:"user_delete_user"},"admin"!==t.name&&w.default.createElement(g.default,{title:"删除"},w.default.createElement(v.default,{onClick:function(){return _e(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))):w.default.createElement(y.default,{size:"middle"},w.default.createElement(k.PrivilegeButton,{code:"user_update_user"},w.default.createElement(g.default,{title:"编辑"},w.default.createElement(b.default,{onClick:function(){return Re(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))))}}],_e=function(e){var t=new FormData;t.append("id",e),x.Axios.post("/user/user/deleteUser",t).then((function(t){t.code||W(e)}))},Re=function(e){X(e),V(!0),Y(!0)};return w.default.createElement("div",{className:"user_content"},w.default.createElement("div",{className:"user-detail"},w.default.createElement(j.TitleAction,{title:"用户",style:{paddingLeft:8}},w.default.createElement(y.default,null,w.default.createElement(k.PrivilegeButton,{code:"user_add_user"},w.default.createElement(p.default,{type:"primary",onClick:function(){return V(!0)},icon:w.default.createElement(m.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},G("orga-label.addUser"))),r)),w.default.createElement(c.default,{justify:"space-between",style:{marginBottom:16,paddingLeft:8}},w.default.createElement(y.default,null,w.default.createElement(s.default,{placeholder:"请选择用户目录",onSelect:function(e){ue(1);var t=T(T({},se),{},{pageParam:{pageSize:te,currentPage:1}});"-1"!==e?t.dirId=e:delete t.dirId,pe(t)},style:{width:"240px"},defaultValue:"-1"},w.default.createElement(s.default.Option,{key:"-1",value:"-1"},"用户目录"),he.map((function(e){return w.default.createElement(s.default.Option,{key:e.id,value:e.id},e.name)}))),w.default.createElement(d.default,{placeholder:G("orga-label.searchUserAccount"),value:ge,onChange:function(e){return be(e.target.value)},onPressEnter:function(e){return function(e){ue(1);var t=T(T({},se),{},{pageParam:{pageSize:te,currentPage:1}});e.target.value?t.name=e.target.value:delete t.name,pe(t)}(e)},style:{width:"240px"},prefix:w.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})}))),w.default.createElement(c.default,null,w.default.createElement(l.default,{span:24},w.default.createElement(o.default,{columns:De,dataSource:M,rowKey:function(e){return e.id},pagination:{current:ne,pageSize:te,total:oe,showSizeChanger:!1,position:["bottomCenter"]},onChange:function(e,t,r){return function(e,t,r){var a=[];ue(e.current),Array.isArray(r)?a=r.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):r.field&&a.push({name:r.field,sortType:void 0!==r.order?"ascend"===r.order?"asc":"desc":void 0});var n=T(T({},se),{},{orderParams:a,pageParam:{pageSize:te,currentPage:e.current}});pe(n)}(e,0,r)}}))),w.default.createElement(I.default,(0,i.default)({},e,{visible:q,onCancel:function(){X({}),Y(!1),V(!1),Ue(se)},addUser:L,isEdit:H,data:(0,P.toJS)(Q),editUser:C,getList:Ue,listParams:se,userDir:he,bgroup:D}))))})));t.default=M},695:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(57);var n=a(r(51)),u=a(r(419)),i=a(r(215)),l=a(r(0));r(696);var o=["children","title","width"],c=function(e){var t=e.children,r=e.title,a=e.width,c=(0,i.default)(e,o);return l.default.createElement(n.default,(0,u.default)({title:r,width:a,style:{maxWidth:"calc(100vw - 120px)",maxHeight:"calc(100vh - 120px)",marginRight:"auto",marginLeft:"auto",position:"absolute",top:60,right:0,left:0,height:"100%",display:"flex",flexDirection:"column"},wrapClassName:"tiklab_modal",closable:!1},c),t)};t.default=c},696:function(e,t,r){"use strict";r.r(t)},697:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(42);var n=a(r(38));r(29);var u=a(r(9)),i=a(r(205)),l=a(r(0)),o=r(30);r(698);var c=function(e){var t=e.routes,r=e.children;return l.default.createElement("div",{className:"privilege-breadcrumb"},l.default.createElement(n.default,{itemRender:function(e,t,r){var a=r.indexOf(e)===r.length-1,n=0===r.indexOf(e);return e.disabled?l.default.createElement("span",null,e.breadcrumbName):n?e.click?l.default.createElement(u.default,null,l.default.createElement(i.default,{onClick:function(){return e.click()},style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName):l.default.createElement(o.Link,{to:e.path},l.default.createElement(u.default,null,l.default.createElement(i.default,{style:{fontSize:"var(--tiklab-font-16)"}}),e.breadcrumbName)):a?l.default.createElement("span",null,e.breadcrumbName):e.click?l.default.createElement("a",{onClick:function(){return e.click()},style:{cursor:"pointer"}},e.breadcrumbName):e.path?l.default.createElement(o.Link,{to:e.path},e.breadcrumbName):l.default.createElement(l.default.Fragment,null,e.breadcrumbName)},routes:t}),r)};t.default=c},698:function(e,t,r){"use strict";r.r(t)},699:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=a(r(372));r(41);var u=a(r(35)),i=a(r(0)),l=r(2);r(700);var o=function(e){var t=e.userInfo,r=void 0===t?void 0:t,a=r||(0,l.getUser)();return i.default.createElement("div",{className:"tiklab-profile"},a.avatar&&"null"!==a.avatar?i.default.createElement(u.default,{src:a.avatar}):a.nickname&&"null"!==a.nickname?i.default.createElement(u.default,null,a.nickname.substring(0,1)):a.name&&"null"!==a.name?i.default.createElement(u.default,null,a.name.substring(0,1)):i.default.createElement(u.default,{size:32,icon:i.default.createElement(n.default,null)}))};t.default=o},700:function(e,t,r){"use strict";r.r(t)},701:function(e,t,r){"use strict";var a=r(150);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(36);var n=a(r(10));r(37);var u=a(r(12));r(29);var i=a(r(9)),l=a(r(0));r(702);var o=function(e){var t=e.title,r=e.icon,a=e.children,o=e.style,c=void 0===o?{}:o;return l.default.createElement(n.default,null,l.default.createElement(u.default,{span:24},l.default.createElement("div",{className:"tiklab_title",style:c},l.default.createElement(i.default,null,r,l.default.createElement("span",null,t)),a)))};t.default=o},702:function(e,t,r){"use strict";r.r(t)},703:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(65));r(460);var i=a(r(448));r(62);var l=a(r(25));r(109);var o=a(r(47));r(52);var c=a(r(22));r(74);var d=a(r(21)),f=a(r(95)),s=a(r(215)),p=a(r(405));r(80);var m=a(r(18)),v=a(r(162)),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),b=r(33),y=r(444),O=["role"];function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){var t=e.visible,r=e.onCancel,a=e.isEdit,n=void 0!==a&&a,f=e.data,h=void 0===f?{}:f,E=e.userDir,S=void 0===E?[]:E,P=e.bgroup,k=m.default.useForm(),j=(0,v.default)(k,1)[0],x=(0,b.useTranslation)().t,U=(0,g.useState)(1),I=(0,v.default)(U,2),D=I[0],_=I[1],R=(0,g.useState)(10),A=(0,v.default)(R,1)[0],N=(0,g.useState)([]),T=(0,v.default)(N,2),M=T[0],z=T[1],C=(0,g.useState)(0),L=(0,v.default)(C,2),W=L[0],G=L[1];(0,g.useEffect)((function(){n&&(j.setFieldsValue({nickname:h.nickname}),j.setFieldsValue({name:h.name}),j.setFieldsValue({phone:h.phone}),j.setFieldsValue({email:h.email}),j.setFieldsValue({password:h.password}),j.setFieldsValue({dirId:String(h.dirId)}),j.setFieldsValue({role:(h.roleList||[]).map((function(e){return e.id}))}))}),[n,h]),(0,g.useEffect)((function(){F({pageParam:{pageSize:A,currentPage:D},bgroup:P})}),[]);var F=function(e){(0,y.findRolePageService)(e).then((function(t){if(0===t.code){var r=M.concat(t.data.dataList);z(r),r.length>0&&j.setFieldsValue({role:[r[0].id]}),G(t.data.totalRecord),_(e.pageParam.currentPage)}}))},B=function(){j.resetFields(),r()},q=function(){var e=(0,p.default)(u.default.mark((function e(t){var r,a,i,l;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.role,a=(0,s.default)(t,O),i=w(w({},a),{},{type:0,dirId:"1"}),!n){e.next=9;break}return i=w(w({},a),{},{id:h.id,type:h.type,dirId:h.dirId}),e.next=6,(0,y.updateUserService)(i);case 6:l=e.sent,e.next=12;break;case 9:return e.next=11,(0,y.createUserService)(i);case 11:l=e.sent;case 12:0===l.code?n?V(r):J(r,l.data):d.default.error(res.msg);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(e){var t=(h.roleList||[]).map((function(e){return e.id})),r=(h.roleList||[]).reduce((function(e,t,r){return e[t.id]=t.roleUserId,e}),{}),a=t.reduce((function(t,a,n){return e.includes(a)||t.push(r[a]),t}),[]),n=e.reduce((function(e,r,a){return t.includes(r)||e.push(r),e}),[]);0===a.length?J(n,h.id):K(a).then((function(){J(n,h.id)}))},K=function(e){var t=e.map((function(e){return(0,y.deleteRoleUserService)(e)}));return Promise.all(t)},J=function(e,t){if(Array.isArray(e)){var r=e.map((function(e){var r={userId:t,role:{id:e}};return(0,y.createRoleUserService)(r)}));Promise.all(r).then((function(e){B()}))}else{var a={userId:t,role:{id:e}};(0,y.createRoleUserService)(a).then((function(e){0===e.code&&B()}))}},H=function(e,t,r){var a=j.getFieldValue,n=j.setFieldsValue,u=a("phone"),i=a("email"),l=a("name");if(t)switch(e.field){case"name":n({phone:u}),n({email:i});break;case"phone":n({name:l}),n({email:i});break;default:n({name:l}),n({phone:u})}else switch(e.field){case"name":u||i||r("账号、邮箱、手机号不能同时为空");break;case"phone":l||i||r("账号、邮箱、手机号不能同时为空");break;default:l||u||r("账号、邮箱、手机号不能同时为空")}r()};return g.default.createElement(i.default,{placement:"right",onClose:B,visible:t,width:420,title:x(n?"adduser-module.editUser":"adduser-module.addUser"),bodyStyle:{padding:0},style:{top:48,height:"calc(100% - 48px)"},getContainer:!1},g.default.createElement("div",{className:"tiklab_user"},g.default.createElement("div",{className:"tiklab_user_form"},g.default.createElement(m.default,{form:j,onFinish:q,preserve:!1,layout:"vertical"},g.default.createElement(m.default.Item,{label:x("adduser-module.nickname"),name:"nickname",rules:[{required:!0,message:x("adduser-module.nicknameRequired")}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:x("adduser-module.name"),name:"name",rules:[{pattern:/^[a-zA-Z0-9_-]{4,16}$/,message:"账号长度4-16位(字母，数字，下划线，减号)"},{validator:H}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:x("adduser-module.phone"),name:"phone",rules:[{pattern:/^(?:(?:\+|00)86)?1[3-9]\d{9}$/,message:"手机号码不正确"},{validator:H}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:x("adduser-module.email"),name:"email",rules:[{type:"email",message:x("adduser-module.emailFormat")},{validator:H}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),!n&&g.default.createElement(m.default.Item,{label:x("adduser-module.password"),name:"password",rules:[{required:!0,message:x("adduser-module.passwordRequired")}]},g.default.createElement(c.default,{disabled:h.dirId&&"1"!==h.dirId||!1})),g.default.createElement(m.default.Item,{label:x("adduser-module.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:x("adduser-module.userTypeRequired")}]},g.default.createElement(o.default,{disabled:!0},S.map((function(e){return g.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)})))),g.default.createElement(m.default.Item,{label:"角色",name:"role",initialValue:M.length>0?[M[0].id]:[],rules:[{required:!0,message:x("adduser-module.userTypeRequired")}]},g.default.createElement(o.default,{mode:"multiple",onPopupScroll:function(e){e.persist();var t=e.target;t.scrollTop+t.offsetHeight===t.scrollHeight&&(D*A<W&&F({pageParam:{pageSize:A,currentPage:D+1}}))}},M.map((function(e){return g.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)})))))),g.default.createElement("div",{className:"tiklab_user_footer"},g.default.createElement(l.default,{type:"primary",onClick:function(){j.submit()}},x("orga-common.save")))))},P=(0,g.memo)(S);t.default=P},704:function(e,t,r){"use strict";r.r(t)},705:function(e,t,r){"use strict";r(556)},706:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(37);var u=a(r(12));r(86);var i=a(r(23)),l=a(r(230));r(36);var o=a(r(10));r(62);var c=a(r(25));r(29);var d=a(r(9));r(41);var f=a(r(35)),s=a(r(162)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),m=r(202),v=r(2),g=r(406),b=a(r(491));function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}r(556);var O=[{id:2,name:"LDAP",desc:"同步LDAP用户以及组织架构",icon:r(707)},{id:3,name:"钉钉",desc:"同步企业微信用户以及组织架构",icon:r(708)},{id:4,name:"企业微信",desc:"同步企业微信用户以及组织架构",icon:r(709)}],h=function(e){var t=e.router,r=void 0===t?"/setting/dir":t,a=(0,p.useState)([]),n=(0,s.default)(a,2),y=n[0],h=n[1],E=(0,m.useSelector)((function(e){return e.pluginStore})),w=(0,m.useHasPointPlugin)("directory"),S=localStorage.getItem(v.LOCALSTORAGE_KEY.AUTH_CONFIG);if(S){var P=JSON.parse(S);if(!P.authType&&-1===P.appName.indexOf("eas")){var k=P.authUrl+"/#"+r;return p.default.createElement(b.default,{module:"用户目录",link:k})}}(0,p.useEffect)((function(){return j(),function(){return h([])}}),[]);var j=function(){var e={ids:["1"]};try{"mult"===tenant_type&&(e={ids:["0","1"]})}catch(t){e={ids:["1"]}}v.Axios.post("/user/userdir/findDirByIds",e).then((function(e){if(!e.code){var t=e.data;h(t)}}))};return p.default.createElement("div",{className:"directory"},p.default.createElement(o.default,{className:"directory-wrap"},p.default.createElement(u.default,{span:24},p.default.createElement(g.TitleAction,{title:"用户目录"}),p.default.createElement("div",{className:"directory_content"},y.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(d.default,{direction:"vertical"},p.default.createElement("div",null,e.name),p.default.createElement("p",{className:"directory_content_desc"},"这是一个描述内容")))),p.default.createElement(d.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})),w?p.default.createElement(m.RemoteComponent,{point:"directory",pluginStore:E,isModalType:!0}):p.default.createElement(p.default.Fragment,null,O.map((function(e){return p.default.createElement(o.default,{justify:"space-between",align:"middle",key:e.id,style:{padding:16}},p.default.createElement("div",{className:"directory_content_item"},p.default.createElement(f.default,{size:64,src:e.icon.default}),p.default.createElement("div",{className:"directory_content_item_title"},p.default.createElement(d.default,{direction:"vertical"},p.default.createElement(d.default,null,p.default.createElement("div",null,e.name),p.default.createElement(i.default,{placement:"topRight",title:"增强功能需要去官网购买Licence"},p.default.createElement(l.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}))),p.default.createElement("p",{className:"directory_content_desc"},e.desc)))),p.default.createElement(d.default,null,p.default.createElement(c.default,{disabled:!0},"同步数据"),p.default.createElement(c.default,{disabled:!0},"开启"),p.default.createElement(c.default,{disabled:!0},"禁止"),p.default.createElement(c.default,{disabled:!0},"配置")))})))))))};t.default=h},707:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/ldap.jpeg"},708:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/dingding.jpeg"},709:function(e,t,r){"use strict";r.r(t),t.default=r.p+"images/qywechat.jpeg"},710:function(e,t,r){"use strict";r(557)},711:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(277);var u=a(r(97)),i=a(r(95)),l=a(r(162)),o=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=y(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),c=r(34),d=r(2),f=r(103),s=a(r(712)),p=a(r(715)),m=a(r(491)),v=r(406),g=r(222),b=r(473);function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(y=function(e){return e?r:t})(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}r(557);var h=(0,c.inject)(g.ORG_STORE,f.SYSTEM_ROLE_STORE)((0,c.observer)((function(e){var t=e.orgStore,r=e.systemRoleStore,a=e.router,n=void 0===a?"/setting/orga":a,c=t.treeData,f=t.selectData,g=t.getTree,y=t.selectTreeOrgDetail,h=(0,o.useState)(""),E=(0,l.default)(h,2),w=E[0],S=E[1],P=(0,o.useState)(null),k=(0,l.default)(P,2),j=k[0],x=k[1],U=(0,o.useState)(10),I=(0,l.default)(U,1)[0],D=(0,o.useState)(1),_=(0,l.default)(D,2),R=_[0],A=_[1],N=(0,o.useState)(0),T=(0,l.default)(N,2),M=T[0],z=T[1],C=(0,o.useState)([]),L=(0,l.default)(C,2),W=L[0],G=L[1],F=(0,o.useState)({}),B=(0,l.default)(F,2),q=B[0],V=B[1],K=localStorage.getItem(d.LOCALSTORAGE_KEY.AUTH_CONFIG);if(K){var J=JSON.parse(K);if(!J.authType&&-1===J.appName.indexOf("eas")){var H=J.authUrl+"/#"+n;return o.default.createElement(m.default,{module:"部门",link:H})}}(0,o.useEffect)((function(){Y()}),[q]);var Y=function(){(0,b.findOrgaTreeService)(q).then((function(e){if(!e.code){if(e.data.length){var t=e.data[0];Z({orgaId:t.orgaId}),S(t.orgaId)}else y(null),S("");g(e.data)}}))},$=function(e,t,r){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){(0,i.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({pageParam:{currentPage:t,pageSize:I}},e);(0,b.findUserOrgaPageService)(a).then((function(e){e.code||(z(e.data.totalRecord),G(e.data.dataList))}))},Z=function(e){e.parentOrga?x(e.parentOrga.orgaId):x(null),(0,b.findOrgaService)(e.orgaId).then((function(t){t.code||(S(e.orgaId),A(1),y({orgName:t.data.orgaName,parentOrg:t.data.parentOrga?t.data.parentOrga.orgaName:null,userDirType:t.data.dirId}),$({orgaId:e.orgaId},1))})).catch((function(e){console.log(e)}))},Q=function(e){A(e),$({orgaId:w},e)};return o.default.createElement("div",{className:"orga_container"},o.default.createElement("div",{className:"orga_container_body"},o.default.createElement(s.default,{treeData:c,onSelect:Z,treeParams:q,getAllTree:Y,setTreeParams:V,orgStore:t,systemRoleStore:r}),o.default.createElement("div",{className:"orga_table"},o.default.createElement("div",{className:"orga_table_right"},o.default.createElement(v.TitleAction,{title:"部门",style:{paddingLeft:8}}),f?o.default.createElement(p.default,{data:f,tableData:W,pagination:{current:R,pageSize:I,total:M,onChange:Q,showSizeChanger:!1,position:["bottomCenter"]},orgId:w,parentOrgaId:j,getOrgaUser:$,restTableData:Q}):o.default.createElement("div",{className:"org-table"},o.default.createElement(u.default,{description:o.default.createElement("span",null,"组织树结构为空，你需要创建一个")}))))))})));t.default=h},712:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(760);var u=a(r(726));r(52);var i=a(r(22)),l=a(r(278));r(109);var o=a(r(47)),c=a(r(373));r(29);var d=a(r(9));r(136);var f=a(r(96)),s=a(r(502));r(86);var p=a(r(23)),m=a(r(220)),v=a(r(95));r(74);var g=a(r(21)),b=a(r(162)),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=P(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),O=r(4),h=r(33),E=r(334),w=r(473),S=a(r(713));function P(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(P=function(e){return e?r:t})(e)}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}r(714);var x=function(e){var t=e.treeData,r=e.onSelect,a=e.orgStore,n=e.getAllTree,v=e.setTreeParams,P=e.treeParams,k=void 0===P?{}:P,x=e.systemRoleStore,U=a.deleteTree,I=(0,h.useTranslation)().t,D=(0,y.useState)(!1),_=(0,b.default)(D,2),R=_[0],A=_[1],N=(0,y.useState)({}),T=(0,b.default)(N,2),M=T[0],z=T[1],C=(0,y.useState)(!1),L=(0,b.default)(C,2),W=L[0],G=L[1],F=(0,y.useState)([]),B=(0,b.default)(F,2),q=B[0],V=B[1];(0,y.useEffect)((function(){return H(),function(){return V([])}}),[]);var K,J,H=function(){(0,w.findOpenUserDirListService)().then((function(e){e.code||V(e.data)}))},Y=function(e){z(e),A(!0)},$=function(e,t){switch(e.key){case"1":Y(t);break;case"2":r=t,(0,w.findOrgaService)(r.orgaId).then((function(e){e.code||(z(e.data),G(!0),A(!0))}));break;case"3":!function(e){if(e.children.length>0)return g.default.error("组织中存在部门,不能删除");(0,w.deleteOrgaService)(e.orgaId).then((function(t){t.code||(U(e.orgaId),n())}))}(t);break;default:Y(t.orgaId)}var r},Z=function(e){return y.default.createElement("span",{className:"orga-tree_item_action"},"111111"===e.orgaId?y.default.createElement(d.default,null,y.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),e.orgaName):e.orgaName,"1"===e.dirId&&function(e){return y.default.createElement("div",{className:"tiklab_tree_actions"},y.default.createElement(d.default,null,y.default.createElement(E.PrivilegeButton,{code:"orga_add_orga"},y.default.createElement(p.default,{title:"添加部门"},y.default.createElement(m.default,{onClick:function(){return Y(e)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))),y.default.createElement(f.default,{overlay:(t=e,"111111"===t.orgaId?y.default.createElement(E.MenuAction,{style:{width:140},onClick:function(e){return $(e,t)},data:[{id:"2",title:"编辑组织",purviewCode:"orga_update_orga"}],allPromise:x.systemPermissions}):y.default.createElement(E.MenuAction,{style:{width:140},onClick:function(e){return $(e,t)},data:[{id:"2",title:"编辑组织",purviewCode:"orga_update_orga"},{id:"3",title:"删除组织",purviewCode:"orga_delete_orga"}],allPromise:x.systemPermissions}))},y.default.createElement(s.default,{style:{fontSize:"var(--tiklab-icon-size-16)",padding:4}}))));var t}(e))};return y.default.createElement("div",{className:"orga-tree-wrap"},y.default.createElement(i.default.Group,{compact:!0},y.default.createElement(o.default,{placeholder:"目录类型",style:{width:"40%"},onSelect:function(e){-1===e?k.orgaName?v({orgaName:k.orgaName}):v({}):v(j(j({},k),{},{dirId:e}))}},y.default.createElement(o.default.Option,{key:"-1",value:-1},I("orga-table.all")),q.map((function(e){return y.default.createElement(o.default.Option,{key:e.id,value:e.id},e.name)}))),y.default.createElement(i.default,{placeholder:I("orga-common.search")+I("orga-common.orga")+I("orga-common.name"),style:{width:"60%"},onPressEnter:function(e){return function(e){var t=e.target.value;v(j(j({},k),{},{orgaName:t}))}(e)},prefix:y.default.createElement(l.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})})),y.default.createElement("div",{className:"orga-tree-wrap-tree"},y.default.createElement("div",{className:"orga-tree-content"},y.default.createElement(u.default,{className:"draggable-tree",draggable:!0,blockNode:!0,onDrop:function(e){var t=e.node.props.eventKey,r=e.dragNode.props.eventKey,a=e.node.parentOrga.orgaId,u=e.dragNode.parentOrga.orgaId,i=e.node.sort,l=e.dragNode.sort;if(a!==u)return g.default.error("仅允许同层级部门排序");var o={list:[{parentOrga:e.node.parentOrga,orgaName:e.node.orgaName,orgaId:t,sort:l,dirId:e.node.dirId},{parentOrga:e.dragNode.parentOrga,orgaName:e.dragNode.orgaName,orgaId:r,sort:i,dirId:e.dragNode.dirId}]};(0,w.updateOrgaSortService)(o).then((function(e){n()}))},defaultSelectedKeys:["111111"],treeData:(K=(0,O.toJS)(t),J=[],function e(t,r){t.forEach((function(t,a){var n={key:t.orgaId,orgaName:t.orgaName,title:Z(t),sort:t.sort,dirId:t.dirId,parentOrga:t.parentOrga,children:[]};r.push(n),t.children&&t.children.length>0&&e(t.children,r[a].children)}))}(K,J),J),onSelect:function(e,t){var a=t.node,n={orgaName:a.orgaName,parentOrga:a.parentOrga,sort:a.sort,orgaId:a.key,dirId:a.dirId,path:a.path};r(n)},defaultExpandAll:!0}))),y.default.createElement(S.default,{visible:R,cancelAddOrg:function(){A(!1),z({}),G(!1)},editData:M,isEdit:W,getAllTree:n,userDir:q}))};t.default=x},713:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(109);var u=a(r(47));r(346);var i=a(r(288));r(52);var l=a(r(22)),o=a(r(95));r(80);var c=a(r(18)),d=a(r(162)),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),s=r(4),p=r(33),m=r(406),v=r(2),g=r(473);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,o.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=(0,f.memo)((function(e){var t=e.visible,r=e.cancelAddOrg,a=e.editData,n=void 0===a?{}:a,o=e.isEdit,b=void 0!==o&&o,y=e.getAllTree,h=e.userDir,E=void 0===h?[]:h,w=c.default.useForm(),S=(0,d.default)(w,1)[0],P=(0,p.useTranslation)().t,k=(0,f.useState)(null),j=(0,d.default)(k,2),x=j[0],U=j[1],I=(0,f.useState)([]),D=(0,d.default)(I,2),_=D[0],R=D[1];(0,f.useEffect)((function(){n&&(b?(S.setFieldsValue({parentOrga:n.parentOrga?n.parentOrga.orgaId:null,orgaName:n.orgaName,dirId:n.dirId}),U(n.path)):(S.setFieldsValue({parentOrga:n.orgaId}),n.path?U("".concat(n.orgaId,",").concat(n.path)):U("".concat(n.orgaId))))}),[n,b]),(0,f.useEffect)((function(){t&&(0,g.findOrgaTreeService)({dirId:"1"}).then((function(e){e.code||R(e.data)}))}),[t]);var A;return f.default.createElement(m.BaseModal,{title:b?P("orga-common.edit")+P("orga-common.orga"):P("orga-common.add")+P("orga-common.orga"),visible:t,onOk:function(){S.submit()},onCancel:function(){S.resetFields(),r()},destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:P("orga-common.back"),okText:P("orga-common.save")},f.default.createElement(c.default,{form:S,onFinish:function(e){var t="/user/orga/createOrga",a={orgaName:e.orgaName,parentOrga:{orgaId:e.parentOrga},dirId:e.dirId,path:x};b&&(t="/user/orga/updateOrga",a=O(O({},a),{},{orgaId:n.orgaId})),v.Axios.post(t,a).then((function(e){e.code||(y(),S.resetFields(),r())}))},layout:"vertical"},f.default.createElement(c.default.Item,{label:P("orga-label.orgaName"),name:"orgaName",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},f.default.createElement(l.default,null)),f.default.createElement(c.default.Item,{label:P("orga-label.parentOrg"),name:"parentOrga"},f.default.createElement(i.default,{disabled:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(A=[],function e(t,r){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var u={};if(t.orgaId===n.orgaId){if(u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:!0},r.push(u),t.children&&t.children.length>0)return e(t.children,u.children=[],u.disabled)}else u={title:t.orgaName,value:t.orgaId,path:t.path,disabled:a},r.push(u);if(t.children&&t.children.length>0)return e(t.children,u.children=[],a)}))}((0,s.toJS)(_.filter((function(e){return!e.parentOrga}))),A),A),placeholder:P("orga-label.parentOrgPlaceholder"),treeDefaultExpandedKeys:[_.length>0&&_[0].orgaId],onChange:function(e,t,r){var a=r.triggerNode.props.path;U(a?"".concat(a,",").concat(e):e)}})),f.default.createElement(c.default.Item,{label:P("orga-label.userType"),name:"dirId",initialValue:"1",rules:[{required:!0,message:P("orga-table.userTypeRequired")}]},f.default.createElement(u.default,{disabled:!0},E.map((function(e){return f.default.createElement(u.default.Option,{key:e.id,value:e.id},e.name)}))))))})),E=(0,f.memo)(h);t.default=E},714:function(e,t,r){"use strict";r.r(t)},715:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(419));r(49);var i=a(r(26));r(62);var l=a(r(25)),o=a(r(220));r(36);var c=a(r(10));r(37);var d=a(r(12));r(86);var f=a(r(23)),s=a(r(279));r(29);var p=a(r(9)),m=a(r(162)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=E(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),g=r(334),b=r(406),y=r(33),O=a(r(716)),h=r(473);function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(E=function(e){return e?r:t})(e)}r(717);var w=function(e){var t=e.data,r=e.tableData,a=e.pagination,n=e.orgId,E=e.parentOrgaId,w=e.getOrgaUser,S=e.restTableData,P=(0,v.useMemo)((function(){return a}),[a]),k=(0,v.useState)(!1),j=(0,m.default)(k,2),x=j[0],U=j[1],I=(0,v.useState)([]),D=(0,m.default)(I,2),_=D[0],R=D[1],A=(0,y.useTranslation)().t;(0,v.useEffect)((function(){return N(),function(){return R([])}}),[]);var N=function(){(0,h.findOpenUserDirListService)().then((function(e){e.code||R(e.data)}))},T=[{title:A("orga-table.nickname"),dataIndex:["user","nickname"],width:"25%",render:function(e,t){return v.default.createElement(p.default,null,v.default.createElement(b.Profile,{userInfo:t.user})," ",e)}},{title:A("orga-table.name"),dataIndex:["user","name"],width:"25%"},{title:A("orga-table.orgaName"),dataIndex:["orga","orgaName"],width:"20%"},{title:A("orga-table.type"),dataIndex:["user","dirId"],width:"20%",render:function(e){var t=_.findIndex((function(t){return t.id==e}));return t>-1?_[t].name:"--"}},{title:A("orga-common.action"),key:"action",width:"10%",render:function(e,t){return"1"===t.user.dirId&&v.default.createElement(p.default,{size:"middle"},v.default.createElement(g.PrivilegeButton,{code:"orga_delete_orga"},v.default.createElement(f.default,{title:"删除"},v.default.createElement(s.default,{onClick:function(){return M(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}}))))}}],M=function(e){(0,h.deleteUserOrgaService)(e).then((function(e){e.code||S(1)}))};return v.default.createElement("div",{className:"org-detail"},v.default.createElement(c.default,{style:{margin:"10px 0",paddingLeft:8}},v.default.createElement(d.default,{span:24},v.default.createElement(p.default,null,v.default.createElement("div",{className:"org-detail-item"},v.default.createElement("label",null,A("orga-label.orgaName"),":"),t.orgName),v.default.createElement("div",{className:"org-detail-item"},v.default.createElement("label",null,A("orga-label.parentOrg"),":")," ",t.parentOrg||"无上级")))),v.default.createElement(c.default,{style:{paddingLeft:8}},v.default.createElement(d.default,{span:24},v.default.createElement("div",{className:"org-detail_title2_main"},v.default.createElement("span",{className:"org-detail_user_title2"},"用户(",P.total,")"),v.default.createElement(g.PrivilegeButton,{code:"orga_add_user"},v.default.createElement(l.default,{type:"primary",onClick:function(){U(!0)},disabled:"1"!==t.userDirType,icon:v.default.createElement(o.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})},A("orga-label.addUser")))))),v.default.createElement(c.default,null,v.default.createElement("div",{className:"org-detail-table"},v.default.createElement(i.default,{columns:T,dataSource:r,pagination:P,rowKey:function(e){return e.id},tableLayout:"fixed"}))),v.default.createElement(O.default,(0,u.default)({},e,{orgId:n,parentOrgaId:E,visible:x,onCancel:function(){return U(!1)},getOrgaUser:w,dirId:t.dirId})))};t.default=w},716:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var u=a(r(26));r(36);var i=a(r(10));r(37);var l=a(r(12));r(52);var o=a(r(22)),c=a(r(278));r(29);var d=a(r(9));r(74);var f=a(r(21)),s=a(r(95)),p=a(r(162)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),v=r(406),g=r(2),b=r(33),y=r(444);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function h(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw u}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){(0,s.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var P=function(e){var t=(0,b.useTranslation)().t,r=e.visible,a=e.onCancel,n=e.orgId,s=(e.parentOrgaId,e.getOrgaUser),O=(e.dirId,(0,m.useState)([])),E=(0,p.default)(O,2),w=E[0],P=E[1],k=(0,m.useState)([]),j=(0,p.default)(k,2),x=j[0],U=j[1],I=(0,m.useState)(10),D=(0,p.default)(I,1)[0],_=(0,m.useState)(1),R=(0,p.default)(_,2),A=R[0],N=R[1],T=(0,m.useState)(0),M=(0,p.default)(T,2),z=M[0],C=M[1],L=(0,m.useState)({pageParam:{pageSize:D,currentPage:A}}),W=(0,p.default)(L,2),G=W[0],F=W[1],B=(0,m.useState)([]),q=(0,p.default)(B,2),V=q[0],K=q[1];(0,m.useEffect)((function(){return J(),function(){return K([])}}),[]),(0,m.useEffect)((function(){H(S({},G))}),[G]);var J=function(){g.Axios.post("/user/userdir/findAllList").then((function(e){e.code||K(e.data)}))},H=function(e){(0,y.findUserPageService)(e).then((function(e){e.code||(C(e.data.totalRecord),U(e.data.dataList))}))},Y=[{title:t("orga-table.name"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return m.default.createElement(d.default,null,m.default.createElement(v.Profile,{userInfo:t})," ",e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"10%",ellipsis:!0,render:function(e){var t=V.findIndex((function(t){return t.id===e}));return t>-1?V[t].name:"--"}}],$={selectedRowKeys:w,onChange:function(e){P(e)}};return m.default.createElement(v.BaseModal,{title:"选择用户",visible:r,onOk:function(){(function(){var e={orgaId:n,pageParam:{pageSize:9999999,currentPage:1}};return g.Axios.post("/user/userOrga/findUserOrgaList",e)})().then((function(e){if(!e.code){var t,r=!1,u=e.data.map((function(e){return e.user.id})),i=h(w);try{var l=function(){var e=t.value;if(r)return"break";r=u.some((function(t){return e===t}))};for(i.s();!(t=i.n()).done;){if("break"===l())break}}catch(e){i.e(e)}finally{i.f()}if(r)return f.default.error("存在关联的用户");var o=w.map((function(e){return t={user:{id:e},orga:{orgaId:n}},g.Axios.post("/user/userOrga/createUserOrga",t);var t}));Promise.all(o).then((function(e){F({pageParam:{pageSize:D,currentPage:1}}),P([]),N(1),C(0),a(),s({orgaId:n},1)}))}}))},onCancel:function(){F({pageParam:{pageSize:D,currentPage:1}}),P([]),N(1),C(0),a(),s({orgaId:n},1)},width:800,destroyOnClose:!0,okText:t("orga-common.save"),cancelText:t("orga-common.back")},m.default.createElement(i.default,{style:{paddingBottom:16}},m.default.createElement(l.default,{span:24},m.default.createElement(o.default,{placeholder:"搜索账号、手机号、邮箱",style:{width:240},onPressEnter:function(e){return function(e){var t=e.target.value,r=S(S({},G),{},{name:t,pageParam:{pageSize:D,currentPage:1}});F(r)}(e)},prefix:m.default.createElement(c.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}})}))),m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement("div",{style:{width:"100%"}},m.default.createElement(u.default,{columns:Y,dataSource:x,rowSelection:$,rowKey:function(e){return e.id},pagination:{current:A,pageSize:D,total:z,onChange:function(e){N(e);var t=S(S({},G),{},{pageParam:{pageSize:D,currentPage:e}});F(t)}}})))))},k=(0,m.memo)(P);t.default=k},717:function(e,t,r){"use strict";r.r(t)},718:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(65));r(499);var i=a(r(476));r(52);var l=a(r(22));r(74);var o=a(r(21)),c=a(r(95)),d=a(r(405));r(80);var f=a(r(18)),s=a(r(162)),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=b(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),m=r(406),v=r(33),g=r(474);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(b=function(e){return e?r:t})(e)}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,c.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var h=function(e){var t=e.isBase,r=e.open,a=e.data,n=e.onCancel,c=f.default.useForm(),b=(0,s.default)(c,1)[0],y=(0,v.useTranslation)().t;(0,p.useEffect)((function(){a&&(b.setFieldsValue({name:a.name}),b.setFieldsValue({description:a.description}),b.setFieldsValue({type:a.type}))}),[a]);var h=function(){b.resetFields(),n()},E=function(){var e=(0,d.default)(u.default.mark((function e(r){var n,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=O(O({},r),{},{group:t?"system":"custom"}),!a){e.next=8;break}return i=O(O({},a),i),e.next=5,(0,g.updateUserGroupService)(i);case 5:n=e.sent,e.next=11;break;case 8:return e.next=10,(0,g.createUserGroupService)(i);case 10:n=e.sent;case 11:0===n.code?(o.default.success("成功"),h()):o.default.error("失败");case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return p.default.createElement(m.BaseModal,{title:"用户组",visible:r,onOk:function(){b.submit()},onCancel:h,destroyOnClose:!0,preserve:!1,forceRender:!0,cancelText:y("orga-common.back"),okText:y("orga-common.save")},p.default.createElement(f.default,{form:b,onFinish:E,layout:"vertical"},p.default.createElement(f.default.Item,{label:"用户组名称",name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},p.default.createElement(l.default,{placeholder:"用户组名称"})),t&&p.default.createElement(f.default.Item,{label:"设置管理员组",name:"type",initialValue:0},p.default.createElement(i.default.Group,null,p.default.createElement(i.default,{value:0},"普通组"),p.default.createElement(i.default,{value:1},"管理员组"))),p.default.createElement(f.default.Item,{label:"描述",name:"description"},p.default.createElement(l.default,{placeholder:"用户组名称"}))))};t.default=h},719:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var u=a(r(26));r(36);var i=a(r(10));r(37);var l=a(r(12));r(62);var o=a(r(25)),c=a(r(205)),d=a(r(95)),f=a(r(162));r(29);var s=a(r(9));r(86);var p=a(r(23)),m=a(r(279)),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),g=r(33),b=r(474),y=a(r(720)),O=r(406);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var S=function(e){var t=e.onCancel,r=e.groupData,a=(0,g.useTranslation)().t,n=[{title:"昵称",dataIndex:"nickname"},{title:"账号",dataIndex:"name"},{title:a("orga-table.email"),dataIndex:"email",render:function(e){return e||"--"}},{title:a("orga-common.action"),key:"action",width:"10%",render:function(e,t){var r=t.type;return v.default.createElement(s.default,{size:"middle"},1!==r&&v.default.createElement(p.default,{title:"删除"},v.default.createElement(m.default,{onClick:function(){return A(t.groupUserLinkUserId)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],d=(0,v.useState)([]),h=(0,f.default)(d,2),E=h[0],S=h[1],P=(0,v.useState)(!1),k=(0,f.default)(P,2),j=k[0],x=k[1],U=(0,v.useState)([]),I=(0,f.default)(U,2),D=I[0],_=I[1];(0,v.useEffect)((function(){r&&R()}),[r]);var R=function(){var e={groupId:r.id};(0,b.findUserWithGroupUserListService)(e).then((function(e){if(0===e.code){var t=e.data.map((function(e){return w(w({},e.user),{},{groupUserLinkUserId:e.id})})),r=t.map((function(e){return e.id}));_(r),S(t)}}))},A=function(e){(0,b.deleteUserWithGroupUserService)(e).then((function(e){R()}))};return v.default.createElement("main",{className:"tiklab_userGroup_main"},v.default.createElement(i.default,null,v.default.createElement(l.default,{span:24},v.default.createElement(O.TitleAction,{title:r.name,icon:v.default.createElement(o.default,{type:"link",icon:v.default.createElement(c.default,null),onClick:t})}))),v.default.createElement(i.default,null,v.default.createElement(s.default,null,v.default.createElement("div",{className:"label_item"},v.default.createElement("label",null,"名称:"),v.default.createElement("span",null,r.name)),v.default.createElement("div",{className:"label_item"},v.default.createElement("label",null,"类型:"),v.default.createElement("span",null,"system"===r.group?"内置":"自定义")))),v.default.createElement(s.default,{direction:"vertical",size:"middle"},v.default.createElement(i.default,{justify:"space-between"},v.default.createElement(O.TitleAction,{title:"用户(".concat(E.length,")")}),v.default.createElement(o.default,{type:"primary",onClick:function(){x(!0)}},"添加用户")),v.default.createElement(u.default,{columns:n,dataSource:E,rowKey:function(e){return e.id},pagination:!1})),v.default.createElement(y.default,{open:j,onCancel:function(){x(!1),R()},defaultSelectedRowKeys:D,userGroupId:r.id,groupUserType:r.type}))};t.default=S},720:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var u=a(r(26));r(36);var i=a(r(10));r(37);var l=a(r(12));r(52);var o=a(r(22)),c=a(r(278));r(74);var d=a(r(21)),f=a(r(95));r(29);var s=a(r(9)),p=a(r(162)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=O(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),v=r(33),g=r(444),b=r(406),y=r(474);function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(O=function(e){return e?r:t})(e)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){(0,f.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=function(e){var t=e.open,r=e.onCancel,a=e.defaultSelectedRowKeys,n=e.userGroupId,f=e.groupUserType,O=void 0===f?0:f,h=(0,v.useTranslation)().t,w=(0,m.useState)(""),S=(0,p.default)(w,2),P=S[0],k=S[1],j=(0,m.useState)([]),x=(0,p.default)(j,2),U=x[0],I=x[1],D=(0,m.useState)([]),_=(0,p.default)(D,2),R=_[0],A=_[1],N=(0,m.useState)(0),T=(0,p.default)(N,2),M=T[0],z=T[1],C=(0,m.useState)(10),L=(0,p.default)(C,1)[0],W=(0,m.useState)(1),G=(0,p.default)(W,2),F=G[0],B=G[1],q=(0,m.useState)({pageParam:{pageSize:L,currentPage:F}}),V=(0,p.default)(q,2),K=V[0],J=V[1],H=[{title:h("orga-table.nickname"),dataIndex:"nickname",key:"nickname",width:"20%",ellipsis:!0,render:function(e,t){return m.default.createElement(s.default,null,m.default.createElement(b.Profile,{userInfo:t})," ",e)}},{title:h("orga-table.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0},{title:h("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:h("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:h("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0}],Y=(0,m.useRef)(null);(0,m.useEffect)((function(){return Y.current=!0,$(K),function(){Y.current=!1}}),[K]),(0,m.useEffect)((function(){a&&I(a)}),[a]);var $=function(e){(0,g.findUserPageService)(e).then((function(e){!e.code&&Y.current&&(z(e.data.totalRecord),A(e.data.dataList))}))},Z=function(){r()},Q={preserveSelectedRowKeys:!0,selectedRowKeys:U,onChange:function(e){I(e)},getCheckboxProps:function(e){var t=e.type;e.id;return U.includes(e.id)&&t>0&&O>0?{disabled:!0}:{disabled:!1}}};return m.default.createElement(b.BaseModal,{title:"添加用户",visible:t,onOk:function(){var e={userGroup:{id:n},userIds:U};(0,y.createBatchUserWithGroupUserService)(e).then((function(e){if(0!==e.code)return d.default.error(e.msg);Z()}))},onCancel:Z,width:1200,destroyOnClose:!0,cancelText:h("orga-common.back"),okText:h("orga-common.save")},m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement(o.default,{placeholder:"账号搜索",prefix:m.default.createElement(c.default,null),style:{width:240},value:P,onChange:function(e){return k(e.target.value)},onPressEnter:function(e){return function(e){var t=e.target.value,r=E(E({},K),{},{nickname:t,pageParam:{pageSize:L,currentPage:1}});B(1),J(r)}(e)}}))),m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement("div",{style:{width:"100%"}},m.default.createElement(u.default,{columns:H,dataSource:R,rowSelection:Q,rowKey:function(e){return e.id},pagination:{current:F,pageSize:L,total:M,onChange:function(e){B(e);var t=E(E({},K),{},{pageParam:{pageSize:L,currentPage:e}});J(t)},position:["bottomCenter"]}})))))};t.default=w},721:function(e,t,r){"use strict";r(561)},722:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=a(r(65)),i=a(r(419));r(37);var l=a(r(12));r(49);var o=a(r(26));r(36);var c=a(r(10));r(52);var d=a(r(22)),f=a(r(278));r(109);var s=a(r(47));r(62);var p=a(r(25)),m=a(r(220)),v=a(r(95)),g=a(r(405)),b=a(r(279));r(86);var y=a(r(23)),O=a(r(735));r(29);var h=a(r(9));r(80);var E=a(r(18)),w=a(r(162)),S=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=A(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),P=r(34),k=r(2),j=r(33),x=r(406),U=r(222),I=a(r(723)),D=r(444);r(561);var _=r(562),R=r(4);function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(A=function(e){return e?r:t})(e)}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){(0,v.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var M=(0,P.inject)(U.DOMAIN_USER_STORE)((0,P.observer)((function(e){var t=e.domainId,r=e.domainUserStore,a=e.bgroup,n=void 0===a?"eas":a,v=r.getDomainUser,P=r.deleteDomainUser,U=r.privilegeDomainUsers,A=(0,j.useTranslation)().t,N=E.default.useForm(),M=(0,w.default)(N,1)[0],z=(0,S.useState)([]),C=(0,w.default)(z,2),L=C[0],W=C[1],G=(0,S.useState)({}),F=(0,w.default)(G,2),B=F[0],q=F[1],V=(0,S.useState)(!1),K=(0,w.default)(V,2),J=K[0],H=K[1],Y=(0,S.useState)([]),$=(0,w.default)(Y,2),Z=$[0],Q=$[1],X=(0,S.useState)(!1),ee=(0,w.default)(X,2),te=ee[0],re=ee[1],ae=(0,S.useState)(""),ne=(0,w.default)(ae,2),ue=ne[0],ie=ne[1],le=(0,S.useState)(10),oe=(0,w.default)(le,1)[0],ce=(0,S.useState)(1),de=(0,w.default)(ce,2),fe=de[0],se=de[1],pe=(0,S.useState)(0),me=(0,w.default)(pe,2),ve=me[0],ge=me[1],be=(0,S.useState)({domainId:t,pageParam:{pageSize:oe,currentPage:fe}}),ye=(0,w.default)(be,2),Oe=ye[0],he=ye[1],Ee=[{title:A("orga-table.nickname"),dataIndex:["user","nickname"],key:"nickname",width:"20%",render:function(e,t){return S.default.createElement(h.default,null,S.default.createElement(x.Profile,{userInfo:t})," ",e)}},{title:A("orga-table.name"),dataIndex:["user","name"],key:"name",width:"10%"},{title:A("orga-table.org"),dataIndex:["user","org"],key:"org",width:"20%"},{title:"角色",dataIndex:"role",key:"role",width:"20%",render:function(e,t){var r=t.roleList;return S.default.createElement(h.default,null,r.map((function(e){return S.default.createElement("span",{key:e.id},e.dmRole.role.name)})))}},{title:A("orga-table.type"),dataIndex:["user","dirId"],key:"dirId",width:"15%",render:function(e){var t=Z.findIndex((function(t){return t.id===e}));return t>-1?Z[t].name:"--"}},{title:A("orga-common.action"),key:"action",width:"10%",render:function(e,t){return S.default.createElement(h.default,{size:"middle"},S.default.createElement(y.default,{title:"角色修改"},S.default.createElement(O.default,{onClick:function(){return xe(t)},style:{fontSize:"var(--tiklab-icon-size-16)"}})),S.default.createElement(y.default,{title:"删除"},S.default.createElement(b.default,{onClick:function(){return Ue(t.id)},style:{fontSize:"var(--tiklab-icon-size-16)"}})))}}],we=(0,S.useRef)(null);(0,S.useEffect)((function(){Se(),je()}),[]),(0,S.useEffect)((function(){return we.current=!0,Pe(Oe),function(){we.current=!1}}),[Oe]);var Se=function(){k.Axios.post("/user/userdir/findAllList").then((function(e){e.code||Q(e.data)}))},Pe=function(e){(0,_.findDmUserPageService)(e).then(function(){var e=(0,g.default)(u.default.mark((function e(t){var r;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code||!we.current){e.next=6;break}return ge(t.data.totalRecord),e.next=4,Promise.all(ke(t.data.dataList));case 4:r=e.sent,v(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},ke=function(e){return e.map(function(){var e=(0,g.default)(u.default.mark((function e(r){var a,n,i;return u.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n={domainId:t,userId:r.user.id},e.next=4,(0,_.findDmRoleUserListService)(n);case 4:return(i=e.sent).code||(a=i.data.map((function(e){var t=e.dmRole,r=e.role;return{dmRole:T(T({},t),{},{role:r}),roleUserId:e.id}}))),e.abrupt("return",T(T({},r),{},{roleList:a}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},je=function(){var e={domainId:t};(0,_.findDmRoleListService)(e).then((function(e){e.code||W(e.data)}))},xe=function(e){var t=e.roleList;M.setFieldsValue({role:t.map((function(e){return e.dmRole.id}))}),q(e),H(!0)},Ue=function(e){(0,_.deleteDmUserService)(e).then((function(t){t.code||(P(e),ve-1<oe*(fe-1)+1&&(se(1===fe?1:fe-1),he({pageParam:{pageSize:oe,currentPage:1===fe?1:fe-1}})),ge(ve-1))}))},Ie=function(){re(!1),Pe(Oe)},De=function(){M.resetFields(),H(!1),Pe(Oe)},_e=function(e){var t=e.map((function(e){return(0,_.deleteDmRoleUserService)(e)}));return Promise.all(t)},Re=function(e,r){var a={bgroup:n,userId:r,domainId:t};if(Array.isArray(e)){var u=e.map((function(e){var t=T(T({},a),{},{dmRole:{id:e}});return(0,_.createDmRoleUserService)(t)}));Promise.all(u).then((function(e){De()}))}else a=T(T({},a),{},{dmRole:{id:e}}),(0,D.createRoleUserService)(a).then((function(e){0===e.code&&De()}))};return S.default.createElement("div",{className:"privilege-domain-user"},S.default.createElement("div",{className:"privilege-domain-user-content"},S.default.createElement(x.TitleAction,{title:"项目用户",style:{paddingLeft:8}},S.default.createElement(p.default,{onClick:function(){return re(!0)},icon:S.default.createElement(m.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),type:"primary"},A("orga-label.addUser"))),S.default.createElement(c.default,{style:{paddingBottom:"var(--tiklab-padding-item)",paddingLeft:8},justify:"space-between"},S.default.createElement(h.default,null,S.default.createElement(s.default,{placeholder:"用户目录",defaultValue:"-1",style:{width:"240px"}},S.default.createElement(s.default.Option,{key:"-1",value:"-1"},"用户目录"),Z.map((function(e){return S.default.createElement(s.default.Option,{key:e.id,value:e.id},e.name)}))),S.default.createElement(d.default,{placeholder:A("orga-label.searchUserPhoneEmail"),value:ue,onChange:function(e){return ie(e.target.value)},onPressEnter:function(e){return function(e){se(1);var t=T(T({},Oe),{},{pageParam:{pageSize:oe,currentPage:1}});e.target.value?t.name=e.target.value:delete t.name,he(t)}(e)},prefix:S.default.createElement(f.default,{style:{fontSize:"var(--tiklab-icon-size-16)"}}),style:{width:"240px"}}))),S.default.createElement(c.default,null,S.default.createElement(l.default,{span:24},S.default.createElement(o.default,{columns:Ee,dataSource:U,rowKey:function(e){return e.id},tableLayout:"fixed",pagination:{current:fe,pageSize:oe,total:ve,showSizeChanger:!1,position:["bottomCenter"]},onChange:function(e,t,r){return function(e,t,r){var a=[];se(e.current),Array.isArray(r)?a=r.map((function(e){return{name:e.field,sortType:void 0!==e.order?"ascend"===e.order?"asc":"desc":void 0}})):r.field&&a.push({name:r.field,sortType:void 0!==r.order?"ascend"===r.order?"asc":"desc":void 0});var n=T(T({},Oe),{},{orderParams:a,pageParam:{pageSize:oe,currentPage:e.current}});he(n)}(e,0,r)}})))),(0,S.useMemo)((function(){return S.default.createElement(I.default,(0,i.default)({},e,{domainId:t,visible:te,params:Oe,onCancel:Ie}))}),[te]),S.default.createElement(x.BaseModal,{title:"修改角色",visible:J,onOk:function(){M.submit()},onCancel:De,destroyOnClose:!0,cancelText:A("orga-common.back"),okText:A("orga-common.save")},S.default.createElement(E.default,{form:M,onFinish:function(e){var t=(0,R.toJS)(B),r=t.user.id,a=(t.roleList||[]).map((function(e){return e.dmRole.id})),n=e.role,u=a.filter((function(e){return!n.includes(e)})),i=(t.roleList||[]).map((function(e){if(u.includes(e.dmRole.id))return e.roleUserId})).filter(Boolean);0===i.length?Re(n,r):_e(i).then((function(){Re(n,r)}))},preserve:!1,layout:"vertical"},S.default.createElement(E.default.Item,{label:"角色",name:"role",rules:[{required:!0,message:A("adduser-module.userTypeRequired")}]},S.default.createElement(s.default,{mode:"multiple"},L.map((function(e){return S.default.createElement(s.default.Option,{key:e.id,value:e.id},e.role.name)})))))))})));t.default=M},723:function(e,t,r){"use strict";var a=r(150),n=r(276);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,r(49);var u=a(r(26));r(36);var i=a(r(10));r(37);var l=a(r(12));r(52);var o=a(r(22)),c=a(r(278)),d=a(r(95));r(74);var f=a(r(21));r(29);var s=a(r(9)),p=a(r(162)),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=h(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var l=u?Object.getOwnPropertyDescriptor(e,i):null;l&&(l.get||l.set)?Object.defineProperty(a,i,l):a[i]=e[i]}a.default=e,r&&r.set(e,a);return a}(r(0)),v=r(406),g=r(2),b=r(33),y=r(444),O=r(562);function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(h=function(e){return e?r:t})(e)}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){(0,d.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){l=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw u}}}}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var k=function(e){var t=(0,b.useTranslation)().t,r=e.visible,a=e.onCancel,n=e.domainId,d=(0,m.useState)([]),h=(0,p.default)(d,2),E=h[0],P=h[1],k=(0,m.useState)([]),j=(0,p.default)(k,2),x=j[0],U=j[1],I=(0,m.useState)(10),D=(0,p.default)(I,1)[0],_=(0,m.useState)(1),R=(0,p.default)(_,2),A=R[0],N=R[1],T=(0,m.useState)(0),M=(0,p.default)(T,2),z=M[0],C=M[1],L=(0,m.useState)({pageParam:{pageSize:D,currentPage:A}}),W=(0,p.default)(L,2),G=W[0],F=W[1],B=(0,m.useState)([]),q=(0,p.default)(B,2),V=q[0],K=q[1],J=(0,m.useState)(""),H=(0,p.default)(J,2),Y=H[0],$=H[1];(0,m.useEffect)((function(){return Z(),function(){return K([])}}),[]);var Z=function(){g.Axios.post("/user/userdir/findAllList").then((function(e){e.code||K(e.data)}))},Q=[{title:t("orga-table.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0,render:function(e,t){return m.default.createElement(s.default,null,m.default.createElement(v.Profile,{userInfo:t})," ",e)}},{title:t("orga-table.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("orga-table.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("orga-table.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("orga-table.type"),dataIndex:"dirId",key:"dirId",width:"10%",ellipsis:!0,render:function(e){var t=V.findIndex((function(t){return t.id==e}));return t>-1?V[t].name:"--"}}],X=(0,m.useRef)(null);(0,m.useEffect)((function(){return X.current=!0,ee(G),function(){X.current=!1}}),[G]);var ee=function(e){(0,y.findUserPageService)(e).then((function(e){!e.code&&X.current&&(C(e.data.totalRecord),U(e.data.dataList))}))},te={selectedRowKeys:E,onChange:function(e){P(e)}};return m.default.createElement(v.BaseModal,{title:"添加用户",visible:r,onOk:function(){(0,O.findDmUserListService)({domainId:n}).then((function(e){if(!e.code){var t,r=!1,u=e.data.map((function(e){return e.user.id})),i=S(E);try{var l=function(){var e=t.value;if(r)return"break";r=u.some((function(t){return e===t}))};for(i.s();!(t=i.n()).done;){if("break"===l())break}}catch(e){i.e(e)}finally{i.f()}if(r)return f.default.error("存在关联的用户");var o=E.map((function(e){return t={domainId:n,user:{id:e}},(0,O.createDmUserService)(t);var t}));Promise.all(o).then((function(e){F({pageParam:{pageSize:D,currentPage:1}}),P([]),N(1),C(0),$(""),a()}))}}))},onCancel:function(){F({pageParam:{pageSize:D,currentPage:1}}),P([]),N(1),C(0),$(""),a()},width:1200,destroyOnClose:!0,cancelText:t("orga-common.back"),okText:t("orga-common.save")},m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement(o.default,{placeholder:"账号搜索",prefix:m.default.createElement(c.default,null),style:{width:240},value:Y,onChange:function(e){return $(e.target.value)},onPressEnter:function(e){return function(e){var t={name:e.target.value,pageParam:{pageSize:D,currentPage:1}};N(1),F(t)}(e)}}))),m.default.createElement(i.default,null,m.default.createElement(l.default,{span:24},m.default.createElement("div",{style:{width:"100%"}},m.default.createElement(u.default,{columns:Q,dataSource:x,rowSelection:te,rowKey:function(e){return e.id},pagination:{current:A,pageSize:D,total:z,onChange:function(e){N(e);var t=w(w({},G),{},{pageParam:{pageSize:D,currentPage:e}});F(t)},position:["bottomCenter"]}})))))},j=function(e,t){return e.visible===t.visible},x=(0,m.memo)(k,j);t.default=x}}]);