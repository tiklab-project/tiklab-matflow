(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{100:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));r(24);var n=r(6),a=(r(25),r(3)),i=(r(27),r(9)),o=(r(19),r(5)),l=(r(160),r(84)),c=(r(66),r(33)),u=r(0),f=r.n(u),s=r(90),p=r(808),d=r(842),m=r(805),b=r(284),v=r(210);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){h(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w,E=(w="privilege-tree",function(e,t){return Object.entries(e instanceof Object?e:(r={},n=e,a=e,n in r?Object.defineProperty(r,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[n]=a,r)).filter((function(e){return!1!==e[1]})).map((function(e){return e[0]})).map((function(e){return[w,e].filter(Boolean).join("-")})).concat(t&&t.extra||[]).join(" ");var r,n,a}),S=function(e){var t=e.defaultExpandedKeys,r=void 0===t?[]:t,y=e.data,h=void 0===y?[]:y,j=e.defaultCurrent,w=void 0===j?"":j,S=e.onSelect,P=e.onDelete,D=e.onEdit,I=e.classNameTree,A=e.addClick,k=e.onAddChildrenTree,C=e.setTreeParams,F=e.treeParams,z=Object(s.a)().t,T=O(Object(u.useState)(r),2),N=T[0],R=T[1],x=O(Object(u.useState)(w),2),U=x[0],L=x[1];Object(u.useMemo)((function(){L(w)}),[w]);var J=function(e){return N.some((function(t){return t===e}))},M=function(e){J(e)?R(N.filter((function(t){return t!==e}))):R(N.concat(e))},$=function(e){S&&("function"==typeof S&&S(e),L(e.id))},K=function(e){P&&"function"==typeof P&&P(e)},B=function(e){D&&"function"==typeof D&&D(e)},V=function(e){k(e.id)};return f.a.createElement("div",{className:E("wrap",{extra:[I].join(" ")})},f.a.createElement(n.a,null,f.a.createElement(a.a,{span:24},f.a.createElement("div",{className:"tree-item-wrap-tools"},f.a.createElement(o.a,{placeholder:z("privilege-search")+z("privilege-orga-name"),onPressEnter:function(e){return function(e){var t=e.target.value;C(g(g({},F),{},{name:t}))}(e)}}),f.a.createElement(i.a,{type:"primary",onClick:function(){A(!0)}},"+",z("privilege-add-feature"))))),f.a.createElement("div",{className:"privilege-tree"},f.a.createElement("div",{className:"tree"},function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length?t.map((function(t,r){return t.children&&t.children.length?f.a.createElement("li",{key:t.id},f.a.createElement("div",{className:"tree-children"},J(t.id)?f.a.createElement(p.a,{onClick:function(){return M(t.id)}}):f.a.createElement(d.a,{onClick:function(){return M(t.id)}}),f.a.createElement("div",{className:U===t.id?"tree-item-wrap tree-active":"tree-item-wrap"},f.a.createElement("span",{className:"tree-node",onClick:function(){return $(t)}},f.a.createElement(l.a,{placement:"top",title:t.name},t.name)),f.a.createElement("div",{className:"tree-item-action"},f.a.createElement(m.a,{onClick:function(){return V(t)}}),!t.default&&f.a.createElement(b.a,{onClick:function(){return B(t)}}),!t.children&&f.a.createElement(v.a,{onClick:function(){return K(t)}})))),f.a.createElement("ul",{className:J(t.id)?null:"tree-node-hidden"},e(t.children))):f.a.createElement("li",{key:t.id},f.a.createElement("div",{className:"tree-item"},f.a.createElement("div",{className:U===t.id?"tree-item-wrap tree-active":"tree-item-wrap"},f.a.createElement("span",{className:"tree-node",onClick:function(){return $(t)}},f.a.createElement(l.a,{placement:"top",title:t.name},t.name)),f.a.createElement("div",{className:"tree-item-action"},f.a.createElement(m.a,{onClick:function(){return V(t)}}),!t.default&&f.a.createElement(b.a,{onClick:function(){return B(t)}}),!t.default&&f.a.createElement(v.a,{onClick:function(){return K(t)}})))))})):f.a.createElement("div",{className:"tree-empty"},f.a.createElement(c.a,{description:f.a.createElement("span",null,"组织树结构为空，你需要创建一个")}))}(h))))}},21:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(278);var n=r(208),a=r(0),i=r.n(a),o=r(85),l=function(e){var t=e.routes;return i.a.createElement("div",{className:"privilege-breadcrumb"},i.a.createElement(n.a,{itemRender:function(e,t,r,n){var a=r.indexOf(e)===r.length-1;return e.disabled?i.a.createElement("span",null,e.breadcrumbName):a?e.click?i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.click()}},e.breadcrumbName):i.a.createElement("span",null,e.breadcrumbName):e.click?i.a.createElement("span",{style:{cursor:"pointer"},onClick:function(){return e.click()}},e.breadcrumbName):i.a.createElement(o.b,{to:e.path},e.breadcrumbName)},routes:t,separator:">"}))}},212:function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var n={"privilege-feature-name":"功能名称","privilege-feature-code":"功能编码","privilege-add-feature":"添加功能","privilege-orga-name":"组织名称","privilege-add-user":"添加用户","privilege-search":"搜索","privilege-desc":"描述","privilege-user-and-org":"用户名、部门","privilege-user":"用户名","privilege-select-user":"选择用户","privilege-common":{edit:"编辑",delete:"删除",action:"操作","please-input":"请输入","please-select":"请输入"},"privilege-add-node":"新增子节点","privilege-edit-feature":"编辑功能","privilege-point-node":"挂载节点","privilege-point-node-placeholder":"请选择挂载节点","privilege-role":{addRole:"添加角色",addSystemRole:"添加系统角色",editRole:"编辑角色",roleName:"角色名称",roleDesc:"角色描述",people:"成员",promise:"权限",name:"姓名",phone:"手机号",email:"邮箱",type:"类别",orga:"部门",thirdparty:"第三方",internal:"内部",system:"系统",custom:"自定义"}}},214:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));r(0);var n=r(11),a=r(46),i=["code","disabled","systemRoleStore"];function o(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var l=Object(n.b)(a.a)(Object(n.c)((function(e){var t=e.code,r=void 0===t?"":t;e.disabled;var n=e.systemRoleStore,a=o(e,i),l=n.systemPermissions;try{return l.includes(r)?a.children:null}catch(e){return l.includes(r)?a.children:null}})))},215:function(e,t,r){},257:function(e,t,r){"use strict";r.d(t,"a",(function(){return H}));r(66);var n=r(33),a=(r(92),r(20)),i=(r(34),r(16)),o=(r(27),r(9)),l=r(0),c=r.n(l),u=r(11),f=r(90),s=r(2),p=r(21),d=r(98),m=(r(91),r(35)),b=(r(28),r(15)),v=(r(24),r(6)),y=(r(25),r(3)),g=(r(19),r(5)),h=(r(29),r(17)),O=(r(31),r(4));function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){E(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var D=function(e){var t=Object(f.a)().t,r=e.visible,n=e.onCancel,a=e.id,i=void 0===a?"":a,u=e.addSelectedRowKeys,p=e.userIDWidthId,d=e.userDir,m=e.bgroup,j=S(Object(l.useState)([]),2),E=j[0],P=j[1],D=S(Object(l.useState)([]),2),I=D[0],A=D[1],k=S(Object(l.useState)(10),1)[0],C=S(Object(l.useState)(1),2),F=C[0],z=C[1],T=S(Object(l.useState)(0),2),N=T[0],R=T[1],x=S(Object(l.useState)({pageParam:{pageSize:k,currentPage:F}}),2),U=x[0],L=x[1];Object(l.useEffect)((function(){J(U)}),[U]),Object(l.useEffect)((function(){P(u)}),[u]);var J=function(e){s.a.post("/user/user/findUserPage",e).then((function(e){e.code||(R(e.data.totalRecord),A(e.data.dataList))}))},M=function(){L({pageParam:{pageSize:k,currentPage:1}}),P([]),z(1),R(0),n()},$=[{title:t("privilege-role.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("privilege-role.org"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){var t=d.findIndex((function(t){return t.id==e}));return t>-1?d[t].name:"--"}}],K={selectedRowKeys:E,onChange:function(e){P(e)},onSelect:function(e){var t,r="roleUser/deleteRoleUser";E.some((function(t){return t===e.id}))?(t=new FormData).append("id",p[e.id]):(t={role:{id:i},user:{id:e.id},bgroup:m},r="roleUser/createRoleUser"),s.a.post(r,t)}};return c.a.createElement(h.a,{title:t("privilege-select-user"),visible:r,onOk:function(){M()},onCancel:M,closable:!1,width:1200},c.a.createElement(v.a,{style:{paddingBottom:16}},c.a.createElement(y.a,{span:24},c.a.createElement(O.a,{layout:"inline",onFinish:function(e){var t=e.name,r=w(w({},U),{},{name:t,pageParam:{pageSize:k,currentPage:1}});L(r)}},c.a.createElement(O.a.Item,{name:"name",label:t("privilege-user")},c.a.createElement(g.a,null)),c.a.createElement(O.a.Item,null,c.a.createElement(o.a,{type:"primary",htmlType:"submit"},t("privilege-search")))))),c.a.createElement(v.a,null,c.a.createElement(y.a,{span:24},c.a.createElement("div",{style:{width:"100%"}},c.a.createElement(b.a,{columns:$,dataSource:I,rowSelection:K,rowKey:function(e){return e.id},pagination:{current:F,pageSize:k,total:N,onChange:function(e){z(e);var t=w(w({},U),{},{pageParam:{pageSize:k,currentPage:e}});L(t)}}})))))};function I(){return(I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){var t=e.roleDetail,r=e.bgroup,n=Object(f.a)().t,a=A(Object(l.useState)([]),2),u=a[0],p=a[1];Object(l.useEffect)((function(){return d(),function(){return p([])}}),[]);var d=function(){s.a.post("/user/userdir/findAllList").then((function(e){e.code||p(e.data)}))},m=[{title:n("privilege-role.name"),dataIndex:["user","name"]},{title:n("privilege-role.phone"),dataIndex:["user","phone"]},{title:n("privilege-role.email"),dataIndex:["user","email"]},{title:n("privilege-role.type"),dataIndex:["user","userType"],render:function(e){var t=u.findIndex((function(t){return t.id==e}));return t>-1?u[t].name:"--"}},{title:n("privilege-common.action"),key:"action",render:function(e,t){return c.a.createElement(i.b,{size:"middle"},c.a.createElement("a",{onClick:function(){return R(t.id)}},n("privilege-common.delete")))}}],h=A(Object(l.useState)([]),2),O=h[0],j=h[1],w=A(Object(l.useState)(!1),2),E=w[0],S=w[1],P=A(Object(l.useState)([]),2),k=P[0],C=P[1],F=A(Object(l.useState)({}),2),z=F[0],T=F[1];Object(l.useEffect)((function(){t&&N({roleId:t.id})}),[t]);var N=function(e){s.a.post("roleUser/findRoleUserList",e).then((function(e){if(!e.code){j(e.data);var t=e.data.map((function(e){return e.user.id})),r=e.data.reduce((function(e,t){return e[t.user.id]=t.id,e}),{});C(t),T(r)}}))},R=function(e){var r=new FormData;r.append("id",e),s.a.post("roleUser/deleteRoleUser",r).then((function(e){e.code||N({roleId:t.id})}))};return c.a.createElement(c.a.Fragment,null,c.a.createElement(v.a,{style:{padding:"16px 0"},justify:"space-between"},c.a.createElement(y.a,{span:6},c.a.createElement(g.a,{placeholder:n("privilege-search")+n("privilege-user-and-org"),onPressEnter:function(e){var r=e.target.value;N({roleId:t.id,name:r})}})),c.a.createElement(o.a,{onClick:function(){S(!0)}},"+",n("privilege-add-user"))),c.a.createElement(v.a,null,c.a.createElement(y.a,{span:24},c.a.createElement(b.a,{columns:m,dataSource:O,rowKey:function(e){return e.id}}))),c.a.createElement(D,I({},e,{visible:E,onCancel:function(){return S(!1),void N({roleId:t.id,bgroup:r})},id:t.id,addSelectedRowKeys:k,userIDWidthId:z,userDir:u,bgroup:r})))},F=(r(131),r(32));function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return L(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(e,t):void 0}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var J=F.a.Group,M=function(e){var t=e.roleDetail,r=e.group,n=e.bgroup,a=x(Object(l.useState)([]),2),i=a[0],o=a[1],u=x(Object(l.useState)({}),2),f=u[0],p=u[1],d=x(Object(l.useState)({}),2),m=d[0],b=d[1];Object(l.useEffect)((function(){t&&v()}),[t]);var v=function(){s.a.post("/function/findFunctionList",{group:r,bgroup:n}).then((function(e){if(!e.code){var r=y(e.data);o(r.result),p(r.resultChild),h(t.id,!0,r.result,r.resultChild)}}))},y=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,i=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=i})),{result:n,resultChild:a}},g=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat(R(r),[e])})),n},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l={roleId:e,bgroup:n};s.a.post("roleFunction/findRoleFunctionList",l).then((function(e){if(!e.code){var n=g(e.data),l=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),c=t?a:f,u=(t?r:i).map((function(e){var t=n[e.value]?n[e.value]:[],r=0===c[e.value].length,a=t.length===c[e.value].length+1&&0!==t.length,i=a?!a:!!t.length&&t.length<c[e.value].length+1;return r&&1===t.length&&(a=!0,i=!1),T(T({},e),{},{checkedList:t,indeterminate:i,checkAll:a})}));b(l),o(u)}}))},O=function(e,t){var r=t,n=i.filter((function(t){return t.value===e}))[0].checkedList,a=r.length<n.length,o=a?j(n,r):j(r,n);if(a)if(n.length>2){var l=o.filter((function(t){return t!==e}));l.map((function(e,t){E(e,t+1===l.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat(R(o)):o));c.map((function(e,t){E(e,t+1===c.length)}))}else{var u=0===n.length?[e].concat(R(o)):o;u.map((function(e,t){w(e,t+1===u.length)}))}},j=function(e,t){for(var r=[],n=function(n){var a=e[n];t.some((function(e){return e===a}))&&0!==t.length||r.push(a)},a=0;a<e.length;a++)n(a);return r},w=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.id},function:{id:e},bgroup:n};s.a.post("roleFunction/createRoleFunction",a).then((function(e){r&&h(t.id)}))},E=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=m[e],a=new FormData;a.append("id",n),s.a.post("roleFunction/deleteRoleFunction",a).then((function(e){r&&h(t.id)}))};return c.a.createElement(c.a.Fragment,null,i.map((function(e){return c.a.createElement("div",{key:e.value},c.a.createElement(F.a,{indeterminate:e.indeterminate,onChange:function(t){return function(e,t){var r=Object.keys(m),n=r.includes(e),a=r.filter((function(t){return f[e].some((function(e){return e.value===t}))})),i=f[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),o=(!n||0!==f[e].length)&&f[e].length===i.length;if(n||(o=!0,i=f[e]),o)r.includes(e)||(i=[].concat(R(i),[{value:e}])),i.length>0?i.map((function(e,t){w(e.value,t+1===i.length)})):w(e,!0);else{if(r.includes(e)){var l=a.map((function(e){return{value:e}}));i=[].concat(R(l),[{value:e}])}i.length>0?i.map((function(e,t){E(e.value,t+1===i.length)})):E(e,!0)}}(e.value)},checked:e.checkAll},e.label),c.a.createElement("br",null),"       ",c.a.createElement(J,{options:f[e.value],value:e.checkedList,onChange:function(t){return function(e,t){O(e,t)}(e.value,t)}}))})))};function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var K=m.a.TabPane,B=function(e){var t=e.roleDetailParams,r=e.bgroup,n=Object(f.a)().t;return c.a.createElement("div",{className:"role-detail"},c.a.createElement(m.a,{type:"card",defaultActiveKey:"people"},c.a.createElement(K,{tab:n("privilege-role.people"),key:"people"},c.a.createElement(C,$({},e,{group:t.group,roleDetail:t,bgroup:r}))),c.a.createElement(K,{tab:n("privilege-role.promise"),key:"promise"},c.a.createElement(M,$({},e,{group:t.group,roleDetail:t,bgroup:r})))))},V=r(97),W=r(46);function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return G(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return G(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H=Object(u.b)(W.a)(Object(u.c)((function(e){var t=Object(f.a)().t,r=e.systemRoleStore,u=e.bgroup,m=void 0===u?"eas":u,b=r.getRoles,v=r.privilegeSystemRole,y=q(Object(l.useState)(!1),2),g=y[0],h=y[1],O=q(Object(l.useState)({}),2),j=O[0],w=O[1],E=q(Object(l.useState)(99),1)[0],S=q(Object(l.useState)(1),2),P=S[0],D=S[1],I=q(Object(l.useState)(0),2);I[0];var A=I[1],k=q(Object(l.useState)(""),2),C=k[0],F=k[1],z=q(Object(l.useState)({}),2),T=z[0],N=z[1],R={bgroup:m,pageParam:{pageSize:E,currentPage:P}},x=q(Object(l.useState)(R),2),U=x[0],L=x[1];Object(l.useEffect)((function(){J(U)}),[U]);var J=function(e){s.a.post("role/findRolePage",e).then((function(e){if(!e.code){b(e.data.dataList),A(e.data.totalRecord);var t=e.data.dataList;if("{}"!==JSON.stringify(T)){var r=t.filter((function(e){return e.id===T.id}));N(r.length>0?r[0]:{})}else N(t.length>0?t[0]:{})}}))},M=Object(l.useCallback)((function(){w({}),h(!1),J(U)}),[g]),$=c.a.createElement(i.b,null,!1,c.a.createElement(o.a,{onClick:function(){return F("custom"),void h(!0)}},"+",t("privilege-role.addRole")));return c.a.createElement(V.a,{onSearch:function(e){L({name:e.target.value,pageParam:{pageSize:E,currentPage:1},bgroup:m}),D(1)},actions:$,onEdit:function(e){w(e),h(!0)},onDelete:function(e){var t=new FormData;t.append("id",e),s.a.post("role/deleteRole",t).then((function(e){e.code||J(U)}))},onDetail:function(e){N(e)},data:v,userProduction:!1},c.a.createElement(c.a.Fragment,null,c.a.createElement(a.b,{title:c.a.createElement(p.a,{routes:[{disabled:!0,breadcrumbName:"角色管理 "},{path:"first",breadcrumbName:"角色列表"}]}),bordered:!0,column:1,labelStyle:{width:160}},"{}"!==JSON.stringify(T)&&c.a.createElement(a.b.Item,{label:t("privilege-role.roleName")},T.name),"{}"!==JSON.stringify(T)&&c.a.createElement(a.b.Item,{label:t("privilege-role.type")},function(e){switch(e){case"1":return t("privilege-role.system");case"2":default:return t("privilege-role.custom")}}(T.type)),"{}"!==JSON.stringify(T)&&c.a.createElement(a.b.Item,{label:"角色分组"},function(e){switch(e){case"system":return"系统级";case"custom":return"项目级";default:return"项目域"}}(T.group)),"{}"!==JSON.stringify(T)&&c.a.createElement(a.b.Item,{label:t("privilege-role.roleDesc")},T.desc),"{}"===JSON.stringify(T)&&c.a.createElement(a.b.Item,null,c.a.createElement(n.a,{description:c.a.createElement("span",null,"角色列表，你需要创建一个")}))),"{}"!==JSON.stringify(T)&&c.a.createElement(B,{roleDetailParams:T,bgroup:m})),c.a.createElement(d.a,{visible:g,cancel:M,editData:j,group:C,urlType:"system",bgroup:m}))})))},258:function(e,t,r){"use strict";r.d(t,"a",(function(){return ne}));r(66);var n=r(33),a=(r(92),r(20)),i=(r(137),r(47)),o=(r(24),r(6)),l=(r(27),r(9)),c=(r(25),r(3)),u=(r(42),r(12)),f=r(0),s=r.n(f),p=r(11),d=r(2),m=r(90),b=r(284),v=r(98),y=r(21),g=(r(91),r(35)),h=(r(28),r(15)),O=(r(19),r(5)),j=(r(34),r(16)),w=(r(29),r(17)),E=(r(31),r(4));function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){D(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return A(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=function(e){var t=Object(m.a)().t,r=e.visible,n=e.onCancel,a=e.id,i=void 0===a?"":a,u=e.addSelectedRowKeys,p=e.userIDWidthId,b=e.bgroup,v=I(Object(f.useState)([]),2),y=v[0],g=v[1],j=I(Object(f.useState)([]),2),S=j[0],D=j[1],A=I(Object(f.useState)(10),1)[0],k=I(Object(f.useState)(1),2),C=k[0],F=k[1],z=I(Object(f.useState)(0),2),T=z[0],N=z[1],R={bgroup:b,pageParam:{pageSize:A,currentPage:C}},x=I(Object(f.useState)(R),2),U=x[0],L=x[1];Object(f.useEffect)((function(){J(U)}),[U]),Object(f.useEffect)((function(){g(u)}),[u]);var J=function(e){d.a.post("/user/user/findUserPage",e).then((function(e){e.code||(N(e.data.totalRecord),D(e.data.dataList))}))},M=function(){L({bgroup:b,pageParam:{pageSize:A,currentPage:1}}),g([]),F(1),N(0),n()},$=[{title:t("privilege-role.name"),dataIndex:"name",key:"name",width:"20%",ellipsis:!0},{title:t("privilege-role.phone"),dataIndex:"phone",key:"phone",width:"20%",ellipsis:!0},{title:t("privilege-role.email"),dataIndex:"email",key:"email",width:"20%",ellipsis:!0},{title:t("privilege-role.orga"),dataIndex:"org",key:"org",width:"20%",ellipsis:!0},{title:t("privilege-role.type"),dataIndex:"userType",key:"userType",width:"10%",ellipsis:!0,render:function(e){switch(e){case 2:return t("privilege-role.thirdparty");case 1:return t("privilege-role.internal");default:return"--"}}}],K={selectedRowKeys:y,onChange:function(e){g(e)},onSelect:function(e){var t,r="roleUser/deleteRoleUser";y.some((function(t){return t===e.id}))?(t=new FormData).append("id",p[e.id]):(t={role:{id:i},user:{id:e.id},bgroup:b},r="roleUser/createRoleUser"),d.a.post(r,t)}};return s.a.createElement(w.a,{title:t("privilege-select-user"),visible:r,onOk:function(){M()},onCancel:M,closable:!1,width:1200,destroyOnClose:!0},s.a.createElement(o.a,null,s.a.createElement(c.a,{span:24},s.a.createElement(E.a,{layout:"inline",onFinish:function(e){},preserve:!1},s.a.createElement(E.a.Item,{name:"name",label:t("privilege-user")},s.a.createElement(O.a,null)),s.a.createElement(E.a.Item,null,s.a.createElement(l.a,{type:"primary",htmlType:"submit"},t("privilege-search")))))),s.a.createElement(o.a,null,s.a.createElement(c.a,{span:24},s.a.createElement("div",{style:{width:"100%"}},s.a.createElement(h.a,{columns:$,dataSource:S,rowSelection:K,rowKey:function(e){return e.id},pagination:{current:C,pageSize:A,total:T,onChange:function(e){F(e);var t=P(P({},U),{},{pageParam:{pageSize:A,currentPage:e}});L(t)}}})))))};function C(){return(C=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var T=function(e){var t=e.roleDetail,r=e.bgroup,n=Object(m.a)().t,a=F(Object(f.useState)([]),2),i=a[0],u=a[1];Object(f.useEffect)((function(){return p(),function(){return u([])}}),[]);var p=function(){d.a.post("/user/userdir/findAllList").then((function(e){e.code||u(e.data)}))},b=[{title:n("privilege-role.name"),dataIndex:["user","name"]},{title:n("privilege-role.phone"),dataIndex:["user","phone"]},{title:n("privilege-role.email"),dataIndex:["user","email"]},{title:n("privilege-role.type"),dataIndex:["user","userType"],render:function(e){var t=i.findIndex((function(t){return t.id===e}));return t>-1?i[t].name:"--"}},{title:n("privilege-common.action"),key:"action",render:function(e,t){return s.a.createElement(j.b,{size:"middle"},s.a.createElement("a",{onClick:function(){return R(t.id)}},n("privilege-common.delete")))}}],v=F(Object(f.useState)([]),2),y=v[0],g=v[1],w=F(Object(f.useState)(!1),2),E=w[0],S=w[1],P=F(Object(f.useState)([]),2),D=P[0],I=P[1],A=F(Object(f.useState)({}),2),z=A[0],T=A[1];Object(f.useEffect)((function(){t&&N({roleId:t.id,bgroup:r})}),[t]);var N=function(e){d.a.post("roleUser/findRoleUserList",e).then((function(e){if(!e.code){g(e.data);var t=e.data.map((function(e){return e.user.id})),r=e.data.reduce((function(e,t){return e[t.user.id]=t.id,e}),{});I(t),T(r)}}))},R=function(e){var r=new FormData;r.append("id",e),d.a.post("roleUser/deleteRoleUser",r).then((function(e){e.code||N({roleId:t.id})}))};return s.a.createElement(s.a.Fragment,null,s.a.createElement(o.a,{style:{padding:"16px 0"},justify:"space-between"},s.a.createElement(c.a,{span:6},s.a.createElement(O.a,{placeholder:n("privilege-search")+n("privilege-user-and-org"),onPressEnter:function(e){var n=e.target.value;N({roleId:t.id,name:n,bgroup:r})}})),s.a.createElement(l.a,{onClick:function(){S(!0)}},"+",n("privilege-add-user"))),s.a.createElement(o.a,null,s.a.createElement(c.a,{span:24},s.a.createElement(h.a,{columns:b,dataSource:y,rowKey:function(e){return e.id}}))),s.a.createElement(k,C({},e,{visible:E,onCancel:function(){return S(!1),void N({roleId:t.id,bgroup:r})},id:t.id,addSelectedRowKeys:D,userIDWidthId:z,userDir:i,bgroup:r})))},N=(r(131),r(32));function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||M(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||M(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){if(e){if("string"==typeof e)return $(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var K=N.a.Group,B=function(e){var t=e.roleDetail,r=e.bgroup,n=J(Object(f.useState)([]),2),a=n[0],i=n[1],o=J(Object(f.useState)({}),2),l=o[0],c=o[1],u=J(Object(f.useState)({}),2),p=u[0],m=u[1];Object(f.useEffect)((function(){t&&b()}),[t]);var b=function(){d.a.post("/function/findFunctionList",{bgroup:r,type:"2"}).then((function(e){if(!e.code){var r=v(e.data);i(r.result),c(r.resultChild),g(t.id,!0,r.result,r.resultChild)}}))},v=function(e){var t=e.map((function(e){return!e.parentFunction&&{value:e.id,label:e.name}})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&{value:e.id,label:e.name,parent:e.parentFunction.id}})).filter(Boolean),n=[],a={};return t.forEach((function(e){var t=e.value,i=r.filter((function(e){return e.parent===t}));n.push({value:e.value,label:e.label,indeterminate:!1,checkedList:[],checkAll:!1}),a[e.value]=i})),{result:n,resultChild:a}},y=function(e){var t=e.filter((function(e){return e.function&&e.function.parentFunction})).map((function(e){return{parentID:e.function.parentFunction.id,id:e.function.id}})),r=e.filter((function(e){return!e.function.parentFunction})).map((function(e){return e.function.id})),n={};return r.forEach((function(e){var r=t.map((function(t){if(t.parentID===e)return t.id})).filter(Boolean);n[e]=[].concat(L(r),[e])})),n},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c={roleId:e,bgroup:r};d.a.post("roleFunction/findRoleFunctionList",c).then((function(e){if(!e.code){var r=y(e.data),c=e.data.reduce((function(e,t){return e[t.function.id]=t.id,e}),{}),u=t?o:l,f=(t?n:a).map((function(e){var t=r[e.value]?r[e.value]:[],n=0===u[e.value].length,a=t.length===u[e.value].length+1&&0!==t.length,i=a?!a:!!t.length&&t.length<u[e.value].length+1;return n&&1===t.length&&(a=!0,i=!1),x(x({},e),{},{checkedList:t,indeterminate:i,checkAll:a})}));m(c),i(f)}}))},h=function(e,t){var r=t,n=a.filter((function(t){return t.value===e}))[0].checkedList,i=r.length<n.length,o=i?O(n,r):O(r,n);if(i)if(n.length>2){var l=o.filter((function(t){return t!==e}));l.map((function(e,t){w(e,t+1===l.length)}))}else{var c=Array.from(new Set(0===r.length?[e].concat(L(o)):o));c.map((function(e,t){w(e,t+1===c.length)}))}else{var u=0===n.length?[e].concat(L(o)):o;u.map((function(e,t){j(e,t+1===u.length)}))}},O=function(e,t){for(var r=[],n=function(n){var a=e[n];t.some((function(e){return e===a}))&&0!==t.length||r.push(a)},a=0;a<e.length;a++)n(a);return r},j=function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={role:{id:t.id},function:{id:e},bgroup:r};d.a.post("roleFunction/createRoleFunction",a).then((function(e){n&&g(t.id)}))},w=function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=p[e],a=new FormData;a.append("id",n),d.a.post("roleFunction/deleteRoleFunction",a).then((function(e){r&&g(t.id)}))};return s.a.createElement(s.a.Fragment,null,a.map((function(e){return s.a.createElement("div",{key:e.value},s.a.createElement(N.a,{indeterminate:e.indeterminate,onChange:function(t){return function(e,t){var r=Object.keys(p),n=r.includes(e),a=r.filter((function(t){return l[e].some((function(e){return e.value===t}))})),i=l[e].filter((function(e){if(!a.some((function(t){return t===e.value})))return e})),o=(!n||0!==l[e].length)&&l[e].length===i.length;if(n||(o=!0,i=l[e]),o)r.includes(e)||(i=[].concat(L(i),[{value:e}])),i.length>0?i.map((function(e,t){j(e.value,t+1===i.length)})):j(e,!0);else{if(r.includes(e)){var c=a.map((function(e){return{value:e}}));i=[].concat(L(c),[{value:e}])}i.length>0?i.map((function(e,t){w(e.value,t+1===i.length)})):w(e,!0)}}(e.value)},checked:e.checkAll},e.label),s.a.createElement("br",null),"       ",s.a.createElement(K,{options:l[e.value],value:e.checkedList,onChange:function(t){return function(e,t){h(e,t)}(e.value,t)}}))})))};function V(){return(V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var W=g.a.TabPane,q=function(e){var t=e.roleDetailParams,r=e.bgroup,n=Object(m.a)().t;return s.a.createElement("div",{className:"projectRole-detail"},s.a.createElement(g.a,{type:"card",defaultActiveKey:"people"},s.a.createElement(W,{tab:n("privilege-role.people"),key:"people"},s.a.createElement(T,V({},e,{group:t.group,roleDetail:t,bgroup:r}))),s.a.createElement(W,{tab:n("privilege-role.promise"),key:"promise"},s.a.createElement(B,V({},e,{group:t.group,roleDetail:t,bgroup:r})))))},G=r(97),H=r(55),_=["group"];function Q(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=u.a.Option,ne=Object(p.b)(H.a)(Object(p.c)((function(e){var t=Object(m.a)().t,r=e.privilegeProjectRoleStore,p=e.bgroup,g=void 0===p?"eas":p,h=r.getProjectRoles,O=r.privilegeProjectRole,j=ee(Object(f.useState)(!1),2),w=j[0],E=j[1],S=ee(Object(f.useState)({}),2),P=S[0],D=S[1],I=ee(Object(f.useState)(99),1)[0],A=ee(Object(f.useState)(1),2),k=A[0],C=A[1],F=ee(Object(f.useState)(0),2);F[0];var z=F[1],T=ee(Object(f.useState)({}),2),N=T[0],R=T[1],x={bgroup:g,scope:1,pageParam:{pageSize:I,currentPage:k},type:"2"},U=ee(Object(f.useState)(x),2),L=U[0],J=U[1];Object(f.useEffect)((function(){M(L)}),[L]);var M=function(e){d.a.post("role/findRolePage",e).then((function(e){if(0===e.code){h(e.data.dataList),z(e.data.totalRecord);var t=e.data.dataList;if("{}"!==JSON.stringify(N)){var r=t.filter((function(e){return e.id===N.id}));R(r.length>0?r[0]:{})}else R(t.length>0?t[0]:{})}}))},$=Object(f.useCallback)((function(){D({}),E(!1),M(L)}),[w]),K=s.a.createElement(o.a,{justify:"space-between"},s.a.createElement(c.a,{span:12},s.a.createElement(u.a,{placeholder:"请选择类型",allowClear:!0,onChange:function(e){if(e)J(Y(Y({},L),{},{group:e}));else{L.group;var t=Q(L,_);J(Y({},t))}},style:{width:"100%"}},s.a.createElement(re,{value:"system"},t("privilege-role.system")),s.a.createElement(re,{value:"custom"},t("privilege-role.custom")))),s.a.createElement(l.a,{onClick:function(){E(!0)}},"+",t("privilege-role.addRole"))),B=function(e){R(e)},V=s.a.createElement(i.b,{dataSource:O,renderItem:function(e){return s.a.createElement(i.b.Item,{key:e.id,actions:"project"===e.group?[s.a.createElement(b.a,{onClick:function(){return function(e){D(e),E(!0)}(e)}})]:[]},s.a.createElement("div",{className:"listName",onClick:function(){return B(e)}},e.name))}});return s.a.createElement(G.a,{onSearch:function(e){J({name:e.target.value,pageParam:{pageSize:I,currentPage:1},type:"2",bgroup:g}),C(1)},actions:K,onDetail:B,ListComp:V},s.a.createElement(s.a.Fragment,null,s.a.createElement(a.b,{title:s.a.createElement(y.a,{routes:[{disabled:!0,breadcrumbName:"角色管理 "},{path:"first",breadcrumbName:"角色列表"}]}),bordered:!0,column:1,labelStyle:{width:160}},"{}"!==JSON.stringify(N)&&s.a.createElement(a.b.Item,{label:t("privilege-role.roleName")},N.name),"{}"!==JSON.stringify(N)&&s.a.createElement(a.b.Item,{label:"角色分组"},function(e){switch(e){case"system":return"系统级";case"project":return"项目级";default:return"项目域"}}(N.group)),"{}"!==JSON.stringify(N)&&s.a.createElement(a.b.Item,{label:t("privilege-role.type")},function(e){switch(e){case"1":return t("privilege-role.system");case"2":default:return t("privilege-role.custom")}}(N.type)),"{}"!==JSON.stringify(N)&&s.a.createElement(a.b.Item,{label:t("privilege-role.roleDesc")},N.desc),"{}"===JSON.stringify(N)&&s.a.createElement(a.b.Item,null,s.a.createElement(n.a,{description:s.a.createElement("span",null,"项目角色列表，你需要创建一个")}))),"{}"!==JSON.stringify(N)&&s.a.createElement(q,{roleDetailParams:N,bgroup:g})),s.a.createElement(v.a,{visible:w,cancel:$,editData:P,group:"custom",urlType:"project",bgroup:g}))})))},265:function(e,t,r){},266:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));r(24);var n=r(6),a=(r(25),r(3)),i=r(0),o=r.n(i),l=r(11),c=r(2),u=r(96),f=r(100),s=(r(66),r(33)),p=(r(92),r(20)),d=r(90),m=r(21);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var v=function(e){var t=e.data,r=Object(d.a)().t;return o.a.createElement("div",{className:"systemFeature-detail"},o.a.createElement(p.b,{title:o.a.createElement(m.a,b({},e,{routes:[{disabled:!0,breadcrumbName:"功能管理 "},{path:"first",breadcrumbName:"功能详情"}]})),bordered:!0,column:1,labelStyle:{width:160}},t.name&&o.a.createElement(p.b.Item,{label:r("privilege-feature-name")},t.name),t.code&&o.a.createElement(p.b.Item,{label:r("privilege-feature-code")},t.code),!t.name&&o.a.createElement(p.b.Item,null,o.a.createElement(s.a,{description:o.a.createElement("span",null,"组织树结构为空，你需要创建一个")}))))},y=r(54);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=Object(l.b)(y.a)(Object(l.c)((function(e){var t=e.privilegeSystemStore,r=e.bgroup,l=void 0===r?"eas":r,s=t.privilegeSystemTreeData,p=t.getPrivilegeTree,d=w(Object(i.useState)(""),2),m=d[0],b=d[1],y=w(Object(i.useState)(!1),2),h=y[0],j=y[1],E=w(Object(i.useState)({}),2),S=E[0],P=E[1],D=w(Object(i.useState)({}),2),I=D[0],A=D[1],k=w(Object(i.useState)(""),2),C=k[0],F=k[1],z={bgroup:l,pageParam:{pageSize:99999,currentPage:1}},T=w(Object(i.useState)(z),2),N=T[0],R=T[1];Object(i.useEffect)((function(){x()}),[N]);var x=function(){c.a.post("function/findFunctionList",N).then((function(e){if(!e.code){var t=U(e.data);p(t),t.length>0?(A(t[0]),F(t[0].id)):(A({}),F(""))}}))},U=function(e){return function e(t,r){for(var n=[],a=0;a<t.length;a++){var i=t[a];if(i.parentFunction===r||i.parentFunction&&i.parentFunction.id===r){var o=O(O({},i),{},{children:[]});o.children=e(t,i.id),n.push(o)}}return n}(e,null)},L=Object(i.useCallback)((function(e){var t=new FormData;A(e),F(e.id),t.append("id",e.id)}),[]),J=Object(i.useCallback)((function(e){b(e),j(!0)}),[]),M=Object(i.useCallback)((function(){b(""),P({}),j(!1),c.a.post("function/findFunctionList",z).then((function(e){if(!e.code){var t=U(e.data);if(p(t),t.length>0){var r=t.filter((function(e){return e.id===C}));r.length>0&&A(r[0])}}}))}),[]),$=Object(i.useCallback)((function(e){P(e),j(!0)}),[]),K=Object(i.useCallback)((function(e){var t=new FormData;t.append("id",e.id),c.a.post("function/deleteFunction",t).then((function(e){e.code||x()}))}),[]);return o.a.createElement("div",{className:"systemFeature"},o.a.createElement(n.a,{className:"systemFeature-wrap"},o.a.createElement(a.a,{span:24},o.a.createElement("div",{className:"systemFeature-parent"},o.a.createElement(f.a,{data:s,onSelect:L,addClick:j,onDelete:K,onEdit:$,onAddChildrenTree:J,defaultCurrent:C,setTreeParams:R,treeParams:N}),o.a.createElement(v,g({},e,{data:I}))))),o.a.createElement(u.a,{data:s,editData:S,visible:h,cancelAdd:M,parentId:m,urlType:"system",bgroup:l}))})))},267:function(e,t,r){},268:function(e,t,r){},269:function(e,t,r){},270:function(e,t,r){"use strict";r.d(t,"a",(function(){return S}));r(24);var n=r(6),a=(r(25),r(3)),i=r(0),o=r.n(i),l=r(11),c=r(2),u=r(96),f=r(100),s=(r(66),r(33)),p=(r(92),r(20)),d=r(90),m=r(21);function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var v=function(e){var t=Object(d.a)().t,r=e.data;return o.a.createElement("div",{className:"dmFeatureDetail-detail"},o.a.createElement(p.b,{title:o.a.createElement(m.a,b({},e,{routes:[{disabled:!0,breadcrumbName:"功能管理 "},{path:"first",breadcrumbName:"功能详情"}]})),bordered:!0,column:1,labelStyle:{width:160}},r.name&&o.a.createElement(p.b.Item,{label:t("privilege-feature-name")},r.name),r.code&&o.a.createElement(p.b.Item,{label:t("privilege-feature-code")},r.code),!r.name&&o.a.createElement(p.b.Item,null,o.a.createElement(s.a,{description:o.a.createElement("span",null,"组织树结构为空，你需要创建一个")}))))},y=r(56);function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return E(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=Object(l.b)(y.a)(Object(l.c)((function(e){var t=e.privilegeProjectFeatureStore,r=e.bgroup,l=void 0===r?"eas":r,s=t.privilegeProjectTreeData,p=t.getDmPrivilegeTree,d=w(Object(i.useState)(""),2),m=d[0],b=d[1],y=w(Object(i.useState)(!1),2),h=y[0],j=y[1],E=w(Object(i.useState)({}),2),S=E[0],P=E[1],D=w(Object(i.useState)({}),2),I=D[0],A=D[1],k=w(Object(i.useState)(""),2),C=k[0],F=k[1],z={bgroup:l,type:"2",pageParam:{pageSize:99999,currentPage:1}},T=w(Object(i.useState)(z),2),N=T[0],R=T[1];Object(i.useEffect)((function(){x()}),[N]);var x=function(){c.a.post("function/findFunctionList",N).then((function(e){if(!e.code){var t=U(e.data);p(t),t.length>0?(A(t[0]),F(t[0].id)):(A({}),F(""))}}))},U=function(e){var t=e.map((function(e){return!e.parentFunction&&e})).filter(Boolean),r=e.map((function(e){return e.parentFunction&&e.parentFunction.id&&e})).filter(Boolean),n=[];return t.forEach((function(e){var t=e.id,a=r.filter((function(e){return e.parentFunction.id===t}));n.push(O(O({},e),{},{children:a}))})),n},L=Object(i.useCallback)((function(e){var t=new FormData;A(e),F(e.id),t.append("id",e.id)}),[]),J=Object(i.useCallback)((function(e){b(e),j(!0)}),[]),M=Object(i.useCallback)((function(){b(""),P({}),j(!1),c.a.post("function/findFunctionList",z).then((function(e){if(!e.code){var t=U(e.data);if(p(t),t.length>0){var r=t.filter((function(e){return e.id===C}));r.length>0&&A(r[0])}}}))}),[]),$=Object(i.useCallback)((function(e){P(e),j(!0)}),[]),K=Object(i.useCallback)((function(e){var t=new FormData;t.append("id",e.id),c.a.post("function/deleteFunction",t).then((function(e){e.code||x()}))}),[]);return o.a.createElement("div",{className:"privilege-dm"},o.a.createElement(n.a,{className:"privilege-dm-wrap"},o.a.createElement(a.a,{span:24},o.a.createElement("div",{className:"privilege-dm-parent"},o.a.createElement(f.a,{data:s,onSelect:L,addClick:j,onDelete:K,onEdit:$,onAddChildrenTree:J,defaultCurrent:C,setTreeParams:R,treeParams:N}),o.a.createElement(v,g({},e,{data:I}))))),o.a.createElement(u.a,{data:s,editData:S,visible:h,cancelAdd:M,parentId:m,urlType:"project",bgroup:l}))})))},43:function(e,t,r){},46:function(e,t,r){"use strict";r.d(t,"a",(function(){return g})),r.d(t,"b",(function(){return y}));var n,a,i,o,l,c,u,f,s=r(1),p=r(2);function d(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var y=(a=v((n=b((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"privilegeSystemRole",a,this),d(this,"systemPermissions",i,this),d(this,"domainPermissions",o,this),d(this,"getRoles",l,this),d(this,"clearAllPermissions",c,this),d(this,"getInitProjectPermissions",u,this),d(this,"getSystemPermissions",f,this)}))).prototype,"privilegeSystemRole",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=v(n.prototype,"systemPermissions",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),o=v(n.prototype,"domainPermissions",[s.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),l=v(n.prototype,"getRoles",[s.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemRole=t}}}),c=v(n.prototype,"clearAllPermissions",[s.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){e.systemPermissions=[],e.domainPermissions={}}}}),u=v(n.prototype,"getInitProjectPermissions",[s.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){if(!e.domainPermissions[r]&&t&&r){var n=new FormData;n.append("userId",t),n.append("domainId",r);var a={};return Object(p.e)()&&Object(p.e)().tenant&&(a={tenant:Object(p.e)().tenant}),p.a.post("permission/findDomainPermissions",n,a).then((function(t){return t.code||(e.domainPermissions[r]=t.data),t}))}}}}),f=v(n.prototype,"getSystemPermissions",[s.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=new FormData;r.append("userId",t);var n={};return Object(p.e)()&&Object(p.e)().tenant&&(n={tenant:Object(p.e)().tenant}),p.a.post("permission/findPermissions",r,n).then((function(t){return t.code||(e.systemPermissions=t.data),t}))}}}),n),g="systemRoleStore"},54:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return O}));var n,a,i,o,l,c,u,f=r(1);function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var O=(a=h((n=y((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"privilegeSystemTreeData",a,this),b(this,"getPrivilegeTree",i,this),b(this,"addFeature",o,this),b(this,"addChildrenFeature",l,this),b(this,"deleteFeature",c,this),b(this,"editFeature",u,this)}))).prototype,"privilegeSystemTreeData",[f.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=h(n.prototype,"getPrivilegeTree",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemTreeData=t}}}),o=h(n.prototype,"addFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeSystemTreeData.push(t)}}}),l=h(n.prototype,"addChildrenFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeSystemTreeData=e.privilegeSystemTreeData.map((function(e){return e.id===r?m(m({},e),{},{children:[t].concat(s(e.children))}):e}))}}}),c=h(n.prototype,"deleteFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(m(m({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),u=h(n.prototype,"editFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(m(m(m({},r),t),{},{children:[]})):n.push(m(m({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeSystemTreeData,r),e.privilegeSystemTreeData=r}}}),n),j="privilegeSystemStore"},55:function(e,t,r){"use strict";r.d(t,"a",(function(){return p})),r.d(t,"b",(function(){return s}));var n,a,i,o=r(1);function l(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var s=(a=f((n=u((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"privilegeProjectRole",a,this),l(this,"getProjectRoles",i,this)}))).prototype,"privilegeProjectRole",[o.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=f(n.prototype,"getProjectRoles",[o.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectRole=t}}}),n),p="privilegeProjectRoleStore"},56:function(e,t,r){"use strict";r.d(t,"a",(function(){return j})),r.d(t,"b",(function(){return O}));var n,a,i,o,l,c,u,f=r(1);function s(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,r){return t&&v(e.prototype,t),r&&v(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var O=(a=h((n=y((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),b(this,"privilegeProjectTreeData",a,this),b(this,"getDmPrivilegeTree",i,this),b(this,"addDmFeature",o,this),b(this,"addDmChildrenFeature",l,this),b(this,"deleteDmFeature",c,this),b(this,"editDmFeature",u,this)}))).prototype,"privilegeProjectTreeData",[f.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=h(n.prototype,"getDmPrivilegeTree",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData=t}}}),o=h(n.prototype,"addDmFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeProjectTreeData.push(t)}}}),l=h(n.prototype,"addDmChildrenFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,r){e.privilegeProjectTreeData=e.privilegeProjectTreeData.map((function(e){return e.id===r?m(m({},e),{},{children:[t].concat(s(e.children))}):e}))}}}),c=h(n.prototype,"deleteDmFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id!==t.id&&n.push(m(m({},r),{},{children:[]})),r.children&&r.children.length>0&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),u=h(n.prototype,"editDmFeature",[f.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var r=[];!function e(r,n){r.forEach((function(r,a){r.id===t.id?n.push(m(m(m({},r),t),{},{children:[]})):n.push(m(m({},r),{},{children:[]})),r.children&&n[a].children&&e(r.children,n[a].children)}))}(e.privilegeProjectTreeData,r),e.privilegeProjectTreeData=r}}}),n),j="privilegeProjectFeatureStore"},67:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));var n,a,i,o=r(1);function l(e,t,r,n){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(n):void 0})}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(e,t,r,n,a){var i={};return Object.keys(n).forEach((function(e){i[e]=n[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,n){return n(e,t,r)||r}),i),a&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var s=(a=f((n=u((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"privilegeDomainRole",a,this),l(this,"getDomainRoles",i,this)}))).prototype,"privilegeDomainRole",[o.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),i=f(n.prototype,"getDomainRoles",[o.f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){e.privilegeDomainRole=t}}}),n),p=r(56),d=r(46),m=r(55),b=r(54);function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y,g=(v(y={},b.a,new b.b),v(y,d.a,new d.b),v(y,m.a,new m.b),v(y,p.a,new p.b),v(y,"privilegeDomainRoleStore",new s),y)},96:function(e,t,r){"use strict";r.d(t,"a",(function(){return b}));r(29);var n=r(17),a=(r(166),r(110)),i=(r(19),r(5)),o=(r(31),r(4)),l=r(0),c=r.n(l),u=r(90),f=r(2);function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m={labelCol:{span:6},wrapperCol:{span:18}},b=function(e){var t=e.visible,r=e.cancelAdd,d=e.editData,b=void 0===d?{}:d,v=e.parentId,y=void 0===v?"":v,g=e.urlType,h=void 0===g?"system":g,O=e.data,j=void 0===O?[]:O,w=e.bgroup,E=p(o.a.useForm(),1)[0],S=Object(u.a)().t,P=p(Object(l.useState)([]),2);P[0];var D=P[1];Object(l.useEffect)((function(){t&&A()}),[t]),Object(l.useEffect)((function(){"{}"!==JSON.stringify(b)&&(E.setFieldsValue({code:b.code}),E.setFieldsValue({name:b.name}),E.setFieldsValue({parent:b.parentFunction?b.parentFunction.id:b.parentFunction})),y&&E.setFieldsValue({parent:y})}),[b,y]);var I,A=function(){var e=new FormData;e.append("type","system"===h?"1":"2"),e.append("bgroup",w),f.a.post("function/findFunctionListByParentId",e).then((function(e){e.code||D(e.data)}))},k=function(){E.resetFields(),r()};return c.a.createElement(n.a,{title:"{}"!==JSON.stringify(b)?S("privilege-edit-feature"):S("privilege-add-feature"),visible:t,onOk:function(){E.submit()},onCancel:k,closable:!1,forceRender:!0,destroyOnClose:!0},c.a.createElement(o.a,s({},m,{form:E,onFinish:function(e){if("{}"===JSON.stringify(b)){var t={name:e.name,code:e.code,parentFunction:{id:e.parent},bgroup:w,type:"system"===h?"1":"2"};f.a.post("function/createFunction",t).then((function(e){e.code||k()}))}else{var r={id:b.id,name:e.name,code:e.code,parentFunction:{id:e.parent},bgroup:w,type:"system"===h?"1":"2"};f.a.post("function/updateFunction",r).then((function(e){e.code||k()}))}},preserve:!1}),c.a.createElement(o.a.Item,{label:S("privilege-feature-name"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.a.createElement(i.a,null)),c.a.createElement(o.a.Item,{label:S("privilege-feature-code"),name:"code",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},c.a.createElement(i.a,null)),c.a.createElement(o.a.Item,{label:S("privilege-point-node"),name:"parent"},c.a.createElement(a.a,{style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},treeData:(I=[],function e(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t.forEach((function(t){var a={title:t.name,value:t.id,disabled:n};if(t.id===b.id&&(a.disabled=!0),r.push(a),t.children&&t.children.length>0)return e(t.children,a.children=[],a.disabled)}))}(j,I),I),placeholder:S("privilege-point-node-placeholder"),disabled:y||b.children&&b.children.length>0}))))}},97:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));r(165);var n=r(111),a=(r(137),r(47)),i=(r(19),r(5)),o=r(0),l=r.n(o),c=r(284),u=r(210);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=function(e){var t=e.data,r=e.onSearch,s=e.actions,p=e.onEdit,d=e.onDelete,m=e.onDetail,b=e.children,v=e.ListComp,y=e.userProduction,g=void 0===y||y,h=e.isSpace,O=void 0!==h&&h,j=f(Object(o.useState)(""),2),w=j[0],E=j[1];return l.a.createElement("div",{className:"privilegeLayout"},l.a.createElement("div",{className:"left"},O?l.a.createElement("div",{className:"search_1"},l.a.createElement(i.a,{placeholder:"搜索名称",style:{marginRight:8},onPressEnter:function(e){return r(e)},value:w,onChange:function(e){return E(e.target.value)}}),s):l.a.createElement("div",{className:"search"},l.a.createElement(i.a,{placeholder:"搜索名称",onPressEnter:function(e){return r(e)},value:w,onChange:function(e){return E(e.target.value)}}),s),t?l.a.createElement(a.b,{dataSource:t,renderItem:function(e){return l.a.createElement(a.b.Item,{key:e.id,actions:g&&d?[l.a.createElement(c.a,{onClick:function(){return p(e)}}),l.a.createElement(u.a,{onClick:function(){return d(e.id)}})]:d?[l.a.createElement(u.a,{onClick:function(){return d(e.id)}})]:[]},l.a.createElement("div",{className:"listName",onClick:function(){return m(e)}},e.name))}}):l.a.createElement(l.a.Fragment,null,v)),l.a.createElement(n.a,{type:"vertical",style:{height:"100%"}}),l.a.createElement("div",{className:"right"},b))}},98:function(e,t,r){"use strict";r.d(t,"a",(function(){return g}));r(29);var n=r(17),a=(r(19),r(5)),i=(r(31),r(4)),o=r(0),l=r.n(o),c=r(90),u=r(2);function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,l=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){l=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(l)throw a}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var v={labelCol:{span:6},wrapperCol:{span:18}},y=function(e){var t=Object(c.a)().t,r=e.visible,s=e.cancel,d=e.editData,b=void 0===d?{}:d,y=e.group,g=void 0===y?"system":y,h=e.urlType,O=void 0===h?"system":h,j=e.bgroup;if(!["system","project"].includes(O))throw Error("use RoleAdd Component must have urlType props, value:'system'、 'project'");var w=m(i.a.useForm(),1)[0];Object(o.useEffect)((function(){w.setFieldsValue({desc:b.desc}),w.setFieldsValue({name:b.name})}),[b]);var E=function(){w.resetFields(),s()};return l.a.createElement(n.a,{title:"{}"!==JSON.stringify(b)?t("privilege-role.editRole"):t("privilege-role.addRole"),visible:r,onOk:function(){w.submit()},onCancel:E,closable:!1,forceRender:!0,destroyOnClose:!0},l.a.createElement(i.a,f({},v,{form:w,preserve:!1,onFinish:function(e){var t="role/createRole",r=p(p({},e),{},{group:g,type:"system"===O?"1":"2",bgroup:j});"{}"!==JSON.stringify(b)&&(t="role/updateRole",r=p(p({},e),{},{group:g,id:b.id,type:"system"===O?"1":"2"})),u.a.post(t,r).then((function(e){e.code||E()}))}}),l.a.createElement(i.a.Item,{label:t("privilege-role.roleName"),name:"name",rules:[{required:!0,message:"用户名不能包含非法字符，如&,%，&，#……等"}]},l.a.createElement(a.a,null)),l.a.createElement(i.a.Item,{label:t("privilege-desc"),name:"desc"},l.a.createElement(a.a,null))))},g=Object(o.memo)(y)}}]);